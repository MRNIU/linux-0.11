<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux: /home/runner/work/linux-0.11/linux-0.11/src/include/linux/fs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux
   &#160;<span id="projectnumber">0.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('src_2include_2linux_2fs_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fs.h:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h__incl.png" border="0" usemap="#a_2home_2runner_2work_2linux-0_811_2linux-0_811_2src_2include_2linux_2fs_8h" alt=""/></div>
<map name="a_2home_2runner_2work_2linux-0_811_2linux-0_811_2src_2include_2linux_2fs_8h" id="a_2home_2runner_2work_2linux-0_811_2linux-0_811_2src_2include_2linux_2fs_8h">
<area shape="rect" title=" " alt="" coords="5,5,204,61"/>
<area shape="rect" title=" " alt="" coords="57,109,153,136"/>
</map>
</div>
</div>
<p><a href="src_2include_2linux_2fs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuffer__head.html">buffer_head</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structd__inode.html">d_inode</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structm__inode.html">m_inode</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfile.html">file</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsuper__block.html">super_block</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structd__super__block.html">d_super_block</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdir__entry.html">dir_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5cefe23969abef17202a791bf96a7269"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a5cefe23969abef17202a791bf96a7269">IS_SEEKABLE</a>(<a class="el" href="src_2kernel_2chr__drv_2console_8c.html#a3539f71fd772fb26bff625c8ec793564">x</a>)&#160;&#160;&#160;((<a class="el" href="src_2kernel_2chr__drv_2console_8c.html#a3539f71fd772fb26bff625c8ec793564">x</a>)&gt;=1 &amp;&amp; (<a class="el" href="src_2kernel_2chr__drv_2console_8c.html#a3539f71fd772fb26bff625c8ec793564">x</a>)&lt;=3)</td></tr>
<tr class="separator:a5cefe23969abef17202a791bf96a7269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada74e7db007a68e763f20c17f2985356"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ada74e7db007a68e763f20c17f2985356">READ</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ada74e7db007a68e763f20c17f2985356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa10f470e996d0f51210d24f442d25e1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#aa10f470e996d0f51210d24f442d25e1e">WRITE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aa10f470e996d0f51210d24f442d25e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab40fed6d82496844dbcc6bbe5756eb5f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ab40fed6d82496844dbcc6bbe5756eb5f">READA</a>&#160;&#160;&#160;2		/* <a class="el" href="src_2include_2unistd_8h.html#a4a25d8f1ec591ee5d0a0664fd8db103c">read</a>-ahead - don't <a class="el" href="src_2include_2unistd_8h.html#a0e8ee93247f9cef4fc7ba80bb04eca8d">pause</a> */</td></tr>
<tr class="separator:ab40fed6d82496844dbcc6bbe5756eb5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f50f82769eeadd464464d064a537968"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a1f50f82769eeadd464464d064a537968">WRITEA</a>&#160;&#160;&#160;3	/* &quot;write-ahead&quot; - silly, but somewhat useful */</td></tr>
<tr class="separator:a1f50f82769eeadd464464d064a537968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad46638abb143d7f2f6df36789c92f720"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ad46638abb143d7f2f6df36789c92f720">MAJOR</a>(<a class="el" href="src_2kernel_2sched_8c.html#a528b92115c4bb60d7b46de7e09ea0bae">a</a>)&#160;&#160;&#160;(((unsigned)(<a class="el" href="src_2kernel_2sched_8c.html#a528b92115c4bb60d7b46de7e09ea0bae">a</a>))&gt;&gt;8)</td></tr>
<tr class="separator:ad46638abb143d7f2f6df36789c92f720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90c981f077e8797694a25fb755de7d0f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a90c981f077e8797694a25fb755de7d0f">MINOR</a>(<a class="el" href="src_2kernel_2sched_8c.html#a528b92115c4bb60d7b46de7e09ea0bae">a</a>)&#160;&#160;&#160;((<a class="el" href="src_2kernel_2sched_8c.html#a528b92115c4bb60d7b46de7e09ea0bae">a</a>)&amp;0xff)</td></tr>
<tr class="separator:a90c981f077e8797694a25fb755de7d0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4853f6c25c8394fd57c4d99f61d5cd89"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a4853f6c25c8394fd57c4d99f61d5cd89">NAME_LEN</a>&#160;&#160;&#160;14</td></tr>
<tr class="separator:a4853f6c25c8394fd57c4d99f61d5cd89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53239041354f7e1c8d3bb1308876a6b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a53239041354f7e1c8d3bb1308876a6b9">ROOT_INO</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a53239041354f7e1c8d3bb1308876a6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71c7396c17b5b78323bd4dedbfd8e02a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a71c7396c17b5b78323bd4dedbfd8e02a">I_MAP_SLOTS</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a71c7396c17b5b78323bd4dedbfd8e02a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb044b964b71068aba08b0c22fde4b4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#acb044b964b71068aba08b0c22fde4b4d">Z_MAP_SLOTS</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:acb044b964b71068aba08b0c22fde4b4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01d05bc7252657d774b34f4f6eddaabf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a01d05bc7252657d774b34f4f6eddaabf">SUPER_MAGIC</a>&#160;&#160;&#160;0x137F</td></tr>
<tr class="separator:a01d05bc7252657d774b34f4f6eddaabf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a326ba885b33e0ac094fec455a1ec30b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a326ba885b33e0ac094fec455a1ec30b3">NR_OPEN</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:a326ba885b33e0ac094fec455a1ec30b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af63c190de439b45378f43837de8a7c6a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#af63c190de439b45378f43837de8a7c6a">NR_INODE</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:af63c190de439b45378f43837de8a7c6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13d1daac91a4ebfc4511bbe85d15d360"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a13d1daac91a4ebfc4511bbe85d15d360">NR_FILE</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:a13d1daac91a4ebfc4511bbe85d15d360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9169276d1d6c029b1d8680def713d7e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a9169276d1d6c029b1d8680def713d7e3">NR_SUPER</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a9169276d1d6c029b1d8680def713d7e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7274e20ec5c1695cfdae0c8c7bc0337"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#af7274e20ec5c1695cfdae0c8c7bc0337">NR_HASH</a>&#160;&#160;&#160;307</td></tr>
<tr class="separator:af7274e20ec5c1695cfdae0c8c7bc0337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec98c1f9d6552a0ec3977299048ed4fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#aec98c1f9d6552a0ec3977299048ed4fc">NR_BUFFERS</a>&#160;&#160;&#160;<a class="el" href="src_2include_2linux_2fs_8h.html#a5b1e5796de57540927d03ee66f2baf28">nr_buffers</a></td></tr>
<tr class="separator:aec98c1f9d6552a0ec3977299048ed4fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad51ded0bbd705f02f73fc60c0b721ced"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:ad51ded0bbd705f02f73fc60c0b721ced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad334ac90d6d2da17043489d143adc16a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ad334ac90d6d2da17043489d143adc16a">BLOCK_SIZE_BITS</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:ad334ac90d6d2da17043489d143adc16a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a070d2ce7b6bb7e5c05602aa8c308d0c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>&#160;&#160;&#160;((void *) 0)</td></tr>
<tr class="separator:a070d2ce7b6bb7e5c05602aa8c308d0c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af81febf73be8e6e63390123e26c81ce3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#af81febf73be8e6e63390123e26c81ce3">INODES_PER_BLOCK</a>&#160;&#160;&#160;((<a class="el" href="src_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>)/(sizeof (struct <a class="el" href="structd__inode.html">d_inode</a>)))</td></tr>
<tr class="separator:af81febf73be8e6e63390123e26c81ce3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72f4e7efb08138b5e2d8d3e9077a5403"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a72f4e7efb08138b5e2d8d3e9077a5403">DIR_ENTRIES_PER_BLOCK</a>&#160;&#160;&#160;((<a class="el" href="src_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>)/(sizeof (struct <a class="el" href="structdir__entry.html">dir_entry</a>)))</td></tr>
<tr class="separator:a72f4e7efb08138b5e2d8d3e9077a5403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02fb52db3368bef7f5dbcd349dd9a3b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a02fb52db3368bef7f5dbcd349dd9a3b0">PIPE_HEAD</a>(inode)&#160;&#160;&#160;((inode).i_zone[0])</td></tr>
<tr class="separator:a02fb52db3368bef7f5dbcd349dd9a3b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f5ea8466512c3ae82260b4f1064fca3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a0f5ea8466512c3ae82260b4f1064fca3">PIPE_TAIL</a>(inode)&#160;&#160;&#160;((inode).i_zone[1])</td></tr>
<tr class="separator:a0f5ea8466512c3ae82260b4f1064fca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad891c9d4a6092e3051327d88b454f2e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#aad891c9d4a6092e3051327d88b454f2e">PIPE_SIZE</a>(inode)&#160;&#160;&#160;((<a class="el" href="src_2include_2linux_2fs_8h.html#a02fb52db3368bef7f5dbcd349dd9a3b0">PIPE_HEAD</a>(inode)-<a class="el" href="src_2include_2linux_2fs_8h.html#a0f5ea8466512c3ae82260b4f1064fca3">PIPE_TAIL</a>(inode))&amp;(<a class="el" href="src_2include_2linux_2mm_8h.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>-1))</td></tr>
<tr class="separator:aad891c9d4a6092e3051327d88b454f2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa460d6f2b8cf2a121bfa29f22d90f19f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#aa460d6f2b8cf2a121bfa29f22d90f19f">PIPE_EMPTY</a>(inode)&#160;&#160;&#160;(<a class="el" href="src_2include_2linux_2fs_8h.html#a02fb52db3368bef7f5dbcd349dd9a3b0">PIPE_HEAD</a>(inode)==<a class="el" href="src_2include_2linux_2fs_8h.html#a0f5ea8466512c3ae82260b4f1064fca3">PIPE_TAIL</a>(inode))</td></tr>
<tr class="separator:aa460d6f2b8cf2a121bfa29f22d90f19f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0b0dd5f3ecf5d9e436fe7f5b4bbd7d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ace0b0dd5f3ecf5d9e436fe7f5b4bbd7d">PIPE_FULL</a>(inode)&#160;&#160;&#160;(<a class="el" href="src_2include_2linux_2fs_8h.html#aad891c9d4a6092e3051327d88b454f2e">PIPE_SIZE</a>(inode)==(<a class="el" href="src_2include_2linux_2mm_8h.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>-1))</td></tr>
<tr class="separator:ace0b0dd5f3ecf5d9e436fe7f5b4bbd7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4846395483a9eb36d95b65dc7b511226"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a4846395483a9eb36d95b65dc7b511226">INC_PIPE</a>(<a class="el" href="src_2kernel_2blk__drv_2floppy_8c.html#a47f7e6109597e5c1c227993c0ce5f560">head</a>)&#160;&#160;&#160;__asm__(&quot;incl %0\n\tandl $4095,%0&quot;::&quot;m&quot; (head))</td></tr>
<tr class="separator:a4846395483a9eb36d95b65dc7b511226"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a56103a26c41f649cb610d70d480f5efb"><td class="memItemLeft" align="right" valign="top">typedef char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a56103a26c41f649cb610d70d480f5efb">buffer_block</a>[<a class="el" href="src_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>]</td></tr>
<tr class="separator:a56103a26c41f649cb610d70d480f5efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a008e777b9e9f7711d783bf16505bd714"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a008e777b9e9f7711d783bf16505bd714">buffer_init</a> (long buffer_end)</td></tr>
<tr class="separator:a008e777b9e9f7711d783bf16505bd714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53eefc9fcd3ae0cc20ec6eeea2dd6d44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a53eefc9fcd3ae0cc20ec6eeea2dd6d44">check_disk_change</a> (int dev)</td></tr>
<tr class="separator:a53eefc9fcd3ae0cc20ec6eeea2dd6d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe1936a56cbf6ac4fb9d685078f38e9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#abe1936a56cbf6ac4fb9d685078f38e9c">floppy_change</a> (unsigned int nr)</td></tr>
<tr class="separator:abe1936a56cbf6ac4fb9d685078f38e9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76e3624f11501cc29f2f180230e8741c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a76e3624f11501cc29f2f180230e8741c">ticks_to_floppy_on</a> (unsigned int dev)</td></tr>
<tr class="separator:a76e3624f11501cc29f2f180230e8741c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b4212726bcaddfc91dcc759dc44ab38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a9b4212726bcaddfc91dcc759dc44ab38">floppy_on</a> (unsigned int dev)</td></tr>
<tr class="separator:a9b4212726bcaddfc91dcc759dc44ab38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab57fae9ebfff5eaf081923d3753f0dbc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ab57fae9ebfff5eaf081923d3753f0dbc">floppy_off</a> (unsigned int dev)</td></tr>
<tr class="separator:ab57fae9ebfff5eaf081923d3753f0dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1697df39771f157846a3ef9f46327c23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a1697df39771f157846a3ef9f46327c23">truncate</a> (struct <a class="el" href="structm__inode.html">m_inode</a> *inode)</td></tr>
<tr class="separator:a1697df39771f157846a3ef9f46327c23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e8b4c0a66f6ea10acdb053c4f4e8c79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79">sync_inodes</a> (void)</td></tr>
<tr class="separator:a4e8b4c0a66f6ea10acdb053c4f4e8c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2041fe96ec88b835db9835524e07eb47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a2041fe96ec88b835db9835524e07eb47">wait_on</a> (struct <a class="el" href="structm__inode.html">m_inode</a> *inode)</td></tr>
<tr class="separator:a2041fe96ec88b835db9835524e07eb47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a608309a4a886522767be4646f5c709cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a608309a4a886522767be4646f5c709cc">bmap</a> (struct <a class="el" href="structm__inode.html">m_inode</a> *inode, int block)</td></tr>
<tr class="separator:a608309a4a886522767be4646f5c709cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3704034fc57e100765395733a0a72321"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a3704034fc57e100765395733a0a72321">create_block</a> (struct <a class="el" href="structm__inode.html">m_inode</a> *inode, int block)</td></tr>
<tr class="separator:a3704034fc57e100765395733a0a72321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae192f1ee0225a7a7c86385b7bf653ac2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ae192f1ee0225a7a7c86385b7bf653ac2">namei</a> (const char *pathname)</td></tr>
<tr class="separator:ae192f1ee0225a7a7c86385b7bf653ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad08df58f033bd23ea1315499d697a3b0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ad08df58f033bd23ea1315499d697a3b0">open_namei</a> (const char *pathname, int flag, int mode, struct <a class="el" href="structm__inode.html">m_inode</a> **res_inode)</td></tr>
<tr class="separator:ad08df58f033bd23ea1315499d697a3b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa76e75f45af948cbb6e5da444038f40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#afa76e75f45af948cbb6e5da444038f40">iput</a> (struct <a class="el" href="structm__inode.html">m_inode</a> *inode)</td></tr>
<tr class="separator:afa76e75f45af948cbb6e5da444038f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b297f206aacdb913d2db4db1ef6689"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a78b297f206aacdb913d2db4db1ef6689">iget</a> (int dev, int nr)</td></tr>
<tr class="separator:a78b297f206aacdb913d2db4db1ef6689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a233cbadcd057272f37322a707c908989"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a233cbadcd057272f37322a707c908989">get_empty_inode</a> (void)</td></tr>
<tr class="separator:a233cbadcd057272f37322a707c908989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c1dadaac141814cea5e34ce43d5c32"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a29c1dadaac141814cea5e34ce43d5c32">get_pipe_inode</a> (void)</td></tr>
<tr class="separator:a29c1dadaac141814cea5e34ce43d5c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26c3be9640a543377e6c6f8d189c83e9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbuffer__head.html">buffer_head</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a26c3be9640a543377e6c6f8d189c83e9">get_hash_table</a> (int dev, int block)</td></tr>
<tr class="separator:a26c3be9640a543377e6c6f8d189c83e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a197cebc7bc8d67773a979e92c14b40c0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbuffer__head.html">buffer_head</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a197cebc7bc8d67773a979e92c14b40c0">getblk</a> (int dev, int block)</td></tr>
<tr class="separator:a197cebc7bc8d67773a979e92c14b40c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9add4ad497e3b9eae67e2cbf7cea45e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e">ll_rw_block</a> (int rw, struct <a class="el" href="structbuffer__head.html">buffer_head</a> *bh)</td></tr>
<tr class="separator:af9add4ad497e3b9eae67e2cbf7cea45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15c8296a5599c15736bb9383050eec7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ad15c8296a5599c15736bb9383050eec7">brelse</a> (struct <a class="el" href="structbuffer__head.html">buffer_head</a> *<a class="el" href="src_2kernel_2printk_8c.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a>)</td></tr>
<tr class="separator:ad15c8296a5599c15736bb9383050eec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad78fac6715f3c28e0cf0522df36a111f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbuffer__head.html">buffer_head</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ad78fac6715f3c28e0cf0522df36a111f">bread</a> (int dev, int block)</td></tr>
<tr class="separator:ad78fac6715f3c28e0cf0522df36a111f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0577abbf099f812ecca45fce0601558"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ab0577abbf099f812ecca45fce0601558">bread_page</a> (unsigned long addr, int dev, int <a class="el" href="src_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a>[4])</td></tr>
<tr class="separator:ab0577abbf099f812ecca45fce0601558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1febe84f18fa40d4923bb1c82d9ebc"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbuffer__head.html">buffer_head</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#aaa1febe84f18fa40d4923bb1c82d9ebc">breada</a> (int dev, int block,...)</td></tr>
<tr class="separator:aaa1febe84f18fa40d4923bb1c82d9ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f051047ee70eb8464844e3ab6b430af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a3f051047ee70eb8464844e3ab6b430af">new_block</a> (int dev)</td></tr>
<tr class="separator:a3f051047ee70eb8464844e3ab6b430af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd0da83359d6f16a52320c44c41c526"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#abdd0da83359d6f16a52320c44c41c526">free_block</a> (int dev, int block)</td></tr>
<tr class="separator:abdd0da83359d6f16a52320c44c41c526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa17030f2c3706317c68a4552b2d8f61e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#aa17030f2c3706317c68a4552b2d8f61e">new_inode</a> (int dev)</td></tr>
<tr class="separator:aa17030f2c3706317c68a4552b2d8f61e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d90ed0df8a21fff7ae1e1a47053e406"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a3d90ed0df8a21fff7ae1e1a47053e406">free_inode</a> (struct <a class="el" href="structm__inode.html">m_inode</a> *inode)</td></tr>
<tr class="separator:a3d90ed0df8a21fff7ae1e1a47053e406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95df8a2e491bf4181e3d7b6ddfc755a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a95df8a2e491bf4181e3d7b6ddfc755a3">sync_dev</a> (int dev)</td></tr>
<tr class="separator:a95df8a2e491bf4181e3d7b6ddfc755a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43f836df13a239d2197028d56018edba"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a43f836df13a239d2197028d56018edba">get_super</a> (int dev)</td></tr>
<tr class="separator:a43f836df13a239d2197028d56018edba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a516f58ff075ed9e15bb77645c5d55b56"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a516f58ff075ed9e15bb77645c5d55b56">mount_root</a> (void)</td></tr>
<tr class="separator:a516f58ff075ed9e15bb77645c5d55b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9bf294a613d9b62d17a7b589c0feb64a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structm__inode.html">m_inode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a> [<a class="el" href="src_2include_2linux_2fs_8h.html#af63c190de439b45378f43837de8a7c6a">NR_INODE</a>]</td></tr>
<tr class="separator:a9bf294a613d9b62d17a7b589c0feb64a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a0a8efe57313ad9d7359e5653ed901"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfile.html">file</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#ad8a0a8efe57313ad9d7359e5653ed901">file_table</a> [<a class="el" href="src_2include_2linux_2fs_8h.html#a13d1daac91a4ebfc4511bbe85d15d360">NR_FILE</a>]</td></tr>
<tr class="separator:ad8a0a8efe57313ad9d7359e5653ed901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a542357775bd1bb6453a5e9db9cae68eb"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsuper__block.html">super_block</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a542357775bd1bb6453a5e9db9cae68eb">super_block</a> [<a class="el" href="src_2include_2linux_2fs_8h.html#a9169276d1d6c029b1d8680def713d7e3">NR_SUPER</a>]</td></tr>
<tr class="separator:a542357775bd1bb6453a5e9db9cae68eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5809896ce36f9b7ddab0b41745cb0bc"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbuffer__head.html">buffer_head</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#aa5809896ce36f9b7ddab0b41745cb0bc">start_buffer</a></td></tr>
<tr class="separator:aa5809896ce36f9b7ddab0b41745cb0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b1e5796de57540927d03ee66f2baf28"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#a5b1e5796de57540927d03ee66f2baf28">nr_buffers</a></td></tr>
<tr class="separator:a5b1e5796de57540927d03ee66f2baf28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc981cc78759e83089d9809fd54d2d52"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2include_2linux_2fs_8h.html#adc981cc78759e83089d9809fd54d2d52">ROOT_DEV</a></td></tr>
<tr class="separator:adc981cc78759e83089d9809fd54d2d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad51ded0bbd705f02f73fc60c0b721ced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad51ded0bbd705f02f73fc60c0b721ced">&#9670;&nbsp;</a></span>BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLOCK_SIZE&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00049">49</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="ad334ac90d6d2da17043489d143adc16a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad334ac90d6d2da17043489d143adc16a">&#9670;&nbsp;</a></span>BLOCK_SIZE_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLOCK_SIZE_BITS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00050">50</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a72f4e7efb08138b5e2d8d3e9077a5403"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72f4e7efb08138b5e2d8d3e9077a5403">&#9670;&nbsp;</a></span>DIR_ENTRIES_PER_BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_ENTRIES_PER_BLOCK&#160;&#160;&#160;((<a class="el" href="src_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>)/(sizeof (struct <a class="el" href="structdir__entry.html">dir_entry</a>)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00056">56</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a71c7396c17b5b78323bd4dedbfd8e02a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71c7396c17b5b78323bd4dedbfd8e02a">&#9670;&nbsp;</a></span>I_MAP_SLOTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_MAP_SLOTS&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00039">39</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a4846395483a9eb36d95b65dc7b511226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4846395483a9eb36d95b65dc7b511226">&#9670;&nbsp;</a></span>INC_PIPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INC_PIPE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="src_2kernel_2blk__drv_2floppy_8c.html#a47f7e6109597e5c1c227993c0ce5f560">head</a></td><td>)</td>
          <td>&#160;&#160;&#160;__asm__(&quot;incl %0\n\tandl $4095,%0&quot;::&quot;m&quot; (head))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00063">63</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="af81febf73be8e6e63390123e26c81ce3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af81febf73be8e6e63390123e26c81ce3">&#9670;&nbsp;</a></span>INODES_PER_BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INODES_PER_BLOCK&#160;&#160;&#160;((<a class="el" href="src_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>)/(sizeof (struct <a class="el" href="structd__inode.html">d_inode</a>)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00055">55</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a5cefe23969abef17202a791bf96a7269"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cefe23969abef17202a791bf96a7269">&#9670;&nbsp;</a></span>IS_SEEKABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_SEEKABLE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="src_2kernel_2chr__drv_2console_8c.html#a3539f71fd772fb26bff625c8ec793564">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="src_2kernel_2chr__drv_2console_8c.html#a3539f71fd772fb26bff625c8ec793564">x</a>)&gt;=1 &amp;&amp; (<a class="el" href="src_2kernel_2chr__drv_2console_8c.html#a3539f71fd772fb26bff625c8ec793564">x</a>)&lt;=3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00024">24</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="ad46638abb143d7f2f6df36789c92f720"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad46638abb143d7f2f6df36789c92f720">&#9670;&nbsp;</a></span>MAJOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAJOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="src_2kernel_2sched_8c.html#a528b92115c4bb60d7b46de7e09ea0bae">a</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((unsigned)(<a class="el" href="src_2kernel_2sched_8c.html#a528b92115c4bb60d7b46de7e09ea0bae">a</a>))&gt;&gt;8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00033">33</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a90c981f077e8797694a25fb755de7d0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90c981f077e8797694a25fb755de7d0f">&#9670;&nbsp;</a></span>MINOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MINOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="src_2kernel_2sched_8c.html#a528b92115c4bb60d7b46de7e09ea0bae">a</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="src_2kernel_2sched_8c.html#a528b92115c4bb60d7b46de7e09ea0bae">a</a>)&amp;0xff)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00034">34</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a4853f6c25c8394fd57c4d99f61d5cd89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4853f6c25c8394fd57c4d99f61d5cd89">&#9670;&nbsp;</a></span>NAME_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NAME_LEN&#160;&#160;&#160;14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00036">36</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="aec98c1f9d6552a0ec3977299048ed4fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec98c1f9d6552a0ec3977299048ed4fc">&#9670;&nbsp;</a></span>NR_BUFFERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NR_BUFFERS&#160;&#160;&#160;<a class="el" href="src_2include_2linux_2fs_8h.html#a5b1e5796de57540927d03ee66f2baf28">nr_buffers</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00048">48</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a13d1daac91a4ebfc4511bbe85d15d360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13d1daac91a4ebfc4511bbe85d15d360">&#9670;&nbsp;</a></span>NR_FILE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NR_FILE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00045">45</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="af7274e20ec5c1695cfdae0c8c7bc0337"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7274e20ec5c1695cfdae0c8c7bc0337">&#9670;&nbsp;</a></span>NR_HASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NR_HASH&#160;&#160;&#160;307</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00047">47</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="af63c190de439b45378f43837de8a7c6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af63c190de439b45378f43837de8a7c6a">&#9670;&nbsp;</a></span>NR_INODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NR_INODE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00044">44</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a326ba885b33e0ac094fec455a1ec30b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a326ba885b33e0ac094fec455a1ec30b3">&#9670;&nbsp;</a></span>NR_OPEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NR_OPEN&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00043">43</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a9169276d1d6c029b1d8680def713d7e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9169276d1d6c029b1d8680def713d7e3">&#9670;&nbsp;</a></span>NR_SUPER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NR_SUPER&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00046">46</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a070d2ce7b6bb7e5c05602aa8c308d0c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a070d2ce7b6bb7e5c05602aa8c308d0c4">&#9670;&nbsp;</a></span>NULL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NULL&#160;&#160;&#160;((void *) 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00052">52</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="aa460d6f2b8cf2a121bfa29f22d90f19f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa460d6f2b8cf2a121bfa29f22d90f19f">&#9670;&nbsp;</a></span>PIPE_EMPTY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIPE_EMPTY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">inode</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="src_2include_2linux_2fs_8h.html#a02fb52db3368bef7f5dbcd349dd9a3b0">PIPE_HEAD</a>(inode)==<a class="el" href="src_2include_2linux_2fs_8h.html#a0f5ea8466512c3ae82260b4f1064fca3">PIPE_TAIL</a>(inode))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00061">61</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="ace0b0dd5f3ecf5d9e436fe7f5b4bbd7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0b0dd5f3ecf5d9e436fe7f5b4bbd7d">&#9670;&nbsp;</a></span>PIPE_FULL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIPE_FULL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">inode</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="src_2include_2linux_2fs_8h.html#aad891c9d4a6092e3051327d88b454f2e">PIPE_SIZE</a>(inode)==(<a class="el" href="src_2include_2linux_2mm_8h.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>-1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00062">62</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a02fb52db3368bef7f5dbcd349dd9a3b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02fb52db3368bef7f5dbcd349dd9a3b0">&#9670;&nbsp;</a></span>PIPE_HEAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIPE_HEAD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">inode</td><td>)</td>
          <td>&#160;&#160;&#160;((inode).i_zone[0])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00058">58</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="aad891c9d4a6092e3051327d88b454f2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad891c9d4a6092e3051327d88b454f2e">&#9670;&nbsp;</a></span>PIPE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIPE_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">inode</td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="src_2include_2linux_2fs_8h.html#a02fb52db3368bef7f5dbcd349dd9a3b0">PIPE_HEAD</a>(inode)-<a class="el" href="src_2include_2linux_2fs_8h.html#a0f5ea8466512c3ae82260b4f1064fca3">PIPE_TAIL</a>(inode))&amp;(<a class="el" href="src_2include_2linux_2mm_8h.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>-1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00060">60</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a0f5ea8466512c3ae82260b4f1064fca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f5ea8466512c3ae82260b4f1064fca3">&#9670;&nbsp;</a></span>PIPE_TAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIPE_TAIL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">inode</td><td>)</td>
          <td>&#160;&#160;&#160;((inode).i_zone[1])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00059">59</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="ada74e7db007a68e763f20c17f2985356"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada74e7db007a68e763f20c17f2985356">&#9670;&nbsp;</a></span>READ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00026">26</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="ab40fed6d82496844dbcc6bbe5756eb5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab40fed6d82496844dbcc6bbe5756eb5f">&#9670;&nbsp;</a></span>READA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READA&#160;&#160;&#160;2		/* <a class="el" href="src_2include_2unistd_8h.html#a4a25d8f1ec591ee5d0a0664fd8db103c">read</a>-ahead - don't <a class="el" href="src_2include_2unistd_8h.html#a0e8ee93247f9cef4fc7ba80bb04eca8d">pause</a> */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00028">28</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a53239041354f7e1c8d3bb1308876a6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53239041354f7e1c8d3bb1308876a6b9">&#9670;&nbsp;</a></span>ROOT_INO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROOT_INO&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00037">37</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a01d05bc7252657d774b34f4f6eddaabf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01d05bc7252657d774b34f4f6eddaabf">&#9670;&nbsp;</a></span>SUPER_MAGIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUPER_MAGIC&#160;&#160;&#160;0x137F</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00041">41</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="aa10f470e996d0f51210d24f442d25e1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa10f470e996d0f51210d24f442d25e1e">&#9670;&nbsp;</a></span>WRITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00027">27</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="a1f50f82769eeadd464464d064a537968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f50f82769eeadd464464d064a537968">&#9670;&nbsp;</a></span>WRITEA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITEA&#160;&#160;&#160;3	/* &quot;write-ahead&quot; - silly, but somewhat useful */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00029">29</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<a id="acb044b964b71068aba08b0c22fde4b4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb044b964b71068aba08b0c22fde4b4d">&#9670;&nbsp;</a></span>Z_MAP_SLOTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Z_MAP_SLOTS&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00040">40</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a56103a26c41f649cb610d70d480f5efb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56103a26c41f649cb610d70d480f5efb">&#9670;&nbsp;</a></span>buffer_block</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef char buffer_block[<a class="el" href="src_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2include_2linux_2fs_8h_source.html#l00066">66</a> of file <a class="el" href="src_2include_2linux_2fs_8h_source.html">fs.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a608309a4a886522767be4646f5c709cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a608309a4a886522767be4646f5c709cc">&#9670;&nbsp;</a></span>bmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bmap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00140">140</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html">inode.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26">_bmap</a>(inode,block,0);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2inode_8c_html_ad19b3562cfd0ced5718591d63d158b26"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26">_bmap</a></div><div class="ttdeci">static int _bmap(struct m_inode *inode, int block, int create)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00072">inode.c:72</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a608309a4a886522767be4646f5c709cc_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a608309a4a886522767be4646f5c709cc_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a608309a4a886522767be4646f5c709cc_cgraph" id="asrc_2include_2linux_2fs_8h_a608309a4a886522767be4646f5c709cc_cgraph">
<area shape="rect" title=" " alt="" coords="5,93,64,120"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="112,93,179,120"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="243,600,301,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="1071,296,1134,323"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1514,600,1571,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="227,144,317,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1208,473,1327,500"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="365,397,428,424"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="704,929,799,956"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1375,651,1454,677"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1641,955,1701,981"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1631,600,1712,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1760,955,1832,981"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1885,904,1957,931"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1880,955,1961,981"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1891,1005,1950,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1375,727,1455,753"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1503,727,1583,753"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="706,296,797,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="488,397,609,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="476,296,621,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="669,195,833,221"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="507,549,590,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="700,651,803,677"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1045,980,1160,1007"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1216,1005,1319,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1220,1107,1315,1133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1212,955,1323,981"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="881,651,997,677"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="890,600,989,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="1059,347,1146,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1057,701,1149,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="1049,651,1157,677"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="1209,419,1325,445"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a608309a4a886522767be4646f5c709cc_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a608309a4a886522767be4646f5c709cc_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a608309a4a886522767be4646f5c709cc_icgraph" id="asrc_2include_2linux_2fs_8h_a608309a4a886522767be4646f5c709cc_icgraph">
<area shape="rect" title=" " alt="" coords="856,360,915,387"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="708,284,808,311"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="572,183,660,209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="719,436,797,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="715,385,801,412"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="295,233,381,260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="583,385,649,412"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="307,284,369,311"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="151,563,225,589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,335,389,361"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,537,383,564"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,436,386,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="293,487,383,513"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="437,385,524,412"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="143,309,233,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="141,360,235,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="147,411,229,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="141,461,235,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="141,5,235,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="142,56,234,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="141,107,235,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="150,157,226,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="137,208,239,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="143,259,233,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="147,512,229,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,512,89,539"/>
</map>
</div>

</div>
</div>
<a id="ad78fac6715f3c28e0cf0522df36a111f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78fac6715f3c28e0cf0522df36a111f">&#9670;&nbsp;</a></span>bread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbuffer__head.html">buffer_head</a>* bread </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00264">264</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                              {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *bh;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (!(bh = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0">getblk</a>(dev, block)))</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;bread: getblk returned NULL\n&quot;</span>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a>)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">return</span> bh;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e">ll_rw_block</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ada74e7db007a68e763f20c17f2985356">READ</a>, bh);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a>(bh);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a>)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">return</span> bh;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7">brelse</a>(bh);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_a197cebc7bc8d67773a979e92c14b40c0"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0">getblk</a></div><div class="ttdeci">struct buffer_head * getblk(int dev, int block)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00205">buffer.c:205</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_a96f49dc697e8292e946ba7680ebecf96"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a></div><div class="ttdeci">static void wait_on_buffer(struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00041">buffer.c:41</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_ad15c8296a5599c15736bb9383050eec7"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7">brelse</a></div><div class="ttdeci">void brelse(struct buffer_head *buf)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00251">buffer.c:251</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00052">fs.h:52</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_ada74e7db007a68e763f20c17f2985356"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ada74e7db007a68e763f20c17f2985356">READ</a></div><div class="ttdeci">#define READ</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00026">fs.h:26</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_af9add4ad497e3b9eae67e2cbf7cea45e"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e">ll_rw_block</a></div><div class="ttdeci">void ll_rw_block(int rw, struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c_source.html#l00145">ll_rw_blk.c:145</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2kernel_8h_html_ab43c5eded9a063f60e583332eaa73258"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a></div><div class="ttdeci">volatile void panic(const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2panic_8c_source.html#l00018">panic.c:18</a></div></div>
<div class="ttc" id="astructbuffer__head_html"><div class="ttname"><a href="structbuffer__head.html">buffer_head</a></div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00068">fs.h:68</a></div></div>
<div class="ttc" id="astructbuffer__head_html_a7a168066dcdedf2f6b76fce2d1066000"><div class="ttname"><a href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">buffer_head::b_uptodate</a></div><div class="ttdeci">unsigned char b_uptodate</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00072">fs.h:72</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ad78fac6715f3c28e0cf0522df36a111f_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ad78fac6715f3c28e0cf0522df36a111f_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ad78fac6715f3c28e0cf0522df36a111f_cgraph" id="asrc_2include_2linux_2fs_8h_ad78fac6715f3c28e0cf0522df36a111f_cgraph">
<area shape="rect" title=" " alt="" coords="5,625,64,652"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="975,195,1037,221"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1577,220,1634,247"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1112,701,1231,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="112,625,175,652"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="959,600,1053,627"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1438,245,1517,272"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1704,347,1764,373"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1693,220,1775,247"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1823,347,1895,373"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1947,296,2019,323"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1943,347,2024,373"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1954,397,2013,424"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1437,600,1517,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1565,600,1645,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="453,752,543,779"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="235,701,356,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="223,549,368,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="416,207,580,233"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="254,600,337,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="447,499,549,525"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1114,600,1229,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1283,651,1385,677"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1287,600,1381,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1279,347,1389,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="628,499,744,525"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="637,347,735,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="817,195,875,221"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="803,448,889,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1125,397,1217,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="792,296,900,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="948,448,1064,475"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ad78fac6715f3c28e0cf0522df36a111f_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ad78fac6715f3c28e0cf0522df36a111f_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ad78fac6715f3c28e0cf0522df36a111f_icgraph" id="asrc_2include_2linux_2fs_8h_ad78fac6715f3c28e0cf0522df36a111f_icgraph">
<area shape="rect" title=" " alt="" coords="1387,785,1445,812"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="1258,703,1325,729"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="949,1348,1037,1375"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="953,627,1032,653"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="608,968,695,995"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="11,2083,101,2109"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="161,588,251,615"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="947,132,1039,159"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="308,411,395,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="951,520,1034,547"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="1102,344,1185,371"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="308,1981,395,2008"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="1254,344,1329,371"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#afe8b61fe00bf63ea72d91f7a1d1b6d09" title=" " alt="" coords="459,2032,529,2059"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="1244,1140,1339,1167"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="604,2133,699,2160"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="943,1297,1042,1324"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a608309a4a886522767be4646f5c709cc" title=" " alt="" coords="1114,703,1173,729"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a3704034fc57e100765395733a0a72321" title=" " alt="" coords="1091,463,1196,489"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="943,677,1043,704"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="163,1373,249,1400"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="461,1171,527,1197"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="175,1525,237,1552"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="19,968,93,995"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="155,309,257,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="158,867,254,893"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="161,1095,251,1121"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="308,1019,395,1045"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="9,1497,103,1524"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="15,1555,97,1581"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="9,1617,103,1644"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="9,1693,103,1720"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="10,1795,102,1821"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="9,1880,103,1907"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="18,1065,94,1092"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="5,1164,107,1191"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="11,1309,101,1336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="15,208,97,235"/>
<area shape="rect" href="src_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="776,107,879,133"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="790,157,865,184"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="783,5,872,32"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="779,56,875,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="955,259,1031,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="804,1196,851,1223"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="628,1424,675,1451"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="305,613,397,640"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="445,1981,543,2008"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="760,1297,895,1324"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="776,1348,879,1375"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a29c1dadaac141814cea5e34ce43d5c32" title=" " alt="" coords="591,1931,712,1957"/>
</map>
</div>

</div>
</div>
<a id="ab0577abbf099f812ecca45fce0601558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0577abbf099f812ecca45fce0601558">&#9670;&nbsp;</a></span>bread_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bread_page </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>b</em>[4]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00292">292</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                                          {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *bh[4];</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a>[i]) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">if</span> ((bh[i] = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0">getblk</a>(dev, <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a>[i])))</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="keywordflow">if</span> (!bh[i]-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a>)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                    <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e">ll_rw_block</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ada74e7db007a68e763f20c17f2985356">READ</a>, bh[i]);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            bh[i] = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++, address += <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span> (bh[i]) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a>(bh[i]);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">if</span> (bh[i]-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aa39311f77b0e38922c9864a23e499bfe">COPYBLK</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) bh[i]-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>, address);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7">brelse</a>(bh[i]);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_aa39311f77b0e38922c9864a23e499bfe"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#aa39311f77b0e38922c9864a23e499bfe">COPYBLK</a></div><div class="ttdeci">#define COPYBLK(from, to)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00279">buffer.c:279</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_ad51ded0bbd705f02f73fc60c0b721ced"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a></div><div class="ttdeci">#define BLOCK_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00049">fs.h:49</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a14c92240a8c7badaaa4e18952e560053"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a></div><div class="ttdeci">short b</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00071">sched.c:71</a></div></div>
<div class="ttc" id="astructbuffer__head_html_aa9e1a6e4f33e0d10c1d210b105212faf"><div class="ttname"><a href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">buffer_head::b_data</a></div><div class="ttdeci">char * b_data</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00069">fs.h:69</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ab0577abbf099f812ecca45fce0601558_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ab0577abbf099f812ecca45fce0601558_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ab0577abbf099f812ecca45fce0601558_cgraph" id="asrc_2include_2linux_2fs_8h_ab0577abbf099f812ecca45fce0601558_cgraph">
<area shape="rect" title=" " alt="" coords="5,169,104,196"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="1015,144,1077,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1152,321,1271,348"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="152,245,215,272"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="999,752,1093,779"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1617,296,1674,323"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1478,397,1557,424"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1744,803,1804,829"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1733,296,1815,323"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1863,803,1935,829"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1987,752,2059,779"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1983,803,2064,829"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1994,853,2053,880"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1477,575,1557,601"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1605,575,1685,601"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="493,245,583,272"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="275,296,396,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="263,397,408,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="456,43,620,69"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="294,347,377,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="487,397,589,424"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1154,752,1269,779"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1323,803,1425,829"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1327,651,1421,677"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1319,701,1429,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="668,524,784,551"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="677,397,775,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="857,245,915,272"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="843,549,929,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1165,499,1257,525"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="832,448,940,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="988,549,1104,576"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ab0577abbf099f812ecca45fce0601558_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ab0577abbf099f812ecca45fce0601558_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ab0577abbf099f812ecca45fce0601558_icgraph" id="asrc_2include_2linux_2fs_8h_ab0577abbf099f812ecca45fce0601558_icgraph">
<area shape="rect" title=" " alt="" coords="153,5,252,32"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="5,5,105,32"/>
</map>
</div>

</div>
</div>
<a id="aaa1febe84f18fa40d4923bb1c82d9ebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1febe84f18fa40d4923bb1c82d9ebc">&#9670;&nbsp;</a></span>breada()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbuffer__head.html">buffer_head</a>* breada </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00317">317</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                                    {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2stdarg_8h.html#abaefbc6cabb217bf0138d4f9c94d4775">va_list</a> args;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *bh, *tmp;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2stdarg_8h.html#a4a41ae753ad859126fe15c0e4655f400">va_start</a>(args, first);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (!(bh = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0">getblk</a>(dev, first)))</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;bread: getblk returned NULL\n&quot;</span>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (!bh-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a>)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e">ll_rw_block</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ada74e7db007a68e763f20c17f2985356">READ</a>, bh);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">while</span> ((first = <a class="code" href="flash_2Linux-0_811_2include_2stdarg_8h.html#a73bff2bd79d774417fcd63f973202dd3">va_arg</a>(args,<span class="keywordtype">int</span>))&gt;=0) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        tmp = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0">getblk</a>(dev, first);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">if</span> (tmp) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">if</span> (!tmp-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a>)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e">ll_rw_block</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ab40fed6d82496844dbcc6bbe5756eb5f">READA</a>, bh);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            tmp-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a>--;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2stdarg_8h.html#a89e547abd2927b21e5398404e68e7f94">va_end</a>(args);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a>(bh);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a>)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">return</span> bh;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7">brelse</a>(bh);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_ab40fed6d82496844dbcc6bbe5756eb5f"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ab40fed6d82496844dbcc6bbe5756eb5f">READA</a></div><div class="ttdeci">#define READA</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00028">fs.h:28</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2stdarg_8h_html_a4a41ae753ad859126fe15c0e4655f400"><div class="ttname"><a href="flash_2Linux-0_811_2include_2stdarg_8h.html#a4a41ae753ad859126fe15c0e4655f400">va_start</a></div><div class="ttdeci">#define va_start(AP, LASTARG)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2stdarg_8h_source.html#l00013">stdarg.h:13</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2stdarg_8h_html_a73bff2bd79d774417fcd63f973202dd3"><div class="ttname"><a href="flash_2Linux-0_811_2include_2stdarg_8h.html#a73bff2bd79d774417fcd63f973202dd3">va_arg</a></div><div class="ttdeci">#define va_arg(AP, TYPE)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2stdarg_8h_source.html#l00024">stdarg.h:24</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2stdarg_8h_html_a89e547abd2927b21e5398404e68e7f94"><div class="ttname"><a href="flash_2Linux-0_811_2include_2stdarg_8h.html#a89e547abd2927b21e5398404e68e7f94">va_end</a></div><div class="ttdeci">#define va_end(AP)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2stdarg_8h_source.html#l00022">stdarg.h:22</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2stdarg_8h_html_abaefbc6cabb217bf0138d4f9c94d4775"><div class="ttname"><a href="flash_2Linux-0_811_2include_2stdarg_8h.html#abaefbc6cabb217bf0138d4f9c94d4775">va_list</a></div><div class="ttdeci">char * va_list</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2stdarg_8h_source.html#l00004">stdarg.h:4</a></div></div>
<div class="ttc" id="astructbuffer__head_html_a8cf19a3dd55cd77c824a4dd0ffe7431d"><div class="ttname"><a href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">buffer_head::b_count</a></div><div class="ttdeci">unsigned char b_count</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00074">fs.h:74</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_aaa1febe84f18fa40d4923bb1c82d9ebc_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_aaa1febe84f18fa40d4923bb1c82d9ebc_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_aaa1febe84f18fa40d4923bb1c82d9ebc_cgraph" id="asrc_2include_2linux_2fs_8h_aaa1febe84f18fa40d4923bb1c82d9ebc_cgraph">
<area shape="rect" title=" " alt="" coords="5,625,72,652"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="983,195,1045,221"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1585,220,1642,247"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1120,701,1239,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="120,625,183,652"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="967,600,1061,627"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1446,245,1525,272"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1712,347,1772,373"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1701,220,1783,247"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1831,347,1903,373"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1955,296,2027,323"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1951,347,2032,373"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1962,397,2021,424"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1445,600,1525,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1573,600,1653,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="461,752,551,779"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="243,701,364,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="231,549,376,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="424,207,588,233"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="262,600,345,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="455,499,557,525"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1122,600,1237,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1291,651,1393,677"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1295,600,1389,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1287,347,1397,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="636,499,752,525"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="645,347,743,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="825,195,883,221"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="811,448,897,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1133,397,1225,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="800,296,908,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="956,448,1072,475"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_aaa1febe84f18fa40d4923bb1c82d9ebc_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_aaa1febe84f18fa40d4923bb1c82d9ebc_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_aaa1febe84f18fa40d4923bb1c82d9ebc_icgraph" id="asrc_2include_2linux_2fs_8h_aaa1febe84f18fa40d4923bb1c82d9ebc_icgraph">
<area shape="rect" title=" " alt="" coords="285,56,352,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#aaaa32bea7c458e274286421ec9c6266f" title=" " alt="" coords="142,5,235,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#a9af8af96c24b2aee5f949b116decfd02" title=" " alt="" coords="140,56,237,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#afe8b61fe00bf63ea72d91f7a1d1b6d09" title=" " alt="" coords="153,107,224,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="5,107,92,133"/>
</map>
</div>

</div>
</div>
<a id="ad15c8296a5599c15736bb9383050eec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad15c8296a5599c15736bb9383050eec7">&#9670;&nbsp;</a></span>brelse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void brelse </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbuffer__head.html">buffer_head</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00251">251</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                     {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flash_2Linux-0_811_2kernel_2printk_8c.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a>)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a>(<a class="code" href="flash_2Linux-0_811_2kernel_2printk_8c.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="flash_2Linux-0_811_2kernel_2printk_8c.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a>-&gt;b_count--))</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;Trying to free free buffer&quot;</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4">wake_up</a>(&amp;<a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a155818a3787ba8f8bbc578b6014c5078">buffer_wait</a>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_a155818a3787ba8f8bbc578b6014c5078"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#a155818a3787ba8f8bbc578b6014c5078">buffer_wait</a></div><div class="ttdeci">static struct task_struct * buffer_wait</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00038">buffer.c:38</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_add6d90b147b8d600062919f0220600f4"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4">wake_up</a></div><div class="ttdeci">void wake_up(struct task_struct **p)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00188">sched.c:188</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2printk_8c_html_ac75fce8692fd1d41a8985f6aacc4a175"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2printk_8c.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a></div><div class="ttdeci">static char buf[1024]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2printk_8c_source.html#l00017">printk.c:17</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ad15c8296a5599c15736bb9383050eec7_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ad15c8296a5599c15736bb9383050eec7_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ad15c8296a5599c15736bb9383050eec7_cgraph" id="asrc_2include_2linux_2fs_8h_ad15c8296a5599c15736bb9383050eec7_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,68,159"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="422,81,479,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="116,132,235,159"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="136,183,215,209"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="549,56,609,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="539,107,620,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="668,56,740,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="793,5,865,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="788,56,869,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="799,107,858,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="283,132,363,159"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="411,132,491,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ad15c8296a5599c15736bb9383050eec7_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ad15c8296a5599c15736bb9383050eec7_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ad15c8296a5599c15736bb9383050eec7_icgraph" id="asrc_2include_2linux_2fs_8h_ad15c8296a5599c15736bb9383050eec7_icgraph">
<area shape="rect" title=" " alt="" coords="1177,1005,1240,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="908,600,975,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="597,284,685,311"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="163,220,249,247"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="601,549,680,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="597,448,684,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="458,347,525,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="175,651,237,677"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="11,1613,101,1640"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="19,448,93,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="155,752,257,779"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="161,1107,251,1133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="158,397,254,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="161,144,251,171"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="595,1005,687,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="305,752,392,779"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="599,701,682,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#aaaa32bea7c458e274286421ec9c6266f" title=" " alt="" coords="895,1943,988,1969"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#a9af8af96c24b2aee5f949b116decfd02" title=" " alt="" coords="893,1993,990,2020"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="1055,1107,1113,1133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="750,1259,833,1285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="904,1309,979,1336"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#afe8b61fe00bf63ea72d91f7a1d1b6d09" title=" " alt="" coords="906,1867,977,1893"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="748,1816,835,1843"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="894,1664,989,1691"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="894,1613,989,1640"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="892,1715,991,1741"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7bcdedc1f5ba7597461c3a49559e5b12" title=" " alt="" coords="742,347,841,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a1b310db1dc1e28275c0888c724d48724" title=" " alt="" coords="1051,1917,1117,1944"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="1039,1360,1129,1387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="1039,701,1129,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7d20b074bcbc61719507a1f8e55b0606" title=" " alt="" coords="305,2005,392,2032"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a608309a4a886522767be4646f5c709cc" title=" " alt="" coords="762,397,821,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a3704034fc57e100765395733a0a72321" title=" " alt="" coords="739,853,844,880"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="591,360,691,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="305,347,392,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="9,600,103,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="15,651,97,677"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="9,701,103,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="9,752,103,779"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="10,803,102,829"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="9,1208,103,1235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="18,499,94,525"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="5,1740,107,1767"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="11,549,101,576"/>
<area shape="rect" href="src_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="440,904,543,931"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="454,955,529,981"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="447,1005,536,1032"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="443,1056,539,1083"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="603,1284,679,1311"/>
</map>
</div>

</div>
</div>
<a id="a008e777b9e9f7711d783bf16505bd714"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a008e777b9e9f7711d783bf16505bd714">&#9670;&nbsp;</a></span>buffer_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buffer_init </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>buffer_end</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00342">342</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                  {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *h = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aa5809896ce36f9b7ddab0b41745cb0bc">start_buffer</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (buffer_end == 1 &lt;&lt; 20)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a> = (<span class="keywordtype">void</span> *) (640 * 1024);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a> = (<span class="keywordtype">void</span> *) buffer_end;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">while</span> ((<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a> -= <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>) &gt;= ((<span class="keywordtype">void</span> *) (h + 1))) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">b_dev</a> = 0;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a> = 0;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a> = 0;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#ac2434aca88580d0449531386ec4cf738">b_lock</a> = 0;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a> = 0;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#ad5a9a01df9bd2694e22988e0f4d2fc74">b_wait</a> = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#aa6f4deded16fae895acf09e3c5743f61">b_next</a> = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#aedd9d11610254d19c9059b1dbb38a0ae">b_prev</a> = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a> = (<span class="keywordtype">char</span> *) <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#a90bdd18c82c8f9e4df98dd9decce2e33">b_prev_free</a> = h - 1;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        h-&gt;<a class="code" href="structbuffer__head.html#a04cffb53086438267e6bf58b85f4b0c6">b_next_free</a> = h + 1;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        h++;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ab3fe530a64b0717f7a43e2e693e5137f">NR_BUFFERS</a>++;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a> == (<span class="keywordtype">void</span> *) 0x100000)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a> = (<span class="keywordtype">void</span> *) 0xA0000;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    h--;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aef8235d6e36e5dc84b71c81d0dd3ba4c">free_list</a> = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aa5809896ce36f9b7ddab0b41745cb0bc">start_buffer</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aef8235d6e36e5dc84b71c81d0dd3ba4c">free_list</a>-&gt;<a class="code" href="structbuffer__head.html#a90bdd18c82c8f9e4df98dd9decce2e33">b_prev_free</a> = h;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    h-&gt;<a class="code" href="structbuffer__head.html#a04cffb53086438267e6bf58b85f4b0c6">b_next_free</a> = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aef8235d6e36e5dc84b71c81d0dd3ba4c">free_list</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af7274e20ec5c1695cfdae0c8c7bc0337">NR_HASH</a>; i++)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a16026aabc8151209ad2b1618388b28d5">hash_table</a>[i] = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}   </div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_a16026aabc8151209ad2b1618388b28d5"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#a16026aabc8151209ad2b1618388b28d5">hash_table</a></div><div class="ttdeci">struct buffer_head * hash_table[NR_HASH]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00036">buffer.c:36</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_aa5809896ce36f9b7ddab0b41745cb0bc"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#aa5809896ce36f9b7ddab0b41745cb0bc">start_buffer</a></div><div class="ttdeci">struct buffer_head * start_buffer</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00035">buffer.c:35</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_ab3fe530a64b0717f7a43e2e693e5137f"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#ab3fe530a64b0717f7a43e2e693e5137f">NR_BUFFERS</a></div><div class="ttdeci">int NR_BUFFERS</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00039">buffer.c:39</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_aef8235d6e36e5dc84b71c81d0dd3ba4c"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#aef8235d6e36e5dc84b71c81d0dd3ba4c">free_list</a></div><div class="ttdeci">static struct buffer_head * free_list</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00037">buffer.c:37</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_af7274e20ec5c1695cfdae0c8c7bc0337"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af7274e20ec5c1695cfdae0c8c7bc0337">NR_HASH</a></div><div class="ttdeci">#define NR_HASH</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00047">fs.h:47</a></div></div>
<div class="ttc" id="astructbuffer__head_html_a04cffb53086438267e6bf58b85f4b0c6"><div class="ttname"><a href="structbuffer__head.html#a04cffb53086438267e6bf58b85f4b0c6">buffer_head::b_next_free</a></div><div class="ttdeci">struct buffer_head * b_next_free</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00080">fs.h:80</a></div></div>
<div class="ttc" id="astructbuffer__head_html_a664b05692473520f849dfc5a1e6bc640"><div class="ttname"><a href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">buffer_head::b_dev</a></div><div class="ttdeci">unsigned short b_dev</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00071">fs.h:71</a></div></div>
<div class="ttc" id="astructbuffer__head_html_a90bdd18c82c8f9e4df98dd9decce2e33"><div class="ttname"><a href="structbuffer__head.html#a90bdd18c82c8f9e4df98dd9decce2e33">buffer_head::b_prev_free</a></div><div class="ttdeci">struct buffer_head * b_prev_free</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00079">fs.h:79</a></div></div>
<div class="ttc" id="astructbuffer__head_html_aa6f4deded16fae895acf09e3c5743f61"><div class="ttname"><a href="structbuffer__head.html#aa6f4deded16fae895acf09e3c5743f61">buffer_head::b_next</a></div><div class="ttdeci">struct buffer_head * b_next</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00078">fs.h:78</a></div></div>
<div class="ttc" id="astructbuffer__head_html_aba4009cce5de431452c211d36081273b"><div class="ttname"><a href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">buffer_head::b_dirt</a></div><div class="ttdeci">unsigned char b_dirt</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00073">fs.h:73</a></div></div>
<div class="ttc" id="astructbuffer__head_html_ac2434aca88580d0449531386ec4cf738"><div class="ttname"><a href="structbuffer__head.html#ac2434aca88580d0449531386ec4cf738">buffer_head::b_lock</a></div><div class="ttdeci">unsigned char b_lock</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00075">fs.h:75</a></div></div>
<div class="ttc" id="astructbuffer__head_html_ad5a9a01df9bd2694e22988e0f4d2fc74"><div class="ttname"><a href="structbuffer__head.html#ad5a9a01df9bd2694e22988e0f4d2fc74">buffer_head::b_wait</a></div><div class="ttdeci">struct task_struct * b_wait</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00076">fs.h:76</a></div></div>
<div class="ttc" id="astructbuffer__head_html_aedd9d11610254d19c9059b1dbb38a0ae"><div class="ttname"><a href="structbuffer__head.html#aedd9d11610254d19c9059b1dbb38a0ae">buffer_head::b_prev</a></div><div class="ttdeci">struct buffer_head * b_prev</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00077">fs.h:77</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a008e777b9e9f7711d783bf16505bd714_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a008e777b9e9f7711d783bf16505bd714_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a008e777b9e9f7711d783bf16505bd714_icgraph" id="asrc_2include_2linux_2fs_8h_a008e777b9e9f7711d783bf16505bd714_icgraph">
<area shape="rect" title=" " alt="" coords="557,31,645,57"/>
<area shape="rect" href="src_2init_2main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667" title=" " alt="" coords="455,5,509,32"/>
<area shape="rect" href="flash_2Linux-0_811_2init_2main_8c.html#aedc96a40e844bc2efc8bbef1b0782702" title=" " alt="" coords="456,56,508,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#abe7ed9cd5a2bab0543d1ec98126b1b2c" title=" " alt="" coords="334,5,385,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#a377e8516180829f477606c9e971eade8" title=" " alt="" coords="331,56,387,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#afc318b86ebf9e88f5af7ca7077098a7f" title=" " alt="" coords="312,284,407,311"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2tty_8h.html#a1426c68492789f611d285f530c7ff19d" title=" " alt="" coords="171,5,257,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#ae9bbfad9a19a302b82cf82046bbb524e" title=" " alt="" coords="179,56,249,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2signal_8c.html#a06c58d4276ef5e9e8c96309b3b635613" title=" " alt="" coords="172,107,256,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2tty__ioctl_8c.html#a329f7cc69ddf54c9ed0b15bd39ce33d8" title=" " alt="" coords="167,157,261,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2ioctl_8c.html#a709d61416c8ec6675ca795d62495a3ae" title=" " alt="" coords="23,208,98,235"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2tty__ioctl_8c.html#a3999b4bae89c857b1742c230d023b7c0" title=" " alt="" coords="164,259,264,285"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2signal_8c.html#a4ac17838628ac8773a5c99d8293d7c0d" title=" " alt="" coords="174,309,254,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2read__write_8c.html#a8ace77218f609b6282577c9cb3a8cac5" title=" " alt="" coords="174,360,254,387"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sys_8c.html#a944189ed10ed5a3ba57f0fbd09f5e79b" title=" " alt="" coords="173,411,255,437"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sys_8c.html#ab12535d66aaba5404b7101d381a43b36" title=" " alt="" coords="170,461,258,488"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sys_8c.html#a45548e3c78799983a4fd25f7d50094c3" title=" " alt="" coords="166,512,262,539"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a69163056b363c343e0467605762db26c" title=" " alt="" coords="165,563,263,589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a116c0c99bed8d1246fe4ad85421b14c5" title=" " alt="" coords="20,31,101,57"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="23,81,99,108"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2signal_8c.html#ad631f34ef5e519a7bc9232a66aa43fbc" title=" " alt="" coords="5,309,116,336"/>
</map>
</div>

</div>
</div>
<a id="a53eefc9fcd3ae0cc20ec6eeea2dd6d44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53eefc9fcd3ae0cc20ec6eeea2dd6d44">&#9670;&nbsp;</a></span>check_disk_change()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check_disk_change </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00116">116</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ad46638abb143d7f2f6df36789c92f720">MAJOR</a>(dev) != 2)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#abe1936a56cbf6ac4fb9d685078f38e9c">floppy_change</a>(dev &amp; 0x03))</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a9169276d1d6c029b1d8680def713d7e3">NR_SUPER</a>; i++)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structsuper__block.html">super_block</a>[i].s_dev == dev)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7d20b074bcbc61719507a1f8e55b0606">put_super</a>(<a class="code" href="structsuper__block.html">super_block</a>[i].s_dev);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aaab8557dc3b2ebf624bb29642d0753c6">invalidate_inodes</a>(dev);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#acea2962102f7d035a1778ac7ca18c538">invalidate_buffers</a>(dev);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_a7d20b074bcbc61719507a1f8e55b0606"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7d20b074bcbc61719507a1f8e55b0606">put_super</a></div><div class="ttdeci">void put_super(int)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00074">super.c:74</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_aaab8557dc3b2ebf624bb29642d0753c6"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#aaab8557dc3b2ebf624bb29642d0753c6">invalidate_inodes</a></div><div class="ttdeci">void invalidate_inodes(int)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00043">inode.c:43</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_acea2962102f7d035a1778ac7ca18c538"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#acea2962102f7d035a1778ac7ca18c538">invalidate_buffers</a></div><div class="ttdeci">void invalidate_buffers(int dev)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00088">buffer.c:88</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_a9169276d1d6c029b1d8680def713d7e3"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a9169276d1d6c029b1d8680def713d7e3">NR_SUPER</a></div><div class="ttdeci">#define NR_SUPER</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00046">fs.h:46</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_abe1936a56cbf6ac4fb9d685078f38e9c"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#abe1936a56cbf6ac4fb9d685078f38e9c">floppy_change</a></div><div class="ttdeci">int floppy_change(unsigned int nr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_source.html#l00139">floppy.c:139</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_ad46638abb143d7f2f6df36789c92f720"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ad46638abb143d7f2f6df36789c92f720">MAJOR</a></div><div class="ttdeci">#define MAJOR(a)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00033">fs.h:33</a></div></div>
<div class="ttc" id="astructsuper__block_html"><div class="ttname"><a href="structsuper__block.html">super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00124">fs.h:124</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a53eefc9fcd3ae0cc20ec6eeea2dd6d44_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a53eefc9fcd3ae0cc20ec6eeea2dd6d44_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a53eefc9fcd3ae0cc20ec6eeea2dd6d44_cgraph" id="asrc_2include_2linux_2fs_8h_a53eefc9fcd3ae0cc20ec6eeea2dd6d44_cgraph">
<area shape="rect" title=" " alt="" coords="5,258,153,284"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#abe1936a56cbf6ac4fb9d685078f38e9c" title=" " alt="" coords="575,403,691,430"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#acea2962102f7d035a1778ac7ca18c538" title=" " alt="" coords="201,207,340,234"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aaab8557dc3b2ebf624bb29642d0753c6" title=" " alt="" coords="388,302,525,328"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7d20b074bcbc61719507a1f8e55b0606" title=" " alt="" coords="227,144,314,171"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#ab619972c908f2f1646202e72ab69ddae" title=" " alt="" coords="780,403,867,430"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a3b9c3c3f694cbf682e4eb7724a9e6230" title=" " alt="" coords="781,454,866,480"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a1e7f1f0c2e37cb25f642125fb32ffcec" title=" " alt="" coords="740,276,907,303"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="986,428,1066,455"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#abc0dfac0621c67bb6a1faf733bbe82f5" title=" " alt="" coords="955,479,1097,506"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="997,226,1055,252"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="986,276,1066,303"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1156,251,1216,278"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1145,200,1227,227"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1275,251,1347,278"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1399,200,1471,227"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1395,251,1476,278"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1406,302,1465,328"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="573,200,692,227"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="783,226,863,252"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="575,302,691,328"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="425,99,488,126"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a1f4011b4e7734262f636282bc641139c" title=" " alt="" coords="411,48,502,75"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="413,251,500,278"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a3f4f567cec35d4d407a20030574e7024" title=" " alt="" coords="411,150,503,176"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="593,48,672,75"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="575,251,691,278"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a53eefc9fcd3ae0cc20ec6eeea2dd6d44_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a53eefc9fcd3ae0cc20ec6eeea2dd6d44_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a53eefc9fcd3ae0cc20ec6eeea2dd6d44_icgraph" id="asrc_2include_2linux_2fs_8h_a53eefc9fcd3ae0cc20ec6eeea2dd6d44_icgraph">
<area shape="rect" title=" " alt="" coords="428,81,576,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="285,56,380,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="291,107,374,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="140,5,237,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="142,56,235,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="5,5,92,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="147,107,231,133"/>
</map>
</div>

</div>
</div>
<a id="a3704034fc57e100765395733a0a72321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3704034fc57e100765395733a0a72321">&#9670;&nbsp;</a></span>create_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int create_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00145">145</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html">inode.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26">_bmap</a>(inode,block,1);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a3704034fc57e100765395733a0a72321_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a3704034fc57e100765395733a0a72321_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a3704034fc57e100765395733a0a72321_cgraph" id="asrc_2include_2linux_2fs_8h_a3704034fc57e100765395733a0a72321_cgraph">
<area shape="rect" title=" " alt="" coords="5,93,111,120"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="159,93,225,120"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="289,600,348,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="1118,296,1181,323"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1561,600,1618,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="273,144,364,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1255,473,1373,500"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="412,397,475,424"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="751,929,845,956"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1422,651,1501,677"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1688,955,1748,981"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1677,600,1759,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1807,955,1879,981"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1931,904,2003,931"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1927,955,2008,981"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1938,1005,1997,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1421,727,1501,753"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1549,727,1629,753"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="753,296,843,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="535,397,656,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="523,296,668,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="716,195,880,221"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="554,549,637,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="747,651,849,677"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1092,980,1207,1007"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1263,1005,1365,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1267,1107,1361,1133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1259,955,1369,981"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="928,651,1044,677"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="937,600,1035,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="1106,347,1193,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1103,701,1195,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="1095,651,1203,677"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="1256,419,1372,445"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a3704034fc57e100765395733a0a72321_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a3704034fc57e100765395733a0a72321_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a3704034fc57e100765395733a0a72321_icgraph" id="asrc_2include_2linux_2fs_8h_a3704034fc57e100765395733a0a72321_icgraph">
<area shape="rect" title=" " alt="" coords="559,259,664,285"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="419,107,511,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="421,259,508,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="423,309,506,336"/>
<area shape="rect" href="src_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="268,5,371,32"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="282,56,357,83"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="275,107,364,133"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="271,157,367,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="268,208,371,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="282,259,357,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="275,309,364,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="271,360,367,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="137,208,220,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,208,89,235"/>
</map>
</div>

</div>
</div>
<a id="abe1936a56cbf6ac4fb9d685078f38e9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe1936a56cbf6ac4fb9d685078f38e9c">&#9670;&nbsp;</a></span>floppy_change()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int floppy_change </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_source.html#l00139">139</a> of file <a class="el" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_source.html">floppy.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;repeat:</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a3b9c3c3f694cbf682e4eb7724a9e6230">floppy_on</a>(nr);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">while</span> ((<a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a> &amp; 3) != nr &amp;&amp; <a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a4c0237fdbba78af703ee275cc492a8b1">selected</a>)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a1e7f1f0c2e37cb25f642125fb32ffcec">interruptible_sleep_on</a>(&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#ad9142e4f797cd9773724e3e3c88c8d54">wait_on_floppy_select</a>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a> &amp; 3) != nr)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">goto</span> repeat;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#ad6488a48837d179b1833e2f48dac9665">inb</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a1d234974f371d76900594c7c323d9a1c">FD_DIR</a>) &amp; 0x80) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#ab619972c908f2f1646202e72ab69ddae">floppy_off</a>(nr);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#ab619972c908f2f1646202e72ab69ddae">floppy_off</a>(nr);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2io_8h_html_ad6488a48837d179b1833e2f48dac9665"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2io_8h.html#ad6488a48837d179b1833e2f48dac9665">inb</a></div><div class="ttdeci">#define inb(port)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2io_8h_source.html#l00005">io.h:5</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fdreg_8h_html_a1d234974f371d76900594c7c323d9a1c"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a1d234974f371d76900594c7c323d9a1c">FD_DIR</a></div><div class="ttdeci">#define FD_DIR</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fdreg_8h_source.html#l00019">fdreg.h:19</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fdreg_8h_html_a3b9c3c3f694cbf682e4eb7724a9e6230"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a3b9c3c3f694cbf682e4eb7724a9e6230">floppy_on</a></div><div class="ttdeci">void floppy_on(unsigned int nr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00232">sched.c:232</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fdreg_8h_html_ab619972c908f2f1646202e72ab69ddae"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#ab619972c908f2f1646202e72ab69ddae">floppy_off</a></div><div class="ttdeci">void floppy_off(unsigned int nr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00240">sched.c:240</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a1e7f1f0c2e37cb25f642125fb32ffcec"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a1e7f1f0c2e37cb25f642125fb32ffcec">interruptible_sleep_on</a></div><div class="ttdeci">void interruptible_sleep_on(struct task_struct **p)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00167">sched.c:167</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_html_a4c0237fdbba78af703ee275cc492a8b1"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a4c0237fdbba78af703ee275cc492a8b1">selected</a></div><div class="ttdeci">unsigned char selected</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_source.html#l00122">floppy.c:122</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_html_a581bf75201a0c19048387d483845bdb5"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a></div><div class="ttdeci">unsigned char current_DOR</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00204">sched.c:204</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_html_ad9142e4f797cd9773724e3e3c88c8d54"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#ad9142e4f797cd9773724e3e3c88c8d54">wait_on_floppy_select</a></div><div class="ttdeci">struct task_struct * wait_on_floppy_select</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_source.html#l00123">floppy.c:123</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_abe1936a56cbf6ac4fb9d685078f38e9c_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_abe1936a56cbf6ac4fb9d685078f38e9c_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_abe1936a56cbf6ac4fb9d685078f38e9c_cgraph" id="asrc_2include_2linux_2fs_8h_abe1936a56cbf6ac4fb9d685078f38e9c_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,121,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#ab619972c908f2f1646202e72ab69ddae" title=" " alt="" coords="209,5,296,32"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a3b9c3c3f694cbf682e4eb7724a9e6230" title=" " alt="" coords="210,56,295,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a1e7f1f0c2e37cb25f642125fb32ffcec" title=" " alt="" coords="169,107,336,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="415,5,495,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#abc0dfac0621c67bb6a1faf733bbe82f5" title=" " alt="" coords="384,56,527,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="427,107,484,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="415,157,495,184"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="585,81,645,108"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="575,132,656,159"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="704,81,776,108"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="829,31,901,57"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="824,81,905,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="835,132,894,159"/>
</map>
</div>

</div>
</div>
<a id="ab57fae9ebfff5eaf081923d3753f0dbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab57fae9ebfff5eaf081923d3753f0dbc">&#9670;&nbsp;</a></span>floppy_off()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void floppy_off </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00240">240</a> of file <a class="el" href="flash_2Linux-0_811_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ab218c7c6e6e256c43506e0c421328851">moff_timer</a>[nr]=3*<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a8489802eaedf42fdb5f2ce1708eaffa2"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a></div><div class="ttdeci">#define HZ</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00005">sched.h:5</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_ab218c7c6e6e256c43506e0c421328851"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#ab218c7c6e6e256c43506e0c421328851">moff_timer</a></div><div class="ttdeci">static int moff_timer[4]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00203">sched.c:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b4212726bcaddfc91dcc759dc44ab38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b4212726bcaddfc91dcc759dc44ab38">&#9670;&nbsp;</a></span>floppy_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void floppy_on </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00232">232</a> of file <a class="el" href="flash_2Linux-0_811_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a68c330e94fe121eba993e5a5973c3162">cli</a>();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#abc0dfac0621c67bb6a1faf733bbe82f5">ticks_to_floppy_on</a>(nr))</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a8ee0eea1a206d256d223fd33292ddb5d">sleep_on</a>(nr+<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a7acd8ec210022a3ca399b5ee9e6d05f6">wait_motor</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#ac5d15f274bc9b1e96230f3d3c60fd1f8">sti</a>();</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_a68c330e94fe121eba993e5a5973c3162"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a68c330e94fe121eba993e5a5973c3162">cli</a></div><div class="ttdeci">#define cli()</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00017">system.h:17</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_ac5d15f274bc9b1e96230f3d3c60fd1f8"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#ac5d15f274bc9b1e96230f3d3c60fd1f8">sti</a></div><div class="ttdeci">#define sti()</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00016">system.h:16</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a7acd8ec210022a3ca399b5ee9e6d05f6"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a7acd8ec210022a3ca399b5ee9e6d05f6">wait_motor</a></div><div class="ttdeci">static struct task_struct * wait_motor[4]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00201">sched.c:201</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a8ee0eea1a206d256d223fd33292ddb5d"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a8ee0eea1a206d256d223fd33292ddb5d">sleep_on</a></div><div class="ttdeci">void sleep_on(struct task_struct **p)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00151">sched.c:151</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_abc0dfac0621c67bb6a1faf733bbe82f5"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#abc0dfac0621c67bb6a1faf733bbe82f5">ticks_to_floppy_on</a></div><div class="ttdeci">int ticks_to_floppy_on(unsigned int nr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00206">sched.c:206</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a9b4212726bcaddfc91dcc759dc44ab38_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a9b4212726bcaddfc91dcc759dc44ab38_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a9b4212726bcaddfc91dcc759dc44ab38_cgraph" id="asrc_2include_2linux_2fs_8h_a9b4212726bcaddfc91dcc759dc44ab38_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,91,57"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="170,5,250,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#abc0dfac0621c67bb6a1faf733bbe82f5" title=" " alt="" coords="139,56,281,83"/>
</map>
</div>

</div>
</div>
<a id="abdd0da83359d6f16a52320c44c41c526"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd0da83359d6f16a52320c44c41c526">&#9670;&nbsp;</a></span>free_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_block </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00047">47</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html">bitmap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                    {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *sb;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *bh;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">if</span> (!(sb = <a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba">get_super</a>(dev)))</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;trying to free block on nonexistent device&quot;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (block &lt; sb-&gt;s_firstdatazone || block &gt;= sb-&gt;<a class="code" href="structsuper__block.html#af1eaf15b83b7ff78caa744a06d886df1">s_nzones</a>)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;trying to free block not in datazone&quot;</span>);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    bh = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9">get_hash_table</a>(dev, block);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (bh) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a> != 1) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;trying to free block (%04x:%d), count=%d\n&quot;</span>,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                   dev, block, bh-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a> = 0;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        bh-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a> = 0;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7">brelse</a>(bh);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    block -= sb-&gt;<a class="code" href="structsuper__block.html#a9858823313b4f27a8e7b812430ea207f">s_firstdatazone</a> - 1;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a1672a87d9d374137e03703199af7fb94">clear_bit</a>(block &amp; 8191, sb-&gt;<a class="code" href="structsuper__block.html#afc1b80e3027ce66241e90e87f591461c">s_zmap</a>[block / 8192]-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>)) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;block (%04x:%d) &quot;</span>, dev, block + sb-&gt;<a class="code" href="structsuper__block.html#a9858823313b4f27a8e7b812430ea207f">s_firstdatazone</a> - 1);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;free_block: bit already cleared&quot;</span>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    sb-&gt;<a class="code" href="structsuper__block.html#afc1b80e3027ce66241e90e87f591461c">s_zmap</a>[block / 8192]-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a> = 1;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2bitmap_8c_html_a1672a87d9d374137e03703199af7fb94"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a1672a87d9d374137e03703199af7fb94">clear_bit</a></div><div class="ttdeci">#define clear_bit(nr, addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00025">bitmap.c:25</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_a26c3be9640a543377e6c6f8d189c83e9"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9">get_hash_table</a></div><div class="ttdeci">struct buffer_head * get_hash_table(int dev, int block)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00182">buffer.c:182</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2super_8c_html_a43f836df13a239d2197028d56018edba"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba">get_super</a></div><div class="ttdeci">struct super_block * get_super(int dev)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00056">super.c:56</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2kernel_8h_html_a929c48d2c61fe71be34a9cdf0ab04fcc"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a></div><div class="ttdeci">int printk(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2printk_8c_source.html#l00021">printk.c:21</a></div></div>
<div class="ttc" id="astructsuper__block_html_a9858823313b4f27a8e7b812430ea207f"><div class="ttname"><a href="structsuper__block.html#a9858823313b4f27a8e7b812430ea207f">super_block::s_firstdatazone</a></div><div class="ttdeci">unsigned short s_firstdatazone</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00129">fs.h:129</a></div></div>
<div class="ttc" id="astructsuper__block_html_af1eaf15b83b7ff78caa744a06d886df1"><div class="ttname"><a href="structsuper__block.html#af1eaf15b83b7ff78caa744a06d886df1">super_block::s_nzones</a></div><div class="ttdeci">unsigned short s_nzones</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00126">fs.h:126</a></div></div>
<div class="ttc" id="astructsuper__block_html_afc1b80e3027ce66241e90e87f591461c"><div class="ttname"><a href="structsuper__block.html#afc1b80e3027ce66241e90e87f591461c">super_block::s_zmap</a></div><div class="ttdeci">struct buffer_head * s_zmap[8]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00135">fs.h:135</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_abdd0da83359d6f16a52320c44c41c526_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_abdd0da83359d6f16a52320c44c41c526_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_abdd0da83359d6f16a52320c44c41c526_cgraph" id="asrc_2include_2linux_2fs_8h_abdd0da83359d6f16a52320c44c41c526_cgraph">
<area shape="rect" title=" " alt="" coords="5,183,96,209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="173,183,236,209"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="619,107,677,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="747,56,807,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="144,233,265,260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="161,309,248,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="313,233,432,260"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="333,183,412,209"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="736,107,817,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="865,56,937,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="990,5,1062,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="985,56,1067,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="997,107,1055,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="480,233,560,260"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="608,233,688,260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="327,284,418,311"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="315,335,431,361"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_abdd0da83359d6f16a52320c44c41c526_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_abdd0da83359d6f16a52320c44c41c526_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_abdd0da83359d6f16a52320c44c41c526_icgraph" id="asrc_2include_2linux_2fs_8h_abdd0da83359d6f16a52320c44c41c526_icgraph">
<area shape="rect" title=" " alt="" coords="1329,1618,1420,1644"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="1076,1542,1159,1568"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="952,1567,1028,1594"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,1618,383,1644"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="1207,1592,1281,1619"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="857,731,904,758"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,1466,389,1492"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="143,99,233,126"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="731,98,801,124"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="723,1060,809,1087"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="593,908,659,935"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="307,452,369,479"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="141,202,235,228"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="147,254,229,280"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="141,307,235,334"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="141,364,235,391"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="142,427,234,454"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="151,598,225,624"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="141,736,235,763"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="150,964,226,991"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="137,1370,239,1396"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="143,23,233,50"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="147,1618,229,1644"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,1162,386,1188"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="295,782,381,808"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="293,920,383,947"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="743,731,789,758"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="437,1466,529,1492"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a186ae5192f6afb2ec4fcd93cb592031d" title=" " alt="" coords="723,148,809,175"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ae8584b188355851cdd6f403cd5df3c12" title=" " alt="" coords="588,98,664,124"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="440,1010,527,1036"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,1618,89,1644"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="577,655,675,682"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="440,655,527,682"/>
</map>
</div>

</div>
</div>
<a id="a3d90ed0df8a21fff7ae1e1a47053e406"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d90ed0df8a21fff7ae1e1a47053e406">&#9670;&nbsp;</a></span>free_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_inode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00105">105</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html">bitmap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                       {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *sb;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *bh;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (!inode)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (!inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158">memset</a>(inode, 0, <span class="keyword">sizeof</span>(*inode));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a> &gt; 1) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;trying to free inode with count=%d\n&quot;</span>, inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;free_inode&quot;</span>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#a844dbde82fceb30c92a79e3d3b8f2f0f">i_nlinks</a>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;trying to free inode with links&quot;</span>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (!(sb = <a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba">get_super</a>(inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>)))</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;trying to free inode on nonexistent device&quot;</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">i_num</a> &lt; 1 || inode-&gt;<a class="code" href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">i_num</a> &gt; sb-&gt;<a class="code" href="structsuper__block.html#a5ca86c1e3191a276a76a655ac97a8bf4">s_ninodes</a>)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;trying to free inode 0 or nonexistant inode&quot;</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (!(bh = sb-&gt;<a class="code" href="structsuper__block.html#a8a6d83068c78a2363c92ebf73566ce5f">s_imap</a>[inode-&gt;<a class="code" href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">i_num</a> &gt;&gt; 13]))</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;nonexistent imap in superblock&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a1672a87d9d374137e03703199af7fb94">clear_bit</a>(inode-&gt;<a class="code" href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">i_num</a> &amp; 8191, bh-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>))</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;free_inode: bit already cleared.\n\r&quot;</span>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a> = 1;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158">memset</a>(inode, 0, <span class="keyword">sizeof</span>(*inode));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2string_8h_html_a24267045b7b471321172ee7ac82f5158"><div class="ttname"><a href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158">memset</a></div><div class="ttdeci">static void * memset(void *s, char c, int count)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2string_8h_source.html#l00395">string.h:395</a></div></div>
<div class="ttc" id="astructm__inode_html_a2a639e88f4a46ff1bff2078aef2f6839"><div class="ttname"><a href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">m_inode::i_count</a></div><div class="ttdeci">unsigned short i_count</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00107">fs.h:107</a></div></div>
<div class="ttc" id="astructm__inode_html_a844dbde82fceb30c92a79e3d3b8f2f0f"><div class="ttname"><a href="structm__inode.html#a844dbde82fceb30c92a79e3d3b8f2f0f">m_inode::i_nlinks</a></div><div class="ttdeci">unsigned char i_nlinks</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00099">fs.h:99</a></div></div>
<div class="ttc" id="astructm__inode_html_a939c155d0ad423600b89cfff65dbc8d6"><div class="ttname"><a href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">m_inode::i_num</a></div><div class="ttdeci">unsigned short i_num</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00106">fs.h:106</a></div></div>
<div class="ttc" id="astructm__inode_html_ab7137e3d8956c00cc96dbbb641d5f7b0"><div class="ttname"><a href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">m_inode::i_dev</a></div><div class="ttdeci">unsigned short i_dev</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00105">fs.h:105</a></div></div>
<div class="ttc" id="astructsuper__block_html_a5ca86c1e3191a276a76a655ac97a8bf4"><div class="ttname"><a href="structsuper__block.html#a5ca86c1e3191a276a76a655ac97a8bf4">super_block::s_ninodes</a></div><div class="ttdeci">unsigned short s_ninodes</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00125">fs.h:125</a></div></div>
<div class="ttc" id="astructsuper__block_html_a8a6d83068c78a2363c92ebf73566ce5f"><div class="ttname"><a href="structsuper__block.html#a8a6d83068c78a2363c92ebf73566ce5f">super_block::s_imap</a></div><div class="ttdeci">struct buffer_head * s_imap[8]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00134">fs.h:134</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a3d90ed0df8a21fff7ae1e1a47053e406_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a3d90ed0df8a21fff7ae1e1a47053e406_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a3d90ed0df8a21fff7ae1e1a47053e406_cgraph" id="asrc_2include_2linux_2fs_8h_a3d90ed0df8a21fff7ae1e1a47053e406_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,96,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="144,5,231,32"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="599,56,657,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="727,107,787,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158" title=" " alt="" coords="149,157,225,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="279,5,395,32"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="451,5,531,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="588,5,668,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="716,56,797,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="845,107,917,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="970,56,1042,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="965,107,1047,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="977,157,1035,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ad90bdec45596b60ad4a6e7fc0d669bd4" title=" " alt="" coords="307,157,366,184"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2asm_2segment_8h.html#ab949f1c5413544f8204e5a3338655af5" title=" " alt="" coords="443,157,540,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a3d90ed0df8a21fff7ae1e1a47053e406_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a3d90ed0df8a21fff7ae1e1a47053e406_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a3d90ed0df8a21fff7ae1e1a47053e406_icgraph" id="asrc_2include_2linux_2fs_8h_a3d90ed0df8a21fff7ae1e1a47053e406_icgraph">
<area shape="rect" title=" " alt="" coords="952,736,1043,763"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="857,736,904,763"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="143,5,233,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="731,1623,801,1649"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="723,964,809,991"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="593,812,659,839"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="307,508,369,535"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="141,183,235,209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="147,296,229,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="141,379,235,405"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="141,445,235,472"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="142,504,234,531"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="151,800,225,827"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="141,1192,235,1219"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="150,1243,226,1269"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="137,1521,239,1548"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="143,1572,233,1599"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,748,389,775"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="147,672,229,699"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,1192,383,1219"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,1243,386,1269"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="295,989,381,1016"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="293,635,383,661"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="743,711,789,737"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="437,1217,529,1244"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a186ae5192f6afb2ec4fcd93cb592031d" title=" " alt="" coords="723,1673,809,1700"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ae8584b188355851cdd6f403cd5df3c12" title=" " alt="" coords="588,1623,664,1649"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="440,913,527,940"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,672,89,699"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="577,660,675,687"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="440,660,527,687"/>
</map>
</div>

</div>
</div>
<a id="a233cbadcd057272f37322a707c908989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a233cbadcd057272f37322a707c908989">&#9670;&nbsp;</a></span>get_empty_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structm__inode.html">m_inode</a>* get_empty_inode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00194">194</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html">inode.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">struct </span><a class="code" href="structm__inode.html">m_inode</a> * inode;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structm__inode.html">m_inode</a> * last_inode = <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        inode = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">for</span> (i = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af63c190de439b45378f43837de8a7c6a">NR_INODE</a>; i ; i--) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordflow">if</span> (++last_inode &gt;= <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a> + <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af63c190de439b45378f43837de8a7c6a">NR_INODE</a>)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                last_inode = <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">if</span> (!last_inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                inode = last_inode;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">if</span> (!inode-&gt;<a class="code" href="structm__inode.html#a49ce7269d6c0e0836f6f14aed8a640f6">i_dirt</a> &amp;&amp; !inode-&gt;<a class="code" href="structm__inode.html#af2b3021e9508fcbc815ad7c3756c6e2e">i_lock</a>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> (!inode) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">for</span> (i=0 ; i&lt;<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af63c190de439b45378f43837de8a7c6a">NR_INODE</a> ; i++)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;%04x: %6d\t&quot;</span>,<a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a>[i].<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a>[i].<a class="code" href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">i_num</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;No free inodes in mem&quot;</span>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc">wait_on_inode</a>(inode);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">while</span> (inode-&gt;<a class="code" href="structm__inode.html#a49ce7269d6c0e0836f6f14aed8a640f6">i_dirt</a>) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197">write_inode</a>(inode);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc">wait_on_inode</a>(inode);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    } <span class="keywordflow">while</span> (inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158">memset</a>(inode,0,<span class="keyword">sizeof</span>(*inode));</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a> = 1;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">return</span> inode;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2inode_8c_html_a35a7c0ed9f4a491c42318c15ecefd197"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197">write_inode</a></div><div class="ttdeci">static void write_inode(struct m_inode *inode)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00314">inode.c:314</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2inode_8c_html_a9bf294a613d9b62d17a7b589c0feb64a"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a></div><div class="ttdeci">struct m_inode inode_table[NR_INODE]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00001">inode.c:15</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2inode_8c_html_aef87a93dd139de38ca5b9baac78f4ccc"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc">wait_on_inode</a></div><div class="ttdeci">static void wait_on_inode(struct m_inode *inode)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00020">inode.c:20</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_af63c190de439b45378f43837de8a7c6a"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af63c190de439b45378f43837de8a7c6a">NR_INODE</a></div><div class="ttdeci">#define NR_INODE</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00044">fs.h:44</a></div></div>
<div class="ttc" id="astructm__inode_html"><div class="ttname"><a href="structm__inode.html">m_inode</a></div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00093">fs.h:93</a></div></div>
<div class="ttc" id="astructm__inode_html_a49ce7269d6c0e0836f6f14aed8a640f6"><div class="ttname"><a href="structm__inode.html#a49ce7269d6c0e0836f6f14aed8a640f6">m_inode::i_dirt</a></div><div class="ttdeci">unsigned char i_dirt</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00109">fs.h:109</a></div></div>
<div class="ttc" id="astructm__inode_html_af2b3021e9508fcbc815ad7c3756c6e2e"><div class="ttname"><a href="structm__inode.html#af2b3021e9508fcbc815ad7c3756c6e2e">m_inode::i_lock</a></div><div class="ttdeci">unsigned char i_lock</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00108">fs.h:108</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a233cbadcd057272f37322a707c908989_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a233cbadcd057272f37322a707c908989_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a233cbadcd057272f37322a707c908989_cgraph" id="asrc_2include_2linux_2fs_8h_a233cbadcd057272f37322a707c908989_cgraph">
<area shape="rect" title=" " alt="" coords="5,360,140,387"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158" title=" " alt="" coords="199,5,275,32"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1521,360,1578,387"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1648,745,1708,772"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="975,892,1091,919"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="188,360,287,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ad90bdec45596b60ad4a6e7fc0d669bd4" title=" " alt="" coords="349,5,407,32"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2asm_2segment_8h.html#ab949f1c5413544f8204e5a3338655af5" title=" " alt="" coords="469,5,567,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1637,360,1719,387"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1767,745,1839,772"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1891,695,1963,721"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1887,745,1968,772"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1898,796,1957,823"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1339,715,1419,741"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1509,715,1589,741"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="349,360,407,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="656,233,719,260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="335,841,421,868"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="472,943,564,969"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="979,157,1087,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="808,436,927,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="487,512,549,539"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="820,701,915,728"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1340,259,1419,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="822,505,913,532"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="627,487,748,513"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="615,689,760,716"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="1297,385,1461,412"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="646,639,729,665"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="816,791,919,817"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="975,664,1090,691"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1143,689,1245,716"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1147,740,1241,767"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1139,436,1249,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="975,791,1091,817"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a233cbadcd057272f37322a707c908989_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a233cbadcd057272f37322a707c908989_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a233cbadcd057272f37322a707c908989_icgraph" id="asrc_2include_2linux_2fs_8h_a233cbadcd057272f37322a707c908989_icgraph">
<area shape="rect" title=" " alt="" coords="892,335,1027,361"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a29c1dadaac141814cea5e34ce43d5c32" title=" " alt="" coords="723,221,844,248"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="760,335,807,361"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="437,461,529,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2pipe_8c.html#a1e5ec5c4745591e77d7df87b314cc1a9" title=" " alt="" coords="587,157,665,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="593,360,659,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="307,309,369,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,512,389,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="295,208,381,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="293,259,383,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="577,411,675,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="440,360,527,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="151,512,225,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,461,383,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,411,386,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="143,157,233,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="141,208,235,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="147,259,229,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="141,309,235,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="141,360,235,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="142,411,234,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="141,461,235,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="150,5,226,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="137,56,239,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="143,107,233,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="147,563,229,589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,563,89,589"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="440,411,527,437"/>
</map>
</div>

</div>
</div>
<a id="a26c3be9640a543377e6c6f8d189c83e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26c3be9640a543377e6c6f8d189c83e9">&#9670;&nbsp;</a></span>get_hash_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbuffer__head.html">buffer_head</a>* get_hash_table </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00182">182</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                                       {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *bh;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> (!(bh = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f">find_buffer</a>(dev, block)))</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        bh-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a>++;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a>(bh);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">b_dev</a> == dev &amp;&amp; bh-&gt;<a class="code" href="structbuffer__head.html#abc7bd21622bca69161568595f2e7b3d8">b_blocknr</a> == block)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">return</span> bh;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        bh-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a>--;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_a6dd8a689596cf17cdaf4dd6eb6c98e8f"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f">find_buffer</a></div><div class="ttdeci">static struct buffer_head * find_buffer(int dev, int block)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00166">buffer.c:166</a></div></div>
<div class="ttc" id="astructbuffer__head_html_abc7bd21622bca69161568595f2e7b3d8"><div class="ttname"><a href="structbuffer__head.html#abc7bd21622bca69161568595f2e7b3d8">buffer_head::b_blocknr</a></div><div class="ttdeci">unsigned long b_blocknr</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00070">fs.h:70</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a26c3be9640a543377e6c6f8d189c83e9_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a26c3be9640a543377e6c6f8d189c83e9_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a26c3be9640a543377e6c6f8d189c83e9_cgraph" id="asrc_2include_2linux_2fs_8h_a26c3be9640a543377e6c6f8d189c83e9_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,127,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="189,56,279,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="175,107,293,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="341,107,421,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="481,81,538,108"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="469,132,549,159"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="608,56,668,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="597,107,679,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="727,56,799,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="851,5,923,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="847,56,928,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="858,107,917,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a26c3be9640a543377e6c6f8d189c83e9_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a26c3be9640a543377e6c6f8d189c83e9_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a26c3be9640a543377e6c6f8d189c83e9_icgraph" id="asrc_2include_2linux_2fs_8h_a26c3be9640a543377e6c6f8d189c83e9_icgraph">
<area shape="rect" title=" " alt="" coords="1277,1117,1399,1144"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="1028,1320,1119,1347"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="1167,1016,1229,1043"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="744,1219,827,1245"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="600,1219,676,1245"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="161,1371,251,1397"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="894,1168,969,1195"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="469,712,516,739"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="155,1219,257,1245"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="11,459,101,485"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="316,965,387,992"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="308,1067,395,1093"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="173,832,239,859"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="175,357,237,384"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="9,111,103,137"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="15,168,97,195"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="9,231,103,257"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="9,307,103,333"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="10,535,102,561"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="19,825,93,852"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="9,357,103,384"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="18,5,94,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="5,57,107,84"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="11,585,101,612"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="15,1371,97,1397"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="158,1117,254,1144"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="163,920,249,947"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="161,781,251,808"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="328,813,375,840"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="305,1168,397,1195"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a186ae5192f6afb2ec4fcd93cb592031d" title=" " alt="" coords="309,1016,394,1043"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#a9af8af96c24b2aee5f949b116decfd02" title=" " alt="" coords="883,408,980,435"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="1044,915,1103,941"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7bcdedc1f5ba7597461c3a49559e5b12" title=" " alt="" coords="736,1269,835,1296"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a1b310db1dc1e28275c0888c724d48724" title=" " alt="" coords="1040,484,1107,511"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="1028,1117,1119,1144"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="898,1117,965,1144"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="594,965,682,992"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="599,864,677,891"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="885,965,977,992"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="308,1320,395,1347"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="890,1067,973,1093"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#afe8b61fe00bf63ea72d91f7a1d1b6d09" title=" " alt="" coords="896,509,967,536"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="742,535,829,561"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="445,763,540,789"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="445,307,540,333"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="736,712,835,739"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a608309a4a886522767be4646f5c709cc" title=" " alt="" coords="756,915,815,941"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="588,1092,688,1119"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#aaaa32bea7c458e274286421ec9c6266f" title=" " alt="" coords="885,459,978,485"/>
</map>
</div>

</div>
</div>
<a id="a29c1dadaac141814cea5e34ce43d5c32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29c1dadaac141814cea5e34ce43d5c32">&#9670;&nbsp;</a></span>get_pipe_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structm__inode.html">m_inode</a>* get_pipe_inode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00228">228</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html">inode.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keyword">struct </span><a class="code" href="structm__inode.html">m_inode</a> * inode;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (!(inode = <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989">get_empty_inode</a>()))</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (!(inode-&gt;<a class="code" href="structm__inode.html#a221b9232932ba984b5a3230e1b98f52e">i_size</a>=<a class="code" href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#af5beb0578c75971eb353cd8a67e9c042">get_free_page</a>())) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a> = 0;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a> = 2; <span class="comment">/* sum of readers/writers */</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a02fb52db3368bef7f5dbcd349dd9a3b0">PIPE_HEAD</a>(*inode) = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a0f5ea8466512c3ae82260b4f1064fca3">PIPE_TAIL</a>(*inode) = 0;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a5291fbb157cbbe8abb6c3c756cd12cc5">i_pipe</a> = 1;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> inode;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2inode_8c_html_a233cbadcd057272f37322a707c908989"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989">get_empty_inode</a></div><div class="ttdeci">struct m_inode * get_empty_inode(void)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00194">inode.c:194</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_a02fb52db3368bef7f5dbcd349dd9a3b0"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a02fb52db3368bef7f5dbcd349dd9a3b0">PIPE_HEAD</a></div><div class="ttdeci">#define PIPE_HEAD(inode)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00058">fs.h:58</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_a0f5ea8466512c3ae82260b4f1064fca3"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a0f5ea8466512c3ae82260b4f1064fca3">PIPE_TAIL</a></div><div class="ttdeci">#define PIPE_TAIL(inode)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00059">fs.h:59</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2mm_8h_html_af5beb0578c75971eb353cd8a67e9c042"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#af5beb0578c75971eb353cd8a67e9c042">get_free_page</a></div><div class="ttdeci">unsigned long get_free_page(void)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2mm_2memory_8c_source.html#l00063">memory.c:63</a></div></div>
<div class="ttc" id="astructm__inode_html_a221b9232932ba984b5a3230e1b98f52e"><div class="ttname"><a href="structm__inode.html#a221b9232932ba984b5a3230e1b98f52e">m_inode::i_size</a></div><div class="ttdeci">unsigned long i_size</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00096">fs.h:96</a></div></div>
<div class="ttc" id="astructm__inode_html_a5291fbb157cbbe8abb6c3c756cd12cc5"><div class="ttname"><a href="structm__inode.html#a5291fbb157cbbe8abb6c3c756cd12cc5">m_inode::i_pipe</a></div><div class="ttdeci">unsigned char i_pipe</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00110">fs.h:110</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a29c1dadaac141814cea5e34ce43d5c32_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a29c1dadaac141814cea5e34ce43d5c32_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a29c1dadaac141814cea5e34ce43d5c32_cgraph" id="asrc_2include_2linux_2fs_8h_a29c1dadaac141814cea5e34ce43d5c32_cgraph">
<area shape="rect" title=" " alt="" coords="5,385,127,412"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="175,360,309,387"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#af5beb0578c75971eb353cd8a67e9c042" title=" " alt="" coords="185,411,299,437"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158" title=" " alt="" coords="369,5,445,32"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1690,360,1747,387"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1817,745,1877,772"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="1144,892,1260,919"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="357,360,456,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ad90bdec45596b60ad4a6e7fc0d669bd4" title=" " alt="" coords="518,5,577,32"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2asm_2segment_8h.html#ab949f1c5413544f8204e5a3338655af5" title=" " alt="" coords="639,5,736,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1807,360,1888,387"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1936,745,2008,772"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="2061,695,2133,721"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="2056,745,2137,772"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="2067,796,2126,823"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1509,715,1589,741"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1679,715,1759,741"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="518,360,577,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="825,233,888,260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="504,841,591,868"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="641,943,733,969"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="1148,157,1256,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="977,443,1096,469"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="656,512,719,539"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="989,701,1084,728"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1509,259,1588,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="991,505,1082,532"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="796,487,917,513"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="784,689,929,716"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="1467,385,1631,412"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="815,639,898,665"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="985,791,1088,817"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1145,664,1259,691"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1312,689,1415,716"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1316,740,1411,767"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1308,436,1419,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="1144,791,1260,817"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a29c1dadaac141814cea5e34ce43d5c32_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a29c1dadaac141814cea5e34ce43d5c32_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a29c1dadaac141814cea5e34ce43d5c32_icgraph" id="asrc_2include_2linux_2fs_8h_a29c1dadaac141814cea5e34ce43d5c32_icgraph">
<area shape="rect" title=" " alt="" coords="132,5,253,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2pipe_8c.html#a1e5ec5c4745591e77d7df87b314cc1a9" title=" " alt="" coords="5,5,84,32"/>
</map>
</div>

</div>
</div>
<a id="a43f836df13a239d2197028d56018edba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43f836df13a239d2197028d56018edba">&#9670;&nbsp;</a></span>get_super()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsuper__block.html">super_block</a>* get_super </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00056">56</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2super_8c_source.html">super.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> * s;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (!dev)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    s = 0+<a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a542357775bd1bb6453a5e9db9cae68eb">super_block</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">while</span> (s &lt; <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a9169276d1d6c029b1d8680def713d7e3">NR_SUPER</a>+<a class="code" href="structsuper__block.html">super_block</a>)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structsuper__block.html#ab9c993d60c46818adf15d8f353f5acc7">s_dev</a> == dev) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef">wait_on_super</a>(s);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structsuper__block.html#ab9c993d60c46818adf15d8f353f5acc7">s_dev</a> == dev)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <span class="keywordflow">return</span> s;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            s = 0+<a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a542357775bd1bb6453a5e9db9cae68eb">super_block</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            s++;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2super_8c_html_a443c3c886626b03f1130aa6a8758f8ef"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef">wait_on_super</a></div><div class="ttdeci">static void wait_on_super(struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00048">super.c:48</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2super_8c_html_a542357775bd1bb6453a5e9db9cae68eb"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2super_8c.html#a542357775bd1bb6453a5e9db9cae68eb">super_block</a></div><div class="ttdeci">struct super_block super_block[NR_SUPER]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00019">super.c:27</a></div></div>
<div class="ttc" id="astructsuper__block_html_ab9c993d60c46818adf15d8f353f5acc7"><div class="ttname"><a href="structsuper__block.html#ab9c993d60c46818adf15d8f353f5acc7">super_block::s_dev</a></div><div class="ttdeci">unsigned short s_dev</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00136">fs.h:136</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a43f836df13a239d2197028d56018edba_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a43f836df13a239d2197028d56018edba_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a43f836df13a239d2197028d56018edba_cgraph" id="asrc_2include_2linux_2fs_8h_a43f836df13a239d2197028d56018edba_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,92,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="140,107,256,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="304,107,384,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="443,81,501,108"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="432,132,512,159"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="571,56,631,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="560,107,641,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="689,56,761,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="814,5,886,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="809,56,891,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="821,107,879,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a43f836df13a239d2197028d56018edba_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a43f836df13a239d2197028d56018edba_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a43f836df13a239d2197028d56018edba_icgraph" id="asrc_2include_2linux_2fs_8h_a43f836df13a239d2197028d56018edba_icgraph">
<area shape="rect" title=" " alt="" coords="1659,1421,1745,1448"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="740,965,827,992"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="137,2004,239,2031"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="1520,1472,1611,1499"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="437,1269,529,1296"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3d90ed0df8a21fff7ae1e1a47053e406" title=" " alt="" coords="1520,889,1611,916"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="1229,763,1319,789"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7d20b074bcbc61719507a1f8e55b0606" title=" " alt="" coords="1088,1967,1175,1993"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="736,1905,831,1932"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="1375,1624,1470,1651"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="1373,1193,1472,1220"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="593,1117,659,1144"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="307,459,369,485"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="151,737,225,764"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,1573,389,1600"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,712,383,739"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,1067,386,1093"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="295,1219,381,1245"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="293,940,383,967"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="440,1016,527,1043"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="143,5,233,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="141,57,235,84"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="147,112,229,139"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="141,171,235,197"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="141,237,235,264"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="142,320,234,347"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="141,1472,235,1499"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="150,433,226,460"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="143,484,233,511"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="147,1827,229,1853"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,1827,89,1853"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="1233,1573,1315,1600"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="1093,1523,1169,1549"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="1385,1523,1460,1549"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="943,1003,989,1029"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="748,1269,819,1296"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="760,1523,807,1549"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a186ae5192f6afb2ec4fcd93cb592031d" title=" " alt="" coords="741,1219,826,1245"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ae8584b188355851cdd6f403cd5df3c12" title=" " alt="" coords="588,1269,664,1296"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="577,1725,675,1752"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="440,1725,527,1752"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="1098,763,1165,789"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a608309a4a886522767be4646f5c709cc" title=" " alt="" coords="937,901,995,928"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a3704034fc57e100765395733a0a72321" title=" " alt="" coords="913,763,1019,789"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a53eefc9fcd3ae0cc20ec6eeea2dd6d44" title=" " alt="" coords="892,1967,1040,1993"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="899,1675,1033,1701"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="1223,1193,1325,1220"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a29c1dadaac141814cea5e34ce43d5c32" title=" " alt="" coords="723,1776,844,1803"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="1090,1117,1173,1144"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3c674993ee07115ee464f88503882488" title=" " alt="" coords="1091,1193,1172,1220"/>
</map>
</div>

</div>
</div>
<a id="a197cebc7bc8d67773a979e92c14b40c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a197cebc7bc8d67773a979e92c14b40c0">&#9670;&nbsp;</a></span>getblk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbuffer__head.html">buffer_head</a>* getblk </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00205">205</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                               {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *tmp, *bh;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    repeat:</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> ((bh = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9">get_hash_table</a>(dev, block)))</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">return</span> bh;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    tmp = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aef8235d6e36e5dc84b71c81d0dd3ba4c">free_list</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a>)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">if</span> (!bh || <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aeae6468400b6d843e991359c508f1fd5">BADNESS</a>(tmp) &lt; <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aeae6468400b6d843e991359c508f1fd5">BADNESS</a>(bh)) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            bh = tmp;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aeae6468400b6d843e991359c508f1fd5">BADNESS</a>(tmp))</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/* and repeat until we find something good */</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    } <span class="keywordflow">while</span> ((tmp = tmp-&gt;<a class="code" href="structbuffer__head.html#a04cffb53086438267e6bf58b85f4b0c6">b_next_free</a>) != <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aef8235d6e36e5dc84b71c81d0dd3ba4c">free_list</a>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (!bh) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d">sleep_on</a>(&amp;<a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a155818a3787ba8f8bbc578b6014c5078">buffer_wait</a>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">goto</span> repeat;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a>(bh);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a>)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">goto</span> repeat;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">while</span> (bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a>) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3">sync_dev</a>(bh-&gt;<a class="code" href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">b_dev</a>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a>(bh);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a>)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordflow">goto</span> repeat;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/* NOTE!! While we slept waiting for this block, somebody else might */</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">/* already have added &quot;this&quot; block to the cache. check it */</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f">find_buffer</a>(dev, block))</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">goto</span> repeat;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">/* OK, FINALLY we know that this buffer is the only one of it&#39;s kind, */</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">/* and that it&#39;s unused (b_count=0), unlocked (b_lock=0), and clean */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a> = 1;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a> = 0;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a> = 0;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e">remove_from_queues</a>(bh);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">b_dev</a> = dev;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#abc7bd21622bca69161568595f2e7b3d8">b_blocknr</a> = block;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a">insert_into_queues</a>(bh);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> bh;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_a3cc00a803282300ea51f20842322814e"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e">remove_from_queues</a></div><div class="ttdeci">static void remove_from_queues(struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00133">buffer.c:133</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_a95df8a2e491bf4181e3d7b6ddfc755a3"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3">sync_dev</a></div><div class="ttdeci">int sync_dev(int dev)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00062">buffer.c:62</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_aca6ca6f3081c02518e27afc1d833796a"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a">insert_into_queues</a></div><div class="ttdeci">static void insert_into_queues(struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00150">buffer.c:150</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2buffer_8c_html_aeae6468400b6d843e991359c508f1fd5"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2buffer_8c.html#aeae6468400b6d843e991359c508f1fd5">BADNESS</a></div><div class="ttdeci">#define BADNESS(bh)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00203">buffer.c:203</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a8ee0eea1a206d256d223fd33292ddb5d"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d">sleep_on</a></div><div class="ttdeci">void sleep_on(struct task_struct **p)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00151">sched.c:151</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a197cebc7bc8d67773a979e92c14b40c0_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a197cebc7bc8d67773a979e92c14b40c0_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a197cebc7bc8d67773a979e92c14b40c0_cgraph" id="asrc_2include_2linux_2fs_8h_a197cebc7bc8d67773a979e92c14b40c0_cgraph">
<area shape="rect" title=" " alt="" coords="5,397,68,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="1107,448,1198,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="903,397,1024,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1093,296,1212,323"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1260,524,1340,551"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="891,245,1036,272"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="881,929,1045,956"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="116,347,199,373"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1399,625,1457,652"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1388,524,1468,551"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1527,93,1587,120"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1516,625,1597,652"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1645,93,1717,120"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1770,43,1842,69"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1765,93,1847,120"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1777,144,1835,171"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="728,43,823,69"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="247,448,349,475"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="906,43,1021,69"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1101,43,1204,69"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1105,245,1200,272"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1097,93,1208,120"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1261,727,1339,753"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="397,448,513,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="406,701,505,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="586,499,645,525"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="932,752,995,779"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="572,625,659,652"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="729,701,821,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="561,803,669,829"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="744,347,807,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="717,600,833,627"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a197cebc7bc8d67773a979e92c14b40c0_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a197cebc7bc8d67773a979e92c14b40c0_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a197cebc7bc8d67773a979e92c14b40c0_icgraph" id="asrc_2include_2linux_2fs_8h_a197cebc7bc8d67773a979e92c14b40c0_icgraph">
<area shape="rect" title=" " alt="" coords="1489,1069,1552,1096"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#a9af8af96c24b2aee5f949b116decfd02" title=" " alt="" coords="1205,5,1303,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="1367,1069,1425,1096"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7bcdedc1f5ba7597461c3a49559e5b12" title=" " alt="" coords="1055,1537,1154,1564"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a1b310db1dc1e28275c0888c724d48724" title=" " alt="" coords="1363,81,1429,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="1351,1563,1441,1589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="1221,1395,1287,1421"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="910,1449,998,1476"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="915,1500,993,1527"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="583,1373,669,1400"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="7,360,98,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="155,1753,244,1780"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="908,1221,1000,1248"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="299,1627,385,1653"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="913,1157,995,1184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="1063,892,1146,919"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="299,208,385,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="1217,892,1291,919"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#afe8b61fe00bf63ea72d91f7a1d1b6d09" title=" " alt="" coords="1219,107,1289,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="1057,1044,1152,1071"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="579,309,673,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="905,968,1003,995"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a608309a4a886522767be4646f5c709cc" title=" " alt="" coords="1075,1411,1134,1437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a3704034fc57e100765395733a0a72321" title=" " alt="" coords="1052,1256,1157,1283"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="904,1551,1004,1577"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="156,1475,243,1501"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="449,1221,515,1248"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="168,613,231,640"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="15,1272,90,1299"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="148,1019,251,1045"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="151,1373,247,1400"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="154,1196,245,1223"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="299,1272,385,1299"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="5,607,100,633"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="11,664,94,691"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="5,487,100,513"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="6,549,99,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="6,411,99,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="11,917,94,944"/>
<area shape="rect" href="src_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="737,1145,840,1172"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="751,1196,826,1223"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="744,1247,833,1273"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="741,1297,837,1324"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="916,841,992,868"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="765,841,812,868"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="603,1019,649,1045"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="433,309,531,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="721,943,856,969"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="737,993,840,1020"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#aaaa32bea7c458e274286421ec9c6266f" title=" " alt="" coords="1207,56,1301,83"/>
</map>
</div>

</div>
</div>
<a id="a78b297f206aacdb913d2db4db1ef6689"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b297f206aacdb913d2db4db1ef6689">&#9670;&nbsp;</a></span>iget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structm__inode.html">m_inode</a>* iget </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00244">244</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html">inode.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">struct </span><a class="code" href="structm__inode.html">m_inode</a> * inode, * empty;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (!dev)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;iget with dev==0&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    empty = <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989">get_empty_inode</a>();</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    inode = <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">while</span> (inode &lt; <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af63c190de439b45378f43837de8a7c6a">NR_INODE</a>+<a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a>) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a> != dev || inode-&gt;<a class="code" href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">i_num</a> != nr) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            inode++;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc">wait_on_inode</a>(inode);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a> != dev || inode-&gt;<a class="code" href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">i_num</a> != nr) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            inode = <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>++;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#a0dbe5ff84e6bf055b86c04bc76cbff3b">i_mount</a>) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordflow">for</span> (i = 0 ; i&lt;<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a9169276d1d6c029b1d8680def713d7e3">NR_SUPER</a> ; i++)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="structsuper__block.html">super_block</a>[i].s_imount==inode)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span> (i &gt;= <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a9169276d1d6c029b1d8680def713d7e3">NR_SUPER</a>) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;Mounted inode hasn&#39;t got sb\n&quot;</span>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordflow">if</span> (empty)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(empty);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="keywordflow">return</span> inode;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(inode);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            dev = <a class="code" href="structsuper__block.html">super_block</a>[i].<a class="code" href="structsuper__block.html#ab9c993d60c46818adf15d8f353f5acc7">s_dev</a>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            nr = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a53239041354f7e1c8d3bb1308876a6b9">ROOT_INO</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            inode = <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">if</span> (empty)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(empty);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">return</span> inode;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (!empty)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    inode=empty;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a> = dev;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">i_num</a> = nr;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb">read_inode</a>(inode);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> inode;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2inode_8c_html_af3c9d35d7418d0b20df66b259199cedb"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb">read_inode</a></div><div class="ttdeci">static void read_inode(struct m_inode *inode)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00294">inode.c:294</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2inode_8c_html_afa76e75f45af948cbb6e5da444038f40"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a></div><div class="ttdeci">void iput(struct m_inode *inode)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00150">inode.c:150</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_a53239041354f7e1c8d3bb1308876a6b9"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a53239041354f7e1c8d3bb1308876a6b9">ROOT_INO</a></div><div class="ttdeci">#define ROOT_INO</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00037">fs.h:37</a></div></div>
<div class="ttc" id="astructm__inode_html_a0dbe5ff84e6bf055b86c04bc76cbff3b"><div class="ttname"><a href="structm__inode.html#a0dbe5ff84e6bf055b86c04bc76cbff3b">m_inode::i_mount</a></div><div class="ttdeci">unsigned char i_mount</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00111">fs.h:111</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a78b297f206aacdb913d2db4db1ef6689_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a78b297f206aacdb913d2db4db1ef6689_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a78b297f206aacdb913d2db4db1ef6689_cgraph" id="asrc_2include_2linux_2fs_8h_a78b297f206aacdb913d2db4db1ef6689_cgraph">
<area shape="rect" title=" " alt="" coords="5,549,52,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="329,195,464,221"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1855,1157,1913,1184"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1983,296,2043,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="1309,347,1425,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="100,929,147,956"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="514,1259,609,1285"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158" title=" " alt="" coords="820,144,896,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="512,929,611,956"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ad90bdec45596b60ad4a6e7fc0d669bd4" title=" " alt="" coords="993,144,1051,171"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2asm_2segment_8h.html#ab949f1c5413544f8204e5a3338655af5" title=" " alt="" coords="1153,144,1251,171"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1972,1157,2053,1184"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="2101,296,2173,323"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="2226,245,2298,272"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="2221,296,2303,323"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="2233,347,2291,373"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1674,727,1754,753"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1844,727,1924,753"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="683,1107,742,1133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="827,1309,889,1336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="815,549,901,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="667,955,759,981"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="659,1259,767,1285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1143,765,1261,792"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="827,929,889,956"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="1155,689,1249,716"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1675,1385,1753,1412"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="1157,853,1247,880"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="961,853,1083,880"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="949,955,1095,981"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="1632,1056,1796,1083"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="981,701,1063,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="1151,448,1253,475"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1310,828,1425,855"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1477,853,1580,880"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1481,803,1576,829"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1473,1005,1584,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="1309,448,1425,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3d90ed0df8a21fff7ae1e1a47053e406" title=" " alt="" coords="667,245,758,272"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#a6b87a284a258fa3893dc88c0fcd6f610" title=" " alt="" coords="195,1563,281,1589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="200,1056,276,1083"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="667,1056,758,1083"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="355,1107,438,1133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="524,1157,599,1184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a78b297f206aacdb913d2db4db1ef6689_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a78b297f206aacdb913d2db4db1ef6689_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a78b297f206aacdb913d2db4db1ef6689_icgraph" id="asrc_2include_2linux_2fs_8h_a78b297f206aacdb913d2db4db1ef6689_icgraph">
<area shape="rect" title=" " alt="" coords="717,537,764,564"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="587,512,654,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="307,309,369,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,411,389,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="295,613,381,640"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="293,664,383,691"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="572,664,669,691"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="437,512,524,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="151,512,225,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,563,383,589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,512,386,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="143,309,233,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="141,360,235,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="147,411,229,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="141,461,235,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="141,5,235,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="142,56,234,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="141,107,235,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="150,157,226,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="137,208,239,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="143,259,233,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="147,563,229,589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,563,89,589"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="437,664,524,691"/>
</map>
</div>

</div>
</div>
<a id="afa76e75f45af948cbb6e5da444038f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa76e75f45af948cbb6e5da444038f40">&#9670;&nbsp;</a></span>iput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iput </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00150">150</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html">inode.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (!inode)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc">wait_on_inode</a>(inode);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (!inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;iput: trying to free free inode&quot;</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#a5291fbb157cbbe8abb6c3c756cd12cc5">i_pipe</a>) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4">wake_up</a>(&amp;inode-&gt;<a class="code" href="structm__inode.html#a71370164a27b16e5327f366a62873952">i_wait</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (--inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#a6b87a284a258fa3893dc88c0fcd6f610">free_page</a>(inode-&gt;<a class="code" href="structm__inode.html#a221b9232932ba984b5a3230e1b98f52e">i_size</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>=0;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        inode-&gt;<a class="code" href="structm__inode.html#a49ce7269d6c0e0836f6f14aed8a640f6">i_dirt</a>=0;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        inode-&gt;<a class="code" href="structm__inode.html#a5291fbb157cbbe8abb6c3c756cd12cc5">i_pipe</a>=0;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (!inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>--;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2include_2sys_2stat_8h.html#a722eba7370eb3b0aafb3272182e08520">S_ISBLK</a>(inode-&gt;<a class="code" href="structm__inode.html#a8e7ad442dc54bb004462f2e82609ee06">i_mode</a>)) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3">sync_dev</a>(inode-&gt;<a class="code" href="structm__inode.html#ab5259e1fa50415a968e5558ca2e92d9f">i_zone</a>[0]);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc">wait_on_inode</a>(inode);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;repeat:</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>&gt;1) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>--;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (!inode-&gt;<a class="code" href="structm__inode.html#a844dbde82fceb30c92a79e3d3b8f2f0f">i_nlinks</a>) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23">truncate</a>(inode);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3d90ed0df8a21fff7ae1e1a47053e406">free_inode</a>(inode);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#a49ce7269d6c0e0836f6f14aed8a640f6">i_dirt</a>) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197">write_inode</a>(inode); <span class="comment">/* we can sleep - so do again */</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc">wait_on_inode</a>(inode);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">goto</span> repeat;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a>--;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2bitmap_8c_html_a3d90ed0df8a21fff7ae1e1a47053e406"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3d90ed0df8a21fff7ae1e1a47053e406">free_inode</a></div><div class="ttdeci">void free_inode(struct m_inode *inode)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00105">bitmap.c:105</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2truncate_8c_html_a1697df39771f157846a3ef9f46327c23"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23">truncate</a></div><div class="ttdeci">void truncate(struct m_inode *inode)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2truncate_8c_source.html#l00047">truncate.c:47</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2mm_8h_html_a6b87a284a258fa3893dc88c0fcd6f610"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#a6b87a284a258fa3893dc88c0fcd6f610">free_page</a></div><div class="ttdeci">void free_page(unsigned long addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2mm_2memory_8c_source.html#l00089">memory.c:89</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2sys_2stat_8h_html_a722eba7370eb3b0aafb3272182e08520"><div class="ttname"><a href="flash_2Linux-0_811_2include_2sys_2stat_8h.html#a722eba7370eb3b0aafb3272182e08520">S_ISBLK</a></div><div class="ttdeci">#define S_ISBLK(m)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2sys_2stat_8h_source.html#l00033">stat.h:33</a></div></div>
<div class="ttc" id="astructm__inode_html_a71370164a27b16e5327f366a62873952"><div class="ttname"><a href="structm__inode.html#a71370164a27b16e5327f366a62873952">m_inode::i_wait</a></div><div class="ttdeci">struct task_struct * i_wait</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00102">fs.h:102</a></div></div>
<div class="ttc" id="astructm__inode_html_a8e7ad442dc54bb004462f2e82609ee06"><div class="ttname"><a href="structm__inode.html#a8e7ad442dc54bb004462f2e82609ee06">m_inode::i_mode</a></div><div class="ttdeci">unsigned short i_mode</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00094">fs.h:94</a></div></div>
<div class="ttc" id="astructm__inode_html_ab5259e1fa50415a968e5558ca2e92d9f"><div class="ttname"><a href="structm__inode.html#ab5259e1fa50415a968e5558ca2e92d9f">m_inode::i_zone</a></div><div class="ttdeci">unsigned short i_zone[9]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00100">fs.h:100</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_afa76e75f45af948cbb6e5da444038f40_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_afa76e75f45af948cbb6e5da444038f40_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_afa76e75f45af948cbb6e5da444038f40_cgraph" id="asrc_2include_2linux_2fs_8h_afa76e75f45af948cbb6e5da444038f40_cgraph">
<area shape="rect" title=" " alt="" coords="5,438,52,465"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3d90ed0df8a21fff7ae1e1a47053e406" title=" " alt="" coords="554,1236,645,1262"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1427,514,1485,541"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#a6b87a284a258fa3893dc88c0fcd6f610" title=" " alt="" coords="239,8,325,34"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="100,666,183,693"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1247,337,1325,364"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="381,616,497,642"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="390,540,489,566"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="103,400,179,426"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="705,717,792,744"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1555,920,1615,946"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158" title=" " alt="" coords="711,1325,787,1352"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="859,970,975,997"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1246,970,1326,997"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1416,970,1496,997"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1544,514,1625,541"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1673,920,1745,946"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1798,869,1870,896"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1793,920,1875,946"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1805,970,1863,997"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ad90bdec45596b60ad4a6e7fc0d669bd4" title=" " alt="" coords="887,1325,946,1352"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2asm_2segment_8h.html#ab949f1c5413544f8204e5a3338655af5" title=" " alt="" coords="1048,1325,1145,1352"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="701,1060,796,1086"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="231,616,333,642"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1037,616,1156,642"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="859,1021,974,1048"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1045,869,1148,896"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1049,970,1144,997"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1041,920,1152,946"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="570,514,629,541"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="717,312,780,338"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="553,768,645,794"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="545,464,653,490"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="717,666,780,693"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="1051,666,1142,693"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="856,666,977,693"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="844,717,989,744"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="1204,565,1368,592"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="554,362,645,389"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="241,362,323,389"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="402,312,477,338"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_afa76e75f45af948cbb6e5da444038f40_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_afa76e75f45af948cbb6e5da444038f40_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_afa76e75f45af948cbb6e5da444038f40_icgraph" id="asrc_2include_2linux_2fs_8h_afa76e75f45af948cbb6e5da444038f40_icgraph">
<area shape="rect" title=" " alt="" coords="857,736,904,763"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="143,5,233,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="731,1623,801,1649"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="723,964,809,991"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="593,812,659,839"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="307,508,369,535"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="141,183,235,209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="147,296,229,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="141,379,235,405"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="141,445,235,472"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="142,504,234,531"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="151,800,225,827"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="141,1192,235,1219"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="150,1243,226,1269"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="137,1521,239,1548"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="143,1572,233,1599"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,748,389,775"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="147,672,229,699"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,1192,383,1219"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,1243,386,1269"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="295,989,381,1016"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="293,635,383,661"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="743,711,789,737"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="437,1217,529,1244"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a186ae5192f6afb2ec4fcd93cb592031d" title=" " alt="" coords="723,1673,809,1700"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ae8584b188355851cdd6f403cd5df3c12" title=" " alt="" coords="588,1623,664,1649"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="440,913,527,940"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,672,89,699"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="577,660,675,687"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="440,660,527,687"/>
</map>
</div>

</div>
</div>
<a id="af9add4ad497e3b9eae67e2cbf7cea45e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9add4ad497e3b9eae67e2cbf7cea45e">&#9670;&nbsp;</a></span>ll_rw_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ll_rw_block </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbuffer__head.html">buffer_head</a> *&#160;</td>
          <td class="paramname"><em>bh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c_source.html#l00145">145</a> of file <a class="el" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c_source.html">ll_rw_blk.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> major;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> ((major=<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ad46638abb143d7f2f6df36789c92f720">MAJOR</a>(bh-&gt;<a class="code" href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">b_dev</a>)) &gt;= <a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2blk_8h.html#a1fbe26aff037918830c9771bead016a8">NR_BLK_DEV</a> ||</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    !(<a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ab46dc689c498cc2c78d5c53ed2152815">blk_dev</a>[major].<a class="code" href="structblk__dev__struct.html#a376571451a1e7a8aa3cf4bd784cd42c1">request_fn</a>)) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;Trying to read nonexistent block-device\n\r&quot;</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674">make_request</a>(major,rw,bh);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2blk__drv_2blk_8h_html_a1fbe26aff037918830c9771bead016a8"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2blk__drv_2blk_8h.html#a1fbe26aff037918830c9771bead016a8">NR_BLK_DEV</a></div><div class="ttdeci">#define NR_BLK_DEV</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2blk__drv_2blk_8h_source.html#l00004">blk.h:4</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c_html_ab46dc689c498cc2c78d5c53ed2152815"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ab46dc689c498cc2c78d5c53ed2152815">blk_dev</a></div><div class="ttdeci">struct blk_dev_struct blk_dev[NR_BLK_DEV]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c_source.html#l00026">ll_rw_blk.c:32</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c_html_ae0d0119949a9c5eed9b1128db4f13674"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674">make_request</a></div><div class="ttdeci">static void make_request(int major, int rw, struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c_source.html#l00088">ll_rw_blk.c:88</a></div></div>
<div class="ttc" id="astructblk__dev__struct_html_a376571451a1e7a8aa3cf4bd784cd42c1"><div class="ttname"><a href="structblk__dev__struct.html#a376571451a1e7a8aa3cf4bd784cd42c1">blk_dev_struct::request_fn</a></div><div class="ttdeci">void(* request_fn)(void)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2blk__drv_2blk_8h_source.html#l00046">blk.h:46</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_af9add4ad497e3b9eae67e2cbf7cea45e_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_af9add4ad497e3b9eae67e2cbf7cea45e_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_af9add4ad497e3b9eae67e2cbf7cea45e_cgraph" id="asrc_2include_2linux_2fs_8h_af9add4ad497e3b9eae67e2cbf7cea45e_cgraph">
<area shape="rect" title=" " alt="" coords="5,233,100,260"/>
<area shape="rect" href="src_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="148,132,263,159"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="736,208,796,235"/>
<area shape="rect" href="src_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="315,5,417,32"/>
<area shape="rect" href="src_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="319,56,413,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="469,107,549,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="609,157,666,184"/>
<area shape="rect" href="src_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="311,208,421,235"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="597,107,677,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="725,157,807,184"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="855,208,927,235"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="979,157,1051,184"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="975,208,1056,235"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="986,259,1045,285"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="470,259,549,285"/>
</map>
</div>

</div>
</div>
<a id="a516f58ff075ed9e15bb77645c5d55b56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a516f58ff075ed9e15bb77645c5d55b56">&#9670;&nbsp;</a></span>mount_root()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mount_root </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00242">242</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2super_8c_source.html">super.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">int</span> i,<a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#affb9fc32698fab7f7b36e0cf8e64c83e">free</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> * p;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">struct </span><a class="code" href="structm__inode.html">m_inode</a> * mi;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (32 != <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structd__inode.html">d_inode</a>))</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;bad i-node size&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a13d1daac91a4ebfc4511bbe85d15d360">NR_FILE</a>;i++)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2file__table_8c.html#ad8a0a8efe57313ad9d7359e5653ed901">file_table</a>[i].f_count=0;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#ad46638abb143d7f2f6df36789c92f720">MAJOR</a>(<a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#adc981cc78759e83089d9809fd54d2d52">ROOT_DEV</a>) == 2) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;Insert root floppy and press ENTER&quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a458d21c73fc4113236898d9afa004ed4">wait_for_keypress</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">for</span>(p = &amp;<a class="code" href="structsuper__block.html">super_block</a>[0] ; p &lt; &amp;<a class="code" href="structsuper__block.html">super_block</a>[<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a9169276d1d6c029b1d8680def713d7e3">NR_SUPER</a>] ; p++) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        p-&gt;<a class="code" href="structsuper__block.html#ab9c993d60c46818adf15d8f353f5acc7">s_dev</a> = 0;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        p-&gt;<a class="code" href="structsuper__block.html#a407ac10fa82d5f79f50287c0d668ebc3">s_lock</a> = 0;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        p-&gt;<a class="code" href="structsuper__block.html#aa06dfd80dfcb6805ce2556d07ddc4da1">s_wait</a> = <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (!(p=<a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38">read_super</a>(<a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#adc981cc78759e83089d9809fd54d2d52">ROOT_DEV</a>)))</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;Unable to mount root&quot;</span>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (!(mi=<a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689">iget</a>(<a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#adc981cc78759e83089d9809fd54d2d52">ROOT_DEV</a>,<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a53239041354f7e1c8d3bb1308876a6b9">ROOT_INO</a>)))</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;Unable to read root i-node&quot;</span>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    mi-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a> += 3 ;  <span class="comment">/* NOTE! it is logically used 4 times, not 1 */</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    p-&gt;<a class="code" href="structsuper__block.html#a10b199b638640af32b3685ed575f706d">s_isup</a> = p-&gt;<a class="code" href="structsuper__block.html#afa7751535fa891177a1293b7481c8143">s_imount</a> = mi;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a66b96e2cff9937ecdba35d1787a6a099">pwd</a> = mi;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a7e465a232e068e5bf74d8b389b8e82ed">root</a> = mi;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#affb9fc32698fab7f7b36e0cf8e64c83e">free</a>=0;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    i=p-&gt;<a class="code" href="structsuper__block.html#af1eaf15b83b7ff78caa744a06d886df1">s_nzones</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">while</span> (-- i &gt;= 0)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a0b6d71a3a84984e6ed366e47130ddce8">set_bit</a>(i&amp;8191,p-&gt;<a class="code" href="structsuper__block.html#afc1b80e3027ce66241e90e87f591461c">s_zmap</a>[i&gt;&gt;13]-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>))</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#affb9fc32698fab7f7b36e0cf8e64c83e">free</a>++;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;%d/%d free blocks\n\r&quot;</span>,<a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#affb9fc32698fab7f7b36e0cf8e64c83e">free</a>,p-&gt;<a class="code" href="structsuper__block.html#af1eaf15b83b7ff78caa744a06d886df1">s_nzones</a>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#affb9fc32698fab7f7b36e0cf8e64c83e">free</a>=0;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    i=p-&gt;<a class="code" href="structsuper__block.html#a5ca86c1e3191a276a76a655ac97a8bf4">s_ninodes</a>+1;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">while</span> (-- i &gt;= 0)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a0b6d71a3a84984e6ed366e47130ddce8">set_bit</a>(i&amp;8191,p-&gt;<a class="code" href="structsuper__block.html#a8a6d83068c78a2363c92ebf73566ce5f">s_imap</a>[i&gt;&gt;13]-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>))</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#affb9fc32698fab7f7b36e0cf8e64c83e">free</a>++;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;%d/%d free inodes\n\r&quot;</span>,<a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#affb9fc32698fab7f7b36e0cf8e64c83e">free</a>,p-&gt;<a class="code" href="structsuper__block.html#a5ca86c1e3191a276a76a655ac97a8bf4">s_ninodes</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2file__table_8c_html_ad8a0a8efe57313ad9d7359e5653ed901"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2file__table_8c.html#ad8a0a8efe57313ad9d7359e5653ed901">file_table</a></div><div class="ttdeci">struct file file_table[NR_FILE]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2file__table_8c_source.html#l00001">file_table.c:9</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2inode_8c_html_a78b297f206aacdb913d2db4db1ef6689"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689">iget</a></div><div class="ttdeci">struct m_inode * iget(int dev, int nr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00244">inode.c:244</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2super_8c_html_a0b6d71a3a84984e6ed366e47130ddce8"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2super_8c.html#a0b6d71a3a84984e6ed366e47130ddce8">set_bit</a></div><div class="ttdeci">#define set_bit(bitnr, addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00022">super.c:22</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2super_8c_html_a458d21c73fc4113236898d9afa004ed4"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2super_8c.html#a458d21c73fc4113236898d9afa004ed4">wait_for_keypress</a></div><div class="ttdeci">void wait_for_keypress(void)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2chr__drv_2tty__io_8c_source.html#l00140">tty_io.c:140</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2super_8c_html_abd49a5c5f108e9b275586df332564e38"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38">read_super</a></div><div class="ttdeci">static struct super_block * read_super(int dev)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00100">super.c:100</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2super_8c_html_adc981cc78759e83089d9809fd54d2d52"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2super_8c.html#adc981cc78759e83089d9809fd54d2d52">ROOT_DEV</a></div><div class="ttdeci">int ROOT_DEV</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00029">super.c:29</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_a13d1daac91a4ebfc4511bbe85d15d360"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a13d1daac91a4ebfc4511bbe85d15d360">NR_FILE</a></div><div class="ttdeci">#define NR_FILE</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00045">fs.h:45</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2kernel_8h_html_affb9fc32698fab7f7b36e0cf8e64c83e"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#affb9fc32698fab7f7b36e0cf8e64c83e">free</a></div><div class="ttdeci">#define free(x)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2kernel_8h_source.html#l00012">kernel.h:12</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a476ec09a598028a09942c2233aa5127e"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a></div><div class="ttdeci">struct task_struct * current</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00062">sched.c:62</a></div></div>
<div class="ttc" id="astructd__inode_html"><div class="ttname"><a href="structd__inode.html">d_inode</a></div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00083">fs.h:83</a></div></div>
<div class="ttc" id="astructsuper__block_html_a10b199b638640af32b3685ed575f706d"><div class="ttname"><a href="structsuper__block.html#a10b199b638640af32b3685ed575f706d">super_block::s_isup</a></div><div class="ttdeci">struct m_inode * s_isup</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00137">fs.h:137</a></div></div>
<div class="ttc" id="astructsuper__block_html_a407ac10fa82d5f79f50287c0d668ebc3"><div class="ttname"><a href="structsuper__block.html#a407ac10fa82d5f79f50287c0d668ebc3">super_block::s_lock</a></div><div class="ttdeci">unsigned char s_lock</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00141">fs.h:141</a></div></div>
<div class="ttc" id="astructsuper__block_html_aa06dfd80dfcb6805ce2556d07ddc4da1"><div class="ttname"><a href="structsuper__block.html#aa06dfd80dfcb6805ce2556d07ddc4da1">super_block::s_wait</a></div><div class="ttdeci">struct task_struct * s_wait</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00140">fs.h:140</a></div></div>
<div class="ttc" id="astructsuper__block_html_afa7751535fa891177a1293b7481c8143"><div class="ttname"><a href="structsuper__block.html#afa7751535fa891177a1293b7481c8143">super_block::s_imount</a></div><div class="ttdeci">struct m_inode * s_imount</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00138">fs.h:138</a></div></div>
<div class="ttc" id="astructtask__struct_html_a66b96e2cff9937ecdba35d1787a6a099"><div class="ttname"><a href="structtask__struct.html#a66b96e2cff9937ecdba35d1787a6a099">task_struct::pwd</a></div><div class="ttdeci">struct m_inode * pwd</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00100">sched.h:100</a></div></div>
<div class="ttc" id="astructtask__struct_html_a7e465a232e068e5bf74d8b389b8e82ed"><div class="ttname"><a href="structtask__struct.html#a7e465a232e068e5bf74d8b389b8e82ed">task_struct::root</a></div><div class="ttdeci">struct m_inode * root</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00101">sched.h:101</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a516f58ff075ed9e15bb77645c5d55b56_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a516f58ff075ed9e15bb77645c5d55b56_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a516f58ff075ed9e15bb77645c5d55b56_cgraph" id="asrc_2include_2linux_2fs_8h_a516f58ff075ed9e15bb77645c5d55b56_cgraph">
<area shape="rect" title=" " alt="" coords="5,372,103,399"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="197,1157,244,1184"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="2085,689,2142,716"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="2212,1411,2272,1437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="653,372,748,399"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a458d21c73fc4113236898d9afa004ed4" title=" " alt="" coords="151,251,291,277"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="633,1740,768,1767"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="1695,1411,1811,1437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="377,1157,423,1184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="843,853,937,880"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158" title=" " alt="" coords="1184,1765,1260,1792"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="841,1208,939,1235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ad90bdec45596b60ad4a6e7fc0d669bd4" title=" " alt="" coords="1359,1765,1418,1792"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="2201,689,2283,716"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="2331,1411,2403,1437"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="2455,1360,2527,1387"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="2451,1411,2532,1437"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="2462,1461,2521,1488"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1902,929,1982,956"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="2073,460,2153,487"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="1041,1056,1099,1083"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="1191,803,1253,829"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="1179,701,1265,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1024,1208,1116,1235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="1016,853,1124,880"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1519,1056,1637,1083"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="1191,1005,1253,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="1531,1259,1625,1285"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1349,600,1428,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="1533,1005,1623,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="1328,1056,1449,1083"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="1316,904,1461,931"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="1347,1259,1430,1285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="1527,1411,1629,1437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="1695,904,1811,931"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3d90ed0df8a21fff7ae1e1a47053e406" title=" " alt="" coords="1025,1613,1115,1640"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#a6b87a284a258fa3893dc88c0fcd6f610" title=" " alt="" coords="1709,347,1796,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="509,1107,585,1133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="1025,1107,1115,1133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="659,1056,742,1083"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="853,1005,927,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a53eefc9fcd3ae0cc20ec6eeea2dd6d44" title=" " alt="" coords="816,195,964,221"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a1f4011b4e7734262f636282bc641139c" title=" " alt="" coords="1177,296,1267,323"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a3f4f567cec35d4d407a20030574e7024" title=" " alt="" coords="1176,347,1268,373"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#abe1936a56cbf6ac4fb9d685078f38e9c" title=" " alt="" coords="1012,144,1128,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#acea2962102f7d035a1778ac7ca18c538" title=" " alt="" coords="1319,549,1458,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aaab8557dc3b2ebf624bb29642d0753c6" title=" " alt="" coords="1509,93,1647,120"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7d20b074bcbc61719507a1f8e55b0606" title=" " alt="" coords="1027,296,1113,323"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a1e7f1f0c2e37cb25f642125fb32ffcec" title=" " alt="" coords="1859,245,2025,272"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2tty__io_8c.html#a95a4702b2b80a770e8e6091a62efa991" title=" " alt="" coords="339,181,461,208"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a516f58ff075ed9e15bb77645c5d55b56_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a516f58ff075ed9e15bb77645c5d55b56_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a516f58ff075ed9e15bb77645c5d55b56_icgraph" id="asrc_2include_2linux_2fs_8h_a516f58ff075ed9e15bb77645c5d55b56_icgraph">
<area shape="rect" title=" " alt="" coords="140,5,237,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="5,5,92,32"/>
</map>
</div>

</div>
</div>
<a id="ae192f1ee0225a7a7c86385b7bf653ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae192f1ee0225a7a7c86385b7bf653ac2">&#9670;&nbsp;</a></span>namei()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structm__inode.html">m_inode</a>* namei </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pathname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2namei_8c_source.html#l00303">303</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2namei_8c_source.html">namei.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> * basename;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">int</span> inr,dev,namelen;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keyword">struct </span><a class="code" href="structm__inode.html">m_inode</a> * dir;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> * bh;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdir__entry.html">dir_entry</a> * de;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> (!(dir = <a class="code" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01">dir_namei</a>(pathname,&amp;namelen,&amp;basename)))</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> (!namelen)           <span class="comment">/* special case: &#39;/usr/&#39; etc */</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">return</span> dir;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    bh = <a class="code" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed">find_entry</a>(&amp;dir,basename,namelen,&amp;de);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (!bh) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(dir);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    inr = de-&gt;<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    dev = dir-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7">brelse</a>(bh);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(dir);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    dir=<a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689">iget</a>(dev,inr);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (dir) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        dir-&gt;<a class="code" href="structm__inode.html#a520648e8cf3857e485b6396fb4c2c048">i_atime</a>=<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a61eabc8e73414cfe55910effa8bcc4ef">CURRENT_TIME</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        dir-&gt;<a class="code" href="structm__inode.html#a49ce7269d6c0e0836f6f14aed8a640f6">i_dirt</a>=1;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">return</span> dir;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2namei_8c_html_a13fdfb79df1bf5e5f9b0db0b484e26ed"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed">find_entry</a></div><div class="ttdeci">static struct buffer_head * find_entry(struct m_inode **dir, const char *name, int namelen, struct dir_entry **res_dir)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2namei_8c_source.html#l00091">namei.c:91</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2namei_8c_html_ae932b00aa69ebad7e231776a4da1fb01"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01">dir_namei</a></div><div class="ttdeci">static struct m_inode * dir_namei(const char *pathname, int *namelen, const char **name)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2namei_8c_source.html#l00278">namei.c:278</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a61eabc8e73414cfe55910effa8bcc4ef"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a61eabc8e73414cfe55910effa8bcc4ef">CURRENT_TIME</a></div><div class="ttdeci">#define CURRENT_TIME</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00144">sched.h:144</a></div></div>
<div class="ttc" id="astructdir__entry_html"><div class="ttname"><a href="structdir__entry.html">dir_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00157">fs.h:157</a></div></div>
<div class="ttc" id="astructdir__entry_html_ae6b0ce59b8c48897f974bac06b47b4ee"><div class="ttname"><a href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">dir_entry::inode</a></div><div class="ttdeci">unsigned short inode</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00158">fs.h:158</a></div></div>
<div class="ttc" id="astructm__inode_html_a520648e8cf3857e485b6396fb4c2c048"><div class="ttname"><a href="structm__inode.html#a520648e8cf3857e485b6396fb4c2c048">m_inode::i_atime</a></div><div class="ttdeci">unsigned long i_atime</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00103">fs.h:103</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ae192f1ee0225a7a7c86385b7bf653ac2_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ae192f1ee0225a7a7c86385b7bf653ac2_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ae192f1ee0225a7a7c86385b7bf653ac2_cgraph" id="asrc_2include_2linux_2fs_8h_ae192f1ee0225a7a7c86385b7bf653ac2_cgraph">
<area shape="rect" title=" " alt="" coords="5,490,68,516"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="1892,664,1955,691"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="116,158,203,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="369,490,456,516"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="534,715,581,742"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="389,1855,436,1882"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="2415,1374,2473,1400"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="2025,1247,2144,1274"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="2045,664,2124,691"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="2543,2083,2603,2110"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="2532,1374,2613,1400"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="2661,2083,2733,2110"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="2786,2032,2858,2059"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="2781,2083,2863,2110"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="2793,2134,2851,2160"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="2234,1627,2314,1654"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="2404,1627,2484,1654"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="251,158,317,184"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2asm_2segment_8h.html#a5f273be4f36ebf76067d04592954aaf4" title=" " alt="" coords="508,6,607,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae9af778bfaaa63724d29d5391fc458cc" title=" " alt="" coords="365,107,460,134"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a608309a4a886522767be4646f5c709cc" title=" " alt="" coords="663,522,722,548"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="1068,867,1127,894"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="1880,1779,1967,1806"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a9c1cc95fda9aa6082c0ae683b97eaaa3" title=" " alt="" coords="526,471,589,498"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="923,522,990,548"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="1052,563,1143,590"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="1205,1070,1267,1096"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="1543,1576,1637,1603"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="1545,1070,1635,1096"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="1341,1171,1463,1198"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="1329,1019,1475,1046"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="2192,1120,2356,1147"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="1361,1526,1443,1552"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="1539,1526,1641,1552"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="2027,1576,2142,1603"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="1705,1931,1821,1958"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="1714,1374,1813,1400"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1877,1627,1969,1654"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="1869,816,1977,843"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="2027,1728,2143,1755"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3d90ed0df8a21fff7ae1e1a47053e406" title=" " alt="" coords="1718,2032,1809,2059"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#a6b87a284a258fa3893dc88c0fcd6f610" title=" " alt="" coords="2231,107,2317,134"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="655,892,731,919"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158" title=" " alt="" coords="1885,2083,1961,2110"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ad90bdec45596b60ad4a6e7fc0d669bd4" title=" " alt="" coords="2055,2083,2114,2110"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="1191,1526,1281,1552"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="779,918,861,944"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="919,867,994,894"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="1523,2032,1657,2059"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="909,1576,1004,1603"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ae192f1ee0225a7a7c86385b7bf653ac2_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ae192f1ee0225a7a7c86385b7bf653ac2_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ae192f1ee0225a7a7c86385b7bf653ac2_icgraph" id="asrc_2include_2linux_2fs_8h_ae192f1ee0225a7a7c86385b7bf653ac2_icgraph">
<area shape="rect" title=" " alt="" coords="155,259,217,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="11,5,101,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="9,56,103,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="15,107,97,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="9,157,103,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="9,208,103,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="10,259,102,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="19,309,93,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="9,360,103,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="18,411,94,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="5,461,107,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="11,512,101,539"/>
</map>
</div>

</div>
</div>
<a id="a3f051047ee70eb8464844e3ab6b430af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f051047ee70eb8464844e3ab6b430af">&#9670;&nbsp;</a></span>new_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int new_block </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00074">74</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html">bitmap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                       {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *bh;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *sb;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">int</span> i, j;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (!(sb = <a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba">get_super</a>(dev)))</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;trying to get new block from nonexistant device&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    j = 8192;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 8; i++)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">if</span> ((bh = sb-&gt;<a class="code" href="structsuper__block.html#afc1b80e3027ce66241e90e87f591461c">s_zmap</a>[i]))</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keywordflow">if</span> ((j = <a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aeb9b92e028e787ffdd86a4fbd13ae5ce">find_first_zero</a>(bh-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>)) &lt; 8192)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (i &gt;= 8 || !bh || j &gt;= 8192)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa1092889a966f906260044e4291f4fce">set_bit</a>(j, bh-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>))</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;new_block: bit already set&quot;</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a> = 1;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    j += i * 8192 + sb-&gt;<a class="code" href="structsuper__block.html#a9858823313b4f27a8e7b812430ea207f">s_firstdatazone</a> - 1;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> (j &gt;= sb-&gt;<a class="code" href="structsuper__block.html#af1eaf15b83b7ff78caa744a06d886df1">s_nzones</a>)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (!(bh = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0">getblk</a>(dev, j)))</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;new_block: cannot get block&quot;</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a8cf19a3dd55cd77c824a4dd0ffe7431d">b_count</a> != 1)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;new block: count is != 1&quot;</span>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a15343236d096cf0c950b30c25de7f37a">clear_block</a>(bh-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#a7a168066dcdedf2f6b76fce2d1066000">b_uptodate</a> = 1;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a> = 1;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7">brelse</a>(bh);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> j;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2bitmap_8c_html_a15343236d096cf0c950b30c25de7f37a"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a15343236d096cf0c950b30c25de7f37a">clear_block</a></div><div class="ttdeci">#define clear_block(addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00013">bitmap.c:13</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2bitmap_8c_html_aa1092889a966f906260044e4291f4fce"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa1092889a966f906260044e4291f4fce">set_bit</a></div><div class="ttdeci">#define set_bit(nr, addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00019">bitmap.c:19</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2bitmap_8c_html_aeb9b92e028e787ffdd86a4fbd13ae5ce"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aeb9b92e028e787ffdd86a4fbd13ae5ce">find_first_zero</a></div><div class="ttdeci">#define find_first_zero(addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00031">bitmap.c:31</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a3f051047ee70eb8464844e3ab6b430af_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a3f051047ee70eb8464844e3ab6b430af_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a3f051047ee70eb8464844e3ab6b430af_cgraph" id="asrc_2include_2linux_2fs_8h_a3f051047ee70eb8464844e3ab6b430af_cgraph">
<area shape="rect" title=" " alt="" coords="5,245,96,272"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="1007,296,1069,323"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1609,220,1666,247"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="835,853,921,880"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="144,448,207,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1144,588,1263,615"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1470,347,1549,373"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1736,397,1796,424"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1725,220,1807,247"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1855,397,1927,424"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1979,347,2051,373"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1975,397,2056,424"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1986,448,2045,475"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1469,727,1549,753"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1597,727,1677,753"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="980,853,1096,880"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="485,397,575,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="267,448,388,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="255,752,400,779"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="448,195,612,221"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="286,524,369,551"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="991,397,1085,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="479,549,581,576"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1146,524,1261,551"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1315,549,1417,576"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1319,600,1413,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1311,448,1421,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="660,651,776,677"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="669,397,767,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="849,347,907,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1157,689,1249,716"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="824,397,932,424"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a3f051047ee70eb8464844e3ab6b430af_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a3f051047ee70eb8464844e3ab6b430af_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a3f051047ee70eb8464844e3ab6b430af_icgraph" id="asrc_2include_2linux_2fs_8h_a3f051047ee70eb8464844e3ab6b430af_icgraph">
<area shape="rect" title=" " alt="" coords="1100,563,1191,589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="985,537,1052,564"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,537,383,564"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a608309a4a886522767be4646f5c709cc" title=" " alt="" coords="879,436,937,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a3704034fc57e100765395733a0a72321" title=" " alt="" coords="577,740,683,767"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="731,487,831,513"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="586,183,674,209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="741,436,820,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="737,385,824,412"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="295,233,381,260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="597,436,663,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="307,284,369,311"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="151,512,225,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,639,389,665"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,487,386,513"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="293,385,383,412"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="440,436,527,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="143,208,233,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="141,259,235,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="147,309,229,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="141,360,235,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="141,411,235,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="142,461,234,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="141,5,235,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="150,56,226,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="137,107,239,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="143,157,233,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="147,639,229,665"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,639,89,665"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="437,791,529,817"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="440,639,527,665"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="442,740,525,767"/>
<area shape="rect" href="src_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,765,389,792"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="301,816,375,843"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,867,383,893"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,715,386,741"/>
</map>
</div>

</div>
</div>
<a id="aa17030f2c3706317c68a4552b2d8f61e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa17030f2c3706317c68a4552b2d8f61e">&#9670;&nbsp;</a></span>new_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structm__inode.html">m_inode</a>* new_inode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00133">133</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html">bitmap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                   {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keyword">struct </span><a class="code" href="structm__inode.html">m_inode</a> *inode;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *sb;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *bh;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">int</span> i, j;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (!(inode = <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989">get_empty_inode</a>()))</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (!(sb = <a class="code" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba">get_super</a>(dev)))</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;new_inode with unknown device&quot;</span>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    j = 8192;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 8; i++)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">if</span> ((bh = sb-&gt;<a class="code" href="structsuper__block.html#a8a6d83068c78a2363c92ebf73566ce5f">s_imap</a>[i]))</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">if</span> ((j = <a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aeb9b92e028e787ffdd86a4fbd13ae5ce">find_first_zero</a>(bh-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>)) &lt; 8192)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (!bh || j &gt;= 8192 || j + i * 8192 &gt; sb-&gt;<a class="code" href="structsuper__block.html#a5ca86c1e3191a276a76a655ac97a8bf4">s_ninodes</a>) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(inode);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa1092889a966f906260044e4291f4fce">set_bit</a>(j, bh-&gt;<a class="code" href="structbuffer__head.html#aa9e1a6e4f33e0d10c1d210b105212faf">b_data</a>))</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;new_inode: bit already set&quot;</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a> = 1;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a2a639e88f4a46ff1bff2078aef2f6839">i_count</a> = 1;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a844dbde82fceb30c92a79e3d3b8f2f0f">i_nlinks</a> = 1;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a> = dev;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#ad83b88391e00d6d78725c5b247bbe490">i_uid</a> = <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a6b38eba448cc0f45a2b49404daf0c52e">euid</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#acc04fc74f923841f8b6083284a6e1884">i_gid</a> = <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#adcb9e4efc2b55fd489bcf687399d2cc9">egid</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a49ce7269d6c0e0836f6f14aed8a640f6">i_dirt</a> = 1;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a939c155d0ad423600b89cfff65dbc8d6">i_num</a> = j + i * 8192;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a14bbd28dd778926da9a6688bd1ea0fea">i_mtime</a> = inode-&gt;<a class="code" href="structm__inode.html#a520648e8cf3857e485b6396fb4c2c048">i_atime</a> = inode-&gt;<a class="code" href="structm__inode.html#a50157b5c9346b2e6d448225d67d07de0">i_ctime</a> = <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a61eabc8e73414cfe55910effa8bcc4ef">CURRENT_TIME</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> inode;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="ttc" id="astructm__inode_html_a14bbd28dd778926da9a6688bd1ea0fea"><div class="ttname"><a href="structm__inode.html#a14bbd28dd778926da9a6688bd1ea0fea">m_inode::i_mtime</a></div><div class="ttdeci">unsigned long i_mtime</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00097">fs.h:97</a></div></div>
<div class="ttc" id="astructm__inode_html_a50157b5c9346b2e6d448225d67d07de0"><div class="ttname"><a href="structm__inode.html#a50157b5c9346b2e6d448225d67d07de0">m_inode::i_ctime</a></div><div class="ttdeci">unsigned long i_ctime</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00104">fs.h:104</a></div></div>
<div class="ttc" id="astructm__inode_html_acc04fc74f923841f8b6083284a6e1884"><div class="ttname"><a href="structm__inode.html#acc04fc74f923841f8b6083284a6e1884">m_inode::i_gid</a></div><div class="ttdeci">unsigned char i_gid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00098">fs.h:98</a></div></div>
<div class="ttc" id="astructm__inode_html_ad83b88391e00d6d78725c5b247bbe490"><div class="ttname"><a href="structm__inode.html#ad83b88391e00d6d78725c5b247bbe490">m_inode::i_uid</a></div><div class="ttdeci">unsigned short i_uid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00095">fs.h:95</a></div></div>
<div class="ttc" id="astructtask__struct_html_a6b38eba448cc0f45a2b49404daf0c52e"><div class="ttname"><a href="structtask__struct.html#a6b38eba448cc0f45a2b49404daf0c52e">task_struct::euid</a></div><div class="ttdeci">unsigned short euid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00092">sched.h:92</a></div></div>
<div class="ttc" id="astructtask__struct_html_adcb9e4efc2b55fd489bcf687399d2cc9"><div class="ttname"><a href="structtask__struct.html#adcb9e4efc2b55fd489bcf687399d2cc9">task_struct::egid</a></div><div class="ttdeci">unsigned short egid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00093">sched.h:93</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_aa17030f2c3706317c68a4552b2d8f61e_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_aa17030f2c3706317c68a4552b2d8f61e_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_aa17030f2c3706317c68a4552b2d8f61e_cgraph" id="asrc_2include_2linux_2fs_8h_aa17030f2c3706317c68a4552b2d8f61e_cgraph">
<area shape="rect" title=" " alt="" coords="5,1098,97,1125"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="375,1326,509,1353"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1889,350,1946,377"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="843,1161,929,1188"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="145,984,192,1010"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158" title=" " alt="" coords="848,1364,924,1390"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="2016,1148,2076,1174"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="1337,1402,1453,1429"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="557,984,656,1010"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ad90bdec45596b60ad4a6e7fc0d669bd4" title=" " alt="" coords="1021,1364,1079,1390"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2asm_2segment_8h.html#ab949f1c5413544f8204e5a3338655af5" title=" " alt="" coords="1181,1364,1279,1390"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="2005,350,2087,377"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="2135,1148,2207,1174"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="2259,1097,2331,1124"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="2255,1148,2336,1174"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="2266,1198,2325,1225"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1707,1085,1787,1112"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1877,1085,1957,1112"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="720,654,779,681"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="855,376,917,402"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1349,1262,1441,1289"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="1341,601,1449,628"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1171,756,1289,782"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="855,654,917,681"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="1183,1085,1277,1112"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1708,516,1787,542"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="1185,590,1275,617"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="989,705,1111,732"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="977,604,1123,630"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="1665,440,1829,466"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="1009,1060,1091,1086"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="1179,1262,1281,1289"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1338,933,1453,960"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1508,857,1611,884"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1512,1009,1607,1036"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1504,908,1615,934"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="1501,1161,1617,1188"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3d90ed0df8a21fff7ae1e1a47053e406" title=" " alt="" coords="704,1313,795,1340"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#a6b87a284a258fa3893dc88c0fcd6f610" title=" " alt="" coords="240,161,327,188"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="245,705,321,732"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="704,705,795,732"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="401,654,483,681"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="569,604,644,630"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_aa17030f2c3706317c68a4552b2d8f61e_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_aa17030f2c3706317c68a4552b2d8f61e_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_aa17030f2c3706317c68a4552b2d8f61e_icgraph" id="asrc_2include_2linux_2fs_8h_aa17030f2c3706317c68a4552b2d8f61e_icgraph">
<area shape="rect" title=" " alt="" coords="419,56,511,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="268,5,371,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="275,56,364,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="271,107,367,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="137,5,220,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,5,89,32"/>
</map>
</div>

</div>
</div>
<a id="ad08df58f033bd23ea1315499d697a3b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad08df58f033bd23ea1315499d697a3b0">&#9670;&nbsp;</a></span>open_namei()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int open_namei </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pathname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structm__inode.html">m_inode</a> **&#160;</td>
          <td class="paramname"><em>res_inode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2namei_8c_source.html#l00337">337</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2namei_8c_source.html">namei.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> * basename;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">int</span> inr,dev,namelen;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keyword">struct </span><a class="code" href="structm__inode.html">m_inode</a> * dir, *inode;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> * bh;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdir__entry.html">dir_entry</a> * de;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> ((flag &amp; <a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#ad1d67e453fb3031f40f8cd3403773813">O_TRUNC</a>) &amp;&amp; !(flag &amp; <a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#a4dc4d45e07d2abc899bcaf04b2846a87">O_ACCMODE</a>))</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        flag |= <a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#a11b644a8526139c4cc1850dac1271ced">O_WRONLY</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    mode &amp;= 0777 &amp; ~<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#abf43499dd7c78bfaee0fdc3fc0d94488">umask</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    mode |= <a class="code" href="flash_2Linux-0_811_2include_2const_8h.html#aa62245ebe1e107a93d9b7ffe55617dff">I_REGULAR</a>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (!(dir = <a class="code" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01">dir_namei</a>(pathname,&amp;namelen,&amp;basename)))</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="flash_2Linux-0_811_2include_2errno_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (!namelen) {         <span class="comment">/* special case: &#39;/usr/&#39; etc */</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">if</span> (!(flag &amp; (<a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#a4dc4d45e07d2abc899bcaf04b2846a87">O_ACCMODE</a>|<a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#a1cf6b1de1fffedaa1d26b189e9a8d2cc">O_CREAT</a>|<a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#ad1d67e453fb3031f40f8cd3403773813">O_TRUNC</a>))) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            *res_inode=dir;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(dir);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="flash_2Linux-0_811_2include_2errno_8h.html#ae22c3a1e0a38f3896de238cc30d0e19b">EISDIR</a>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    bh = <a class="code" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed">find_entry</a>(&amp;dir,basename,namelen,&amp;de);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (!bh) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> (!(flag &amp; <a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#a1cf6b1de1fffedaa1d26b189e9a8d2cc">O_CREAT</a>)) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(dir);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="flash_2Linux-0_811_2include_2errno_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae9af778bfaaa63724d29d5391fc458cc">permission</a>(dir,<a class="code" href="flash_2Linux-0_811_2fs_2namei_8c.html#aab568dbcaa818aedb9385f4bbafbdc51">MAY_WRITE</a>)) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(dir);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="flash_2Linux-0_811_2include_2errno_8h.html#ac2a2e9fa555401f94478f74e01868032">EACCES</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a> = <a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e">new_inode</a>(dir-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(dir);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="flash_2Linux-0_811_2include_2errno_8h.html#a088abe8bad2df798edad3053d719b937">ENOSPC</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>-&gt;i_uid = <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a6b38eba448cc0f45a2b49404daf0c52e">euid</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>-&gt;i_mode = mode;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>-&gt;i_dirt = 1;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        bh = <a class="code" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db">add_entry</a>(dir,basename,namelen,&amp;de);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span> (!bh) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>-&gt;i_nlinks--;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(dir);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="flash_2Linux-0_811_2include_2errno_8h.html#a088abe8bad2df798edad3053d719b937">ENOSPC</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        de-&gt;<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a> = <a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>-&gt;i_num;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a> = 1;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7">brelse</a>(bh);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(dir);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        *res_inode = <a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    inr = de-&gt;<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    dev = dir-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7">brelse</a>(bh);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(dir);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span> (flag &amp; <a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#a9f5acfe79fafe14b6694447bd0e9f10b">O_EXCL</a>)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="flash_2Linux-0_811_2include_2errno_8h.html#a0a3bef9e5c47e42917692b5dae3b5498">EEXIST</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>=<a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689">iget</a>(dev,inr)))</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="flash_2Linux-0_811_2include_2errno_8h.html#ac2a2e9fa555401f94478f74e01868032">EACCES</a>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="flash_2Linux-0_811_2include_2sys_2stat_8h.html#a70b64ed67c0ab484b4ba09487da34e91">S_ISDIR</a>(<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>-&gt;i_mode) &amp;&amp; (flag &amp; <a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#a4dc4d45e07d2abc899bcaf04b2846a87">O_ACCMODE</a>)) ||</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        !<a class="code" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae9af778bfaaa63724d29d5391fc458cc">permission</a>(<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>,<a class="code" href="flash_2Linux-0_811_2fs_2namei_8c.html#aa2abca8919beb5dcb28b9c3c7291628f">ACC_MODE</a>(flag))) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40">iput</a>(<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="flash_2Linux-0_811_2include_2errno_8h.html#add669d31505a077f769cff8e66c780b3">EPERM</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>-&gt;i_atime = <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a61eabc8e73414cfe55910effa8bcc4ef">CURRENT_TIME</a>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (flag &amp; <a class="code" href="flash_2Linux-0_811_2include_2fcntl_8h.html#ad1d67e453fb3031f40f8cd3403773813">O_TRUNC</a>)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23">truncate</a>(<a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    *res_inode = <a class="code" href="structdir__entry.html#ae6b0ce59b8c48897f974bac06b47b4ee">inode</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2bitmap_8c_html_aa17030f2c3706317c68a4552b2d8f61e"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e">new_inode</a></div><div class="ttdeci">struct m_inode * new_inode(int dev)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00133">bitmap.c:133</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2namei_8c_html_a3d23fd77008f787f6d7d80ed7e30d1db"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db">add_entry</a></div><div class="ttdeci">static struct buffer_head * add_entry(struct m_inode *dir, const char *name, int namelen, struct dir_entry **res_dir)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2namei_8c_source.html#l00165">namei.c:165</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2namei_8c_html_aa2abca8919beb5dcb28b9c3c7291628f"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2namei_8c.html#aa2abca8919beb5dcb28b9c3c7291628f">ACC_MODE</a></div><div class="ttdeci">#define ACC_MODE(x)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2namei_8c_source.html#l00021">namei.c:21</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2namei_8c_html_aab568dbcaa818aedb9385f4bbafbdc51"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2namei_8c.html#aab568dbcaa818aedb9385f4bbafbdc51">MAY_WRITE</a></div><div class="ttdeci">#define MAY_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2namei_8c_source.html#l00030">namei.c:30</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2namei_8c_html_ae9af778bfaaa63724d29d5391fc458cc"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2namei_8c.html#ae9af778bfaaa63724d29d5391fc458cc">permission</a></div><div class="ttdeci">static int permission(struct m_inode *inode, int mask)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2namei_8c_source.html#l00040">namei.c:40</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2const_8h_html_aa62245ebe1e107a93d9b7ffe55617dff"><div class="ttname"><a href="flash_2Linux-0_811_2include_2const_8h.html#aa62245ebe1e107a93d9b7ffe55617dff">I_REGULAR</a></div><div class="ttdeci">#define I_REGULAR</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2const_8h_source.html#l00008">const.h:8</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2errno_8h_html_a03e689f378f643d16ea7537918528a48"><div class="ttname"><a href="flash_2Linux-0_811_2include_2errno_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a></div><div class="ttdeci">#define ENOENT</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2errno_8h_source.html#l00021">errno.h:21</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2errno_8h_html_a088abe8bad2df798edad3053d719b937"><div class="ttname"><a href="flash_2Linux-0_811_2include_2errno_8h.html#a088abe8bad2df798edad3053d719b937">ENOSPC</a></div><div class="ttdeci">#define ENOSPC</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2errno_8h_source.html#l00047">errno.h:47</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2errno_8h_html_a0a3bef9e5c47e42917692b5dae3b5498"><div class="ttname"><a href="flash_2Linux-0_811_2include_2errno_8h.html#a0a3bef9e5c47e42917692b5dae3b5498">EEXIST</a></div><div class="ttdeci">#define EEXIST</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2errno_8h_source.html#l00036">errno.h:36</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2errno_8h_html_ac2a2e9fa555401f94478f74e01868032"><div class="ttname"><a href="flash_2Linux-0_811_2include_2errno_8h.html#ac2a2e9fa555401f94478f74e01868032">EACCES</a></div><div class="ttdeci">#define EACCES</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2errno_8h_source.html#l00032">errno.h:32</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2errno_8h_html_add669d31505a077f769cff8e66c780b3"><div class="ttname"><a href="flash_2Linux-0_811_2include_2errno_8h.html#add669d31505a077f769cff8e66c780b3">EPERM</a></div><div class="ttdeci">#define EPERM</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2errno_8h_source.html#l00020">errno.h:20</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2errno_8h_html_ae22c3a1e0a38f3896de238cc30d0e19b"><div class="ttname"><a href="flash_2Linux-0_811_2include_2errno_8h.html#ae22c3a1e0a38f3896de238cc30d0e19b">EISDIR</a></div><div class="ttdeci">#define EISDIR</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2errno_8h_source.html#l00040">errno.h:40</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2fcntl_8h_html_a11b644a8526139c4cc1850dac1271ced"><div class="ttname"><a href="flash_2Linux-0_811_2include_2fcntl_8h.html#a11b644a8526139c4cc1850dac1271ced">O_WRONLY</a></div><div class="ttdeci">#define O_WRONLY</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2fcntl_8h_source.html#l00009">fcntl.h:9</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2fcntl_8h_html_a1cf6b1de1fffedaa1d26b189e9a8d2cc"><div class="ttname"><a href="flash_2Linux-0_811_2include_2fcntl_8h.html#a1cf6b1de1fffedaa1d26b189e9a8d2cc">O_CREAT</a></div><div class="ttdeci">#define O_CREAT</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2fcntl_8h_source.html#l00011">fcntl.h:11</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2fcntl_8h_html_a4dc4d45e07d2abc899bcaf04b2846a87"><div class="ttname"><a href="flash_2Linux-0_811_2include_2fcntl_8h.html#a4dc4d45e07d2abc899bcaf04b2846a87">O_ACCMODE</a></div><div class="ttdeci">#define O_ACCMODE</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2fcntl_8h_source.html#l00007">fcntl.h:7</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2fcntl_8h_html_a9f5acfe79fafe14b6694447bd0e9f10b"><div class="ttname"><a href="flash_2Linux-0_811_2include_2fcntl_8h.html#a9f5acfe79fafe14b6694447bd0e9f10b">O_EXCL</a></div><div class="ttdeci">#define O_EXCL</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2fcntl_8h_source.html#l00012">fcntl.h:12</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2fcntl_8h_html_ad1d67e453fb3031f40f8cd3403773813"><div class="ttname"><a href="flash_2Linux-0_811_2include_2fcntl_8h.html#ad1d67e453fb3031f40f8cd3403773813">O_TRUNC</a></div><div class="ttdeci">#define O_TRUNC</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2fcntl_8h_source.html#l00014">fcntl.h:14</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2sys_2stat_8h_html_a70b64ed67c0ab484b4ba09487da34e91"><div class="ttname"><a href="flash_2Linux-0_811_2include_2sys_2stat_8h.html#a70b64ed67c0ab484b4ba09487da34e91">S_ISDIR</a></div><div class="ttdeci">#define S_ISDIR(m)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2sys_2stat_8h_source.html#l00031">stat.h:31</a></div></div>
<div class="ttc" id="astructtask__struct_html_abf43499dd7c78bfaee0fdc3fc0d94488"><div class="ttname"><a href="structtask__struct.html#abf43499dd7c78bfaee0fdc3fc0d94488">task_struct::umask</a></div><div class="ttdeci">unsigned short umask</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00099">sched.h:99</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ad08df58f033bd23ea1315499d697a3b0_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ad08df58f033bd23ea1315499d697a3b0_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ad08df58f033bd23ea1315499d697a3b0_cgraph" id="asrc_2include_2linux_2fs_8h_ad08df58f033bd23ea1315499d697a3b0_cgraph">
<area shape="rect" title=" " alt="" coords="5,884,108,911"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="407,561,499,588"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="1939,739,2001,765"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="409,612,496,639"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="156,808,243,835"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="409,808,496,835"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="577,1676,624,1703"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a1697df39771f157846a3ef9f46327c23" title=" " alt="" coords="701,1017,777,1044"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="429,1828,476,1855"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae9af778bfaaa63724d29d5391fc458cc" title=" " alt="" coords="405,909,500,936"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="407,2233,499,2260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="1115,840,1173,867"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a3704034fc57e100765395733a0a72321" title=" " alt="" coords="548,561,653,588"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2asm_2segment_8h.html#a5f273be4f36ebf76067d04592954aaf4" title=" " alt="" coords="551,663,650,689"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="2462,941,2519,968"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="2072,1169,2191,1196"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="1251,1017,1314,1044"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="1589,1423,1684,1449"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="2092,1524,2171,1551"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="2589,2259,2649,2285"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="2579,941,2660,968"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="2708,2259,2780,2285"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="2281,1625,2361,1652"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="2451,1625,2531,1652"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="1591,1017,1682,1044"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="1388,1119,1509,1145"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="1376,967,1521,993"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="2239,967,2403,993"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="1407,1473,1490,1500"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="1585,1625,1688,1652"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="2074,1423,2189,1449"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="1752,1980,1868,2007"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="1761,1575,1859,1601"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="1927,1803,2013,1829"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1924,1625,2016,1652"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="1916,1524,2024,1551"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="2073,1727,2189,1753"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="970,663,1037,689"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="1099,663,1189,689"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="291,808,357,835"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a608309a4a886522767be4646f5c709cc" title=" " alt="" coords="710,663,769,689"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a9c1cc95fda9aa6082c0ae683b97eaaa3" title=" " alt="" coords="569,815,632,841"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3d90ed0df8a21fff7ae1e1a47053e406" title=" " alt="" coords="1765,2183,1855,2209"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2mm_8h.html#a6b87a284a258fa3893dc88c0fcd6f610" title=" " alt="" coords="2277,156,2364,183"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a24267045b7b471321172ee7ac82f5158" title=" " alt="" coords="1932,2233,2008,2260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="1237,1423,1328,1449"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="825,967,908,993"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="966,967,1041,993"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="1569,2183,1704,2209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="956,1575,1051,1601"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_ad08df58f033bd23ea1315499d697a3b0_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_ad08df58f033bd23ea1315499d697a3b0_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_ad08df58f033bd23ea1315499d697a3b0_icgraph" id="asrc_2include_2linux_2fs_8h_ad08df58f033bd23ea1315499d697a3b0_icgraph">
<area shape="rect" title=" " alt="" coords="268,5,371,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="137,5,220,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,5,89,32"/>
</map>
</div>

</div>
</div>
<a id="a95df8a2e491bf4181e3d7b6ddfc755a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95df8a2e491bf4181e3d7b6ddfc755a3">&#9670;&nbsp;</a></span>sync_dev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sync_dev </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00062">62</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                      {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">struct </span><a class="code" href="structbuffer__head.html">buffer_head</a> *bh;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    bh = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aa5809896ce36f9b7ddab0b41745cb0bc">start_buffer</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ab3fe530a64b0717f7a43e2e693e5137f">NR_BUFFERS</a>; i++, bh++) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">b_dev</a> != dev)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a>(bh);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">b_dev</a> == dev &amp;&amp; bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a>)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e">ll_rw_block</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#aa10f470e996d0f51210d24f442d25e1e">WRITE</a>, bh);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79">sync_inodes</a>();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    bh = <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aa5809896ce36f9b7ddab0b41745cb0bc">start_buffer</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ab3fe530a64b0717f7a43e2e693e5137f">NR_BUFFERS</a>; i++, bh++) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">b_dev</a> != dev)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96">wait_on_buffer</a>(bh);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">if</span> (bh-&gt;<a class="code" href="structbuffer__head.html#a664b05692473520f849dfc5a1e6bc640">b_dev</a> == dev &amp;&amp; bh-&gt;<a class="code" href="structbuffer__head.html#aba4009cce5de431452c211d36081273b">b_dirt</a>)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e">ll_rw_block</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#aa10f470e996d0f51210d24f442d25e1e">WRITE</a>, bh);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2inode_8c_html_a4e8b4c0a66f6ea10acdb053c4f4e8c79"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79">sync_inodes</a></div><div class="ttdeci">void sync_inodes(void)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00059">inode.c:59</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_aa10f470e996d0f51210d24f442d25e1e"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#aa10f470e996d0f51210d24f442d25e1e">WRITE</a></div><div class="ttdeci">#define WRITE</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00027">fs.h:27</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a95df8a2e491bf4181e3d7b6ddfc755a3_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a95df8a2e491bf4181e3d7b6ddfc755a3_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a95df8a2e491bf4181e3d7b6ddfc755a3_cgraph" id="asrc_2include_2linux_2fs_8h_a95df8a2e491bf4181e3d7b6ddfc755a3_cgraph">
<area shape="rect" title=" " alt="" coords="5,399,88,425"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="937,715,1032,741"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="136,399,239,425"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="925,360,1044,387"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1093,639,1207,665"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1765,867,1825,893"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1260,664,1363,691"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1264,563,1359,589"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1457,335,1537,361"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1638,613,1695,640"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1256,715,1367,741"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1627,335,1707,361"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1755,613,1836,640"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1884,867,1956,893"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="2009,816,2081,843"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="2004,867,2085,893"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="2015,917,2074,944"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1457,715,1536,741"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="1092,5,1208,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="287,399,385,425"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="447,436,506,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="773,208,836,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="433,157,520,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="580,183,672,209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="1096,867,1204,893"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="595,487,657,513"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="939,512,1030,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="744,461,865,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="732,512,877,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="1415,512,1579,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="763,664,846,691"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="568,107,684,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a95df8a2e491bf4181e3d7b6ddfc755a3_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a95df8a2e491bf4181e3d7b6ddfc755a3_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a95df8a2e491bf4181e3d7b6ddfc755a3_icgraph" id="asrc_2include_2linux_2fs_8h_a95df8a2e491bf4181e3d7b6ddfc755a3_icgraph">
<area shape="rect" title=" " alt="" coords="1281,1028,1364,1055"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="1171,484,1233,511"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="757,1399,804,1425"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#a9af8af96c24b2aee5f949b116decfd02" title=" " alt="" coords="877,5,975,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="1044,759,1103,785"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7bcdedc1f5ba7597461c3a49559e5b12" title=" " alt="" coords="1024,1728,1123,1755"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a1b310db1dc1e28275c0888c724d48724" title=" " alt="" coords="1040,81,1107,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="1028,208,1119,235"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="893,208,959,235"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="880,708,972,735"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="308,968,395,995"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="161,563,251,589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="11,2032,101,2059"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="737,885,825,912"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="887,860,965,887"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="885,911,967,937"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="595,791,681,817"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="739,1044,822,1071"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="889,1019,963,1045"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#afe8b61fe00bf63ea72d91f7a1d1b6d09" title=" " alt="" coords="891,107,961,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="308,107,395,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="733,600,828,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="591,107,685,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="877,1247,975,1273"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="155,1069,257,1096"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="19,943,93,969"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="158,993,254,1020"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="15,1247,97,1273"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="163,765,249,792"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="461,613,527,640"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="175,1677,237,1704"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="161,411,251,437"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="308,715,395,741"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="9,1792,103,1819"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="15,1855,97,1881"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="9,1905,103,1932"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="9,1956,103,1983"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="10,1552,102,1579"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="9,259,103,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="18,1629,94,1656"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="5,1680,107,1707"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="11,1735,101,1761"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="615,588,661,615"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="445,157,543,184"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="603,1576,673,1603"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="305,1019,397,1045"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a186ae5192f6afb2ec4fcd93cb592031d" title=" " alt="" coords="595,1475,681,1501"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ae8584b188355851cdd6f403cd5df3c12" title=" " alt="" coords="456,1576,532,1603"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="876,2133,976,2160"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#aaaa32bea7c458e274286421ec9c6266f" title=" " alt="" coords="879,56,973,83"/>
</map>
</div>

</div>
</div>
<a id="a4e8b4c0a66f6ea10acdb053c4f4e8c79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e8b4c0a66f6ea10acdb053c4f4e8c79">&#9670;&nbsp;</a></span>sync_inodes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sync_inodes </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00059">59</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html">inode.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">struct </span><a class="code" href="structm__inode.html">m_inode</a> * inode;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    inode = 0+<a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a9bf294a613d9b62d17a7b589c0feb64a">inode_table</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">for</span>(i=0 ; i&lt;<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af63c190de439b45378f43837de8a7c6a">NR_INODE</a> ; i++,inode++) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc">wait_on_inode</a>(inode);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#a49ce7269d6c0e0836f6f14aed8a640f6">i_dirt</a> &amp;&amp; !inode-&gt;<a class="code" href="structm__inode.html#a5291fbb157cbbe8abb6c3c756cd12cc5">i_pipe</a>)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197">write_inode</a>(inode);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a4e8b4c0a66f6ea10acdb053c4f4e8c79_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a4e8b4c0a66f6ea10acdb053c4f4e8c79_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a4e8b4c0a66f6ea10acdb053c4f4e8c79_cgraph" id="asrc_2include_2linux_2fs_8h_a4e8b4c0a66f6ea10acdb053c4f4e8c79_cgraph">
<area shape="rect" title=" " alt="" coords="5,607,108,634"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="961,764,1077,791"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="156,462,255,488"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1326,587,1406,614"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1507,246,1565,272"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1496,587,1576,614"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1635,511,1695,538"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1624,246,1705,272"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1753,511,1825,538"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="1878,460,1950,487"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="1873,511,1955,538"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="1885,562,1943,588"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="317,271,375,298"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="643,144,705,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="303,803,389,830"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="449,702,541,728"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="965,94,1073,120"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="795,307,913,334"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="464,372,527,399"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="807,562,901,588"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1327,144,1405,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="809,379,899,406"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="613,347,735,374"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="601,550,747,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="1284,246,1448,272"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="633,499,715,526"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="803,651,905,678"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="962,536,1077,563"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1129,511,1232,538"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1133,562,1228,588"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1125,308,1236,335"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="437,815,553,842"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a4e8b4c0a66f6ea10acdb053c4f4e8c79_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a4e8b4c0a66f6ea10acdb053c4f4e8c79_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a4e8b4c0a66f6ea10acdb053c4f4e8c79_icgraph" id="asrc_2include_2linux_2fs_8h_a4e8b4c0a66f6ea10acdb053c4f4e8c79_icgraph">
<area shape="rect" title=" " alt="" coords="1124,929,1227,956"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="993,904,1076,931"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3c674993ee07115ee464f88503882488" title=" " alt="" coords="994,955,1075,981"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="883,943,945,969"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="469,816,516,843"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#a9af8af96c24b2aee5f949b116decfd02" title=" " alt="" coords="589,1019,687,1045"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="756,512,815,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7bcdedc1f5ba7597461c3a49559e5b12" title=" " alt="" coords="736,1057,835,1084"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a1b310db1dc1e28275c0888c724d48724" title=" " alt="" coords="752,956,819,983"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="740,107,831,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="605,107,671,133"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="592,360,684,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="308,259,395,285"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="161,215,251,241"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="11,1424,101,1451"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="449,335,537,361"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="599,461,677,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="597,512,679,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="308,512,395,539"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="451,917,534,944"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="601,816,675,843"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#afe8b61fe00bf63ea72d91f7a1d1b6d09" title=" " alt="" coords="603,664,673,691"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="449,461,536,488"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="445,613,540,640"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="445,5,540,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="589,715,687,741"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="155,436,257,463"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="19,664,93,691"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="158,353,254,380"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="15,524,97,551"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="163,563,249,589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="173,613,239,640"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="175,1069,237,1096"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="161,664,251,691"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="9,1132,103,1159"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="15,1195,97,1221"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="9,1271,103,1297"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="9,1372,103,1399"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="10,920,102,947"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="9,157,103,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="18,971,94,997"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="5,1023,107,1049"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="11,1075,101,1101"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="328,613,375,640"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="316,1171,387,1197"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="305,360,397,387"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a186ae5192f6afb2ec4fcd93cb592031d" title=" " alt="" coords="309,867,394,893"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ae8584b188355851cdd6f403cd5df3c12" title=" " alt="" coords="168,1171,244,1197"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="588,1069,688,1096"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#aaaa32bea7c458e274286421ec9c6266f" title=" " alt="" coords="591,968,685,995"/>
</map>
</div>

</div>
</div>
<a id="a76e3624f11501cc29f2f180230e8741c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76e3624f11501cc29f2f180230e8741c">&#9670;&nbsp;</a></span>ticks_to_floppy_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ticks_to_floppy_on </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00206">206</a> of file <a class="el" href="flash_2Linux-0_811_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a4c0237fdbba78af703ee275cc492a8b1">selected</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mask = 0x10 &lt;&lt; nr;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (nr&gt;3)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;floppy_on: nr&gt;3&quot;</span>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ab218c7c6e6e256c43506e0c421328851">moff_timer</a>[nr]=10000;       <span class="comment">/* 100 s = very big :-) */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a68c330e94fe121eba993e5a5973c3162">cli</a>();              <span class="comment">/* use floppy_off to turn it off */</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    mask |= <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a4c0237fdbba78af703ee275cc492a8b1">selected</a>) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        mask &amp;= 0xFC;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        mask |= nr;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">if</span> (mask != <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a>) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#aff0f5d0c71d15c5888f22f86b5ca841b">outb</a>(mask,<a class="code" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a89b40b36cb9fad0b750cd7df087c920c">FD_DOR</a>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> ((mask ^ <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a>) &amp; 0xf0)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[nr] = <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a>/2;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[nr] &lt; 2)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[nr] = 2;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a> = mask;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#ac5d15f274bc9b1e96230f3d3c60fd1f8">sti</a>();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[nr];</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2io_8h_html_aff0f5d0c71d15c5888f22f86b5ca841b"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2io_8h.html#aff0f5d0c71d15c5888f22f86b5ca841b">outb</a></div><div class="ttdeci">#define outb(value, port)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2io_8h_source.html#l00001">io.h:1</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fdreg_8h_html_a89b40b36cb9fad0b750cd7df087c920c"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a89b40b36cb9fad0b750cd7df087c920c">FD_DOR</a></div><div class="ttdeci">#define FD_DOR</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fdreg_8h_source.html#l00018">fdreg.h:18</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a581bf75201a0c19048387d483845bdb5"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a></div><div class="ttdeci">unsigned char current_DOR</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00204">sched.c:204</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_afbc5015fa1359261094d4aa4d309a149"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a></div><div class="ttdeci">static int mon_timer[4]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00202">sched.c:202</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a76e3624f11501cc29f2f180230e8741c_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a76e3624f11501cc29f2f180230e8741c_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a76e3624f11501cc29f2f180230e8741c_cgraph" id="asrc_2include_2linux_2fs_8h_a76e3624f11501cc29f2f180230e8741c_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,148,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="196,81,253,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="312,56,372,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="301,107,383,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="431,56,503,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="555,5,627,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="551,56,632,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="562,107,621,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a76e3624f11501cc29f2f180230e8741c_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a76e3624f11501cc29f2f180230e8741c_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a76e3624f11501cc29f2f180230e8741c_icgraph" id="asrc_2include_2linux_2fs_8h_a76e3624f11501cc29f2f180230e8741c_icgraph">
<area shape="rect" title=" " alt="" coords="921,81,1064,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a3b9c3c3f694cbf682e4eb7724a9e6230" title=" " alt="" coords="788,81,873,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#abe1936a56cbf6ac4fb9d685078f38e9c" title=" " alt="" coords="624,81,740,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a53eefc9fcd3ae0cc20ec6eeea2dd6d44" title=" " alt="" coords="428,81,576,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="285,56,380,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="291,107,374,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="140,5,237,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="142,56,235,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="5,5,92,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="147,107,231,133"/>
</map>
</div>

</div>
</div>
<a id="a1697df39771f157846a3ef9f46327c23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1697df39771f157846a3ef9f46327c23">&#9670;&nbsp;</a></span>truncate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void truncate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2truncate_8c_source.html#l00047">47</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2truncate_8c_source.html">truncate.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="flash_2Linux-0_811_2include_2sys_2stat_8h.html#abf68371159fa46b5cc47d0f3ac9ab723">S_ISREG</a>(inode-&gt;<a class="code" href="structm__inode.html#a8e7ad442dc54bb004462f2e82609ee06">i_mode</a>) || <a class="code" href="flash_2Linux-0_811_2include_2sys_2stat_8h.html#a70b64ed67c0ab484b4ba09487da34e91">S_ISDIR</a>(inode-&gt;<a class="code" href="structm__inode.html#a8e7ad442dc54bb004462f2e82609ee06">i_mode</a>)))</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">for</span> (i=0;i&lt;7;i++)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structm__inode.html#ab5259e1fa50415a968e5558ca2e92d9f">i_zone</a>[i]) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            <a class="code" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526">free_block</a>(inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>,inode-&gt;<a class="code" href="structm__inode.html#ab5259e1fa50415a968e5558ca2e92d9f">i_zone</a>[i]);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            inode-&gt;<a class="code" href="structm__inode.html#ab5259e1fa50415a968e5558ca2e92d9f">i_zone</a>[i]=0;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98">free_ind</a>(inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>,inode-&gt;<a class="code" href="structm__inode.html#ab5259e1fa50415a968e5558ca2e92d9f">i_zone</a>[7]);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563">free_dind</a>(inode-&gt;<a class="code" href="structm__inode.html#ab7137e3d8956c00cc96dbbb641d5f7b0">i_dev</a>,inode-&gt;<a class="code" href="structm__inode.html#ab5259e1fa50415a968e5558ca2e92d9f">i_zone</a>[8]);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#ab5259e1fa50415a968e5558ca2e92d9f">i_zone</a>[7] = inode-&gt;<a class="code" href="structm__inode.html#ab5259e1fa50415a968e5558ca2e92d9f">i_zone</a>[8] = 0;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a221b9232932ba984b5a3230e1b98f52e">i_size</a> = 0;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a49ce7269d6c0e0836f6f14aed8a640f6">i_dirt</a> = 1;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    inode-&gt;<a class="code" href="structm__inode.html#a14bbd28dd778926da9a6688bd1ea0fea">i_mtime</a> = inode-&gt;<a class="code" href="structm__inode.html#a50157b5c9346b2e6d448225d67d07de0">i_ctime</a> = <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a61eabc8e73414cfe55910effa8bcc4ef">CURRENT_TIME</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2bitmap_8c_html_abdd0da83359d6f16a52320c44c41c526"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526">free_block</a></div><div class="ttdeci">void free_block(int dev, int block)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2bitmap_8c_source.html#l00047">bitmap.c:47</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2truncate_8c_html_a9127b9c1a0eae2a1f7d5ff723f5d3563"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563">free_dind</a></div><div class="ttdeci">static void free_dind(int dev, int block)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2truncate_8c_source.html#l00029">truncate.c:29</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2fs_2truncate_8c_html_af203200db3c89f320ff91fafa6ff4e98"><div class="ttname"><a href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98">free_ind</a></div><div class="ttdeci">static void free_ind(int dev, int block)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2fs_2truncate_8c_source.html#l00011">truncate.c:11</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2sys_2stat_8h_html_abf68371159fa46b5cc47d0f3ac9ab723"><div class="ttname"><a href="flash_2Linux-0_811_2include_2sys_2stat_8h.html#abf68371159fa46b5cc47d0f3ac9ab723">S_ISREG</a></div><div class="ttdeci">#define S_ISREG(m)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2sys_2stat_8h_source.html#l00030">stat.h:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a1697df39771f157846a3ef9f46327c23_cgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a1697df39771f157846a3ef9f46327c23_cgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a1697df39771f157846a3ef9f46327c23_cgraph" id="asrc_2include_2linux_2fs_8h_a1697df39771f157846a3ef9f46327c23_cgraph">
<area shape="rect" title=" " alt="" coords="5,144,81,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="489,144,580,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="129,144,212,171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="260,195,335,221"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="1223,245,1286,272"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="1666,397,1723,424"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="1793,575,1853,601"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="640,448,761,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="1211,448,1298,475"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1360,651,1479,677"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="1527,397,1606,424"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="1783,397,1864,424"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="1912,575,1984,601"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="2037,524,2109,551"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="2032,575,2113,601"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="2043,625,2102,652"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="1527,625,1607,652"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="1655,625,1735,652"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a6dd8a689596cf17cdaf4dd6eb6c98e8f" title=" " alt="" coords="858,499,949,525"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="1361,549,1477,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="383,347,441,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="503,575,566,601"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="856,853,951,880"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aca6ca6f3081c02518e27afc1d833796a" title=" " alt="" coords="628,499,773,525"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3cc00a803282300ea51f20842322814e" title=" " alt="" coords="821,549,985,576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="659,651,742,677"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="852,600,955,627"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1197,828,1312,855"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a5b8b5c7e1bfc934cbb8b0b8be2a4acd0" title=" " alt="" coords="1368,752,1471,779"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1372,904,1467,931"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="1364,803,1475,829"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="1033,600,1149,627"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="1042,347,1141,373"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1209,397,1301,424"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="1201,347,1309,373"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2include_2linux_2fs_8h_a1697df39771f157846a3ef9f46327c23_icgraph.png" border="0" usemap="#asrc_2include_2linux_2fs_8h_a1697df39771f157846a3ef9f46327c23_icgraph" alt=""/></div>
<map name="asrc_2include_2linux_2fs_8h_a1697df39771f157846a3ef9f46327c23_icgraph" id="asrc_2include_2linux_2fs_8h_a1697df39771f157846a3ef9f46327c23_icgraph">
<area shape="rect" title=" " alt="" coords="952,272,1028,298"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="857,601,904,628"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="287,500,389,526"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="143,397,233,424"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="731,145,801,172"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="723,753,809,780"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="593,753,659,780"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="307,1158,369,1185"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="141,485,235,512"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="147,610,229,637"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="141,810,235,837"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="141,1216,235,1242"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="142,1386,234,1413"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="151,1102,225,1129"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="141,1437,235,1464"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="150,1614,226,1641"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="137,1665,239,1692"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a501239313f8fa813f492bedfa92538a7" title=" " alt="" coords="143,328,233,354"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="147,268,229,294"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="293,601,383,628"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="290,702,386,729"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="295,1082,381,1109"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="293,930,383,957"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="743,1006,789,1033"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="437,601,529,628"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a186ae5192f6afb2ec4fcd93cb592031d" title=" " alt="" coords="723,94,809,121"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ae8584b188355851cdd6f403cd5df3c12" title=" " alt="" coords="588,145,664,172"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae932b00aa69ebad7e231776a4da1fb01" title=" " alt="" coords="440,804,527,830"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="5,268,89,294"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="577,1209,675,1236"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="440,1209,527,1236"/>
</map>
</div>

</div>
</div>
<a id="a2041fe96ec88b835db9835524e07eb47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2041fe96ec88b835db9835524e07eb47">&#9670;&nbsp;</a></span>wait_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wait_on </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structm__inode.html">m_inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad8a0a8efe57313ad9d7359e5653ed901"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8a0a8efe57313ad9d7359e5653ed901">&#9670;&nbsp;</a></span>file_table</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfile.html">file</a> file_table[<a class="el" href="src_2include_2linux_2fs_8h.html#a13d1daac91a4ebfc4511bbe85d15d360">NR_FILE</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2file__table_8c_source.html#l00001">1</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2file__table_8c_source.html">file_table.c</a>.</p>

</div>
</div>
<a id="a9bf294a613d9b62d17a7b589c0feb64a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bf294a613d9b62d17a7b589c0feb64a">&#9670;&nbsp;</a></span>inode_table</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structm__inode.html">m_inode</a> inode_table[<a class="el" href="src_2include_2linux_2fs_8h.html#af63c190de439b45378f43837de8a7c6a">NR_INODE</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html#l00001">1</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2inode_8c_source.html">inode.c</a>.</p>

</div>
</div>
<a id="a5b1e5796de57540927d03ee66f2baf28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b1e5796de57540927d03ee66f2baf28">&#9670;&nbsp;</a></span>nr_buffers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int nr_buffers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adc981cc78759e83089d9809fd54d2d52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc981cc78759e83089d9809fd54d2d52">&#9670;&nbsp;</a></span>ROOT_DEV</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ROOT_DEV</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00029">29</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2super_8c_source.html">super.c</a>.</p>

</div>
</div>
<a id="aa5809896ce36f9b7ddab0b41745cb0bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5809896ce36f9b7ddab0b41745cb0bc">&#9670;&nbsp;</a></span>start_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbuffer__head.html">buffer_head</a>* start_buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html#l00035">35</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2buffer_8c_source.html">buffer.c</a>.</p>

</div>
</div>
<a id="a542357775bd1bb6453a5e9db9cae68eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a542357775bd1bb6453a5e9db9cae68eb">&#9670;&nbsp;</a></span>super_block</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsuper__block.html">super_block</a> <a class="el" href="structsuper__block.html">super_block</a>[<a class="el" href="src_2include_2linux_2fs_8h.html#a9169276d1d6c029b1d8680def713d7e3">NR_SUPER</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flash_2Linux-0_811_2fs_2super_8c_source.html#l00019">19</a> of file <a class="el" href="flash_2Linux-0_811_2fs_2super_8c_source.html">super.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li><li class="navelem"><a class="el" href="dir_316386f564092aa0b7a1a052e133b8aa.html">linux</a></li><li class="navelem"><a class="el" href="src_2include_2linux_2fs_8h.html">fs.h</a></li>
    <li class="footer">Generated on Fri Sep 8 2023 09:28:18 for linux by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
