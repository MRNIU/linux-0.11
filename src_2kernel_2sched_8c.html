<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux: /home/runner/work/linux-0.11/linux-0.11/src/kernel/sched.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux
   &#160;<span id="projectnumber">0.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('src_2kernel_2sched_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sched.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/sched.h&gt;</code><br />
<code>#include &lt;linux/kernel.h&gt;</code><br />
<code>#include &lt;linux/sys.h&gt;</code><br />
<code>#include &lt;linux/fdreg.h&gt;</code><br />
<code>#include &lt;asm/system.h&gt;</code><br />
<code>#include &lt;asm/io.h&gt;</code><br />
<code>#include &lt;asm/segment.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for sched.c:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c__incl.png" border="0" usemap="#a_2home_2runner_2work_2linux-0_811_2linux-0_811_2src_2kernel_2sched_8c" alt=""/></div>
<map name="a_2home_2runner_2work_2linux-0_811_2linux-0_811_2src_2kernel_2sched_8c" id="a_2home_2runner_2work_2linux-0_811_2linux-0_811_2src_2kernel_2sched_8c">
<area shape="rect" title=" " alt="" coords="412,5,603,61"/>
<area shape="rect" title=" " alt="" coords="5,109,113,136"/>
<area shape="rect" title=" " alt="" coords="137,109,248,136"/>
<area shape="rect" title=" " alt="" coords="272,109,364,136"/>
<area shape="rect" title=" " alt="" coords="389,109,493,136"/>
<area shape="rect" title=" " alt="" coords="517,109,631,136"/>
<area shape="rect" title=" " alt="" coords="656,109,735,136"/>
<area shape="rect" title=" " alt="" coords="759,109,882,136"/>
<area shape="rect" title=" " alt="" coords="907,109,980,136"/>
</map>
</div>
</div>
<p><a href="src_2kernel_2sched_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uniontask__union.html">task_union</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtimer__list.html">timer_list</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7c38707157b082f151b5390da056a350"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a7c38707157b082f151b5390da056a350">_S</a>(nr)&#160;&#160;&#160;(1&lt;&lt;((nr)-1))</td></tr>
<tr class="separator:a7c38707157b082f151b5390da056a350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7663d7fadaf4bac5e8bb574632ba0351"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a7663d7fadaf4bac5e8bb574632ba0351">_BLOCKABLE</a>&#160;&#160;&#160;(~(<a class="el" href="src_2kernel_2sched_8c.html#a7c38707157b082f151b5390da056a350">_S</a>(<a class="el" href="src_2include_2signal_8h.html#addd8dcd406ce514ab3b4f576a5343d42">SIGKILL</a>)|<a class="el" href="src_2kernel_2sched_8c.html#a7c38707157b082f151b5390da056a350">_S</a>(<a class="el" href="src_2include_2signal_8h.html#a069e358bc9a864b7dc4fed2440eda14c">SIGSTOP</a>)))</td></tr>
<tr class="separator:a7663d7fadaf4bac5e8bb574632ba0351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2059fd29cfd2e7617b2dd6a0de2e0b5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ac2059fd29cfd2e7617b2dd6a0de2e0b5">LATCH</a>&#160;&#160;&#160;(1193180/<a class="el" href="src_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a>)</td></tr>
<tr class="separator:ac2059fd29cfd2e7617b2dd6a0de2e0b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4db57ef4cd102bbe3b7f5aab2991fca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ae4db57ef4cd102bbe3b7f5aab2991fca">TIME_REQUESTS</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:ae4db57ef4cd102bbe3b7f5aab2991fca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1ad17830f10ab318d229f0b4f3e4278c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a1ad17830f10ab318d229f0b4f3e4278c">show_task</a> (int nr, struct <a class="el" href="structtask__struct.html">task_struct</a> *p)</td></tr>
<tr class="separator:a1ad17830f10ab318d229f0b4f3e4278c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad117f749a66addb65b10396e08ad2ced"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ad117f749a66addb65b10396e08ad2ced">show_stat</a> (void)</td></tr>
<tr class="separator:ad117f749a66addb65b10396e08ad2ced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b2a42c55545e4a2a101244d9b6624a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a6b2a42c55545e4a2a101244d9b6624a8">mem_use</a> (void)</td></tr>
<tr class="separator:a6b2a42c55545e4a2a101244d9b6624a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a716cae445f71ceadde1072c774c6b9bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a716cae445f71ceadde1072c774c6b9bf">timer_interrupt</a> (void)</td></tr>
<tr class="separator:a716cae445f71ceadde1072c774c6b9bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab18a66658acfaf7fdb1dad14e1ea496"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#aab18a66658acfaf7fdb1dad14e1ea496">system_call</a> (void)</td></tr>
<tr class="separator:aab18a66658acfaf7fdb1dad14e1ea496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad02e340c756cdf6f835eb936aaa0b394"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ad02e340c756cdf6f835eb936aaa0b394">math_state_restore</a> ()</td></tr>
<tr class="separator:ad02e340c756cdf6f835eb936aaa0b394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac48128e72b303ea22d8ec641a9516b15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15">schedule</a> (void)</td></tr>
<tr class="separator:ac48128e72b303ea22d8ec641a9516b15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b40933fbbecf5e20bd8e6a1cdf6353f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a8b40933fbbecf5e20bd8e6a1cdf6353f">sys_pause</a> (void)</td></tr>
<tr class="separator:a8b40933fbbecf5e20bd8e6a1cdf6353f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee0eea1a206d256d223fd33292ddb5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a8ee0eea1a206d256d223fd33292ddb5d">sleep_on</a> (struct <a class="el" href="structtask__struct.html">task_struct</a> **p)</td></tr>
<tr class="separator:a8ee0eea1a206d256d223fd33292ddb5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e7f1f0c2e37cb25f642125fb32ffcec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a1e7f1f0c2e37cb25f642125fb32ffcec">interruptible_sleep_on</a> (struct <a class="el" href="structtask__struct.html">task_struct</a> **p)</td></tr>
<tr class="separator:a1e7f1f0c2e37cb25f642125fb32ffcec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add6d90b147b8d600062919f0220600f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#add6d90b147b8d600062919f0220600f4">wake_up</a> (struct <a class="el" href="structtask__struct.html">task_struct</a> **p)</td></tr>
<tr class="separator:add6d90b147b8d600062919f0220600f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0dfac0621c67bb6a1faf733bbe82f5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#abc0dfac0621c67bb6a1faf733bbe82f5">ticks_to_floppy_on</a> (unsigned int nr)</td></tr>
<tr class="separator:abc0dfac0621c67bb6a1faf733bbe82f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b9c3c3f694cbf682e4eb7724a9e6230"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a3b9c3c3f694cbf682e4eb7724a9e6230">floppy_on</a> (unsigned int nr)</td></tr>
<tr class="separator:a3b9c3c3f694cbf682e4eb7724a9e6230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab619972c908f2f1646202e72ab69ddae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ab619972c908f2f1646202e72ab69ddae">floppy_off</a> (unsigned int nr)</td></tr>
<tr class="separator:ab619972c908f2f1646202e72ab69ddae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe910b8f0902f3e2c42d6630d7f5adc9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#afe910b8f0902f3e2c42d6630d7f5adc9">do_floppy_timer</a> (void)</td></tr>
<tr class="separator:afe910b8f0902f3e2c42d6630d7f5adc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3ad73535a475aee9be4dd47decb2344"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#af3ad73535a475aee9be4dd47decb2344">add_timer</a> (long <a class="el" href="src_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a>, void(*fn)(void))</td></tr>
<tr class="separator:af3ad73535a475aee9be4dd47decb2344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c136705cbcc7caebb2c4734b6ab907b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a7c136705cbcc7caebb2c4734b6ab907b">do_timer</a> (long cpl)</td></tr>
<tr class="separator:a7c136705cbcc7caebb2c4734b6ab907b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d84c215ba10664a8e2859e1bc79a93"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a37d84c215ba10664a8e2859e1bc79a93">sys_alarm</a> (long seconds)</td></tr>
<tr class="separator:a37d84c215ba10664a8e2859e1bc79a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac81965412a0725574b8c72afda11243e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ac81965412a0725574b8c72afda11243e">sys_getpid</a> (void)</td></tr>
<tr class="separator:ac81965412a0725574b8c72afda11243e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9da8311322924d20b2bf48e7a474248"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ae9da8311322924d20b2bf48e7a474248">sys_getppid</a> (void)</td></tr>
<tr class="separator:ae9da8311322924d20b2bf48e7a474248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa83305cc922ff56521e79402a46b69f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#aa83305cc922ff56521e79402a46b69f1">sys_getuid</a> (void)</td></tr>
<tr class="separator:aa83305cc922ff56521e79402a46b69f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39dcd4514f07d0ce177895dd1e1ecbcd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a39dcd4514f07d0ce177895dd1e1ecbcd">sys_geteuid</a> (void)</td></tr>
<tr class="separator:a39dcd4514f07d0ce177895dd1e1ecbcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14eba039c00be33b2247170394dc3fc3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a14eba039c00be33b2247170394dc3fc3">sys_getgid</a> (void)</td></tr>
<tr class="separator:a14eba039c00be33b2247170394dc3fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8be7e26f5fca92fbd18b3967eff5583"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ad8be7e26f5fca92fbd18b3967eff5583">sys_getegid</a> (void)</td></tr>
<tr class="separator:ad8be7e26f5fca92fbd18b3967eff5583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85a189b3ff6ee8f9b8c09314a4aab8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#af85a189b3ff6ee8f9b8c09314a4aab8d">sys_nice</a> (long increment)</td></tr>
<tr class="separator:af85a189b3ff6ee8f9b8c09314a4aab8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac76f0bd4fbafc057a2f780869968e3ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ac76f0bd4fbafc057a2f780869968e3ed">sched_init</a> (void)</td></tr>
<tr class="separator:ac76f0bd4fbafc057a2f780869968e3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8b614e45abc3e58768258131fceae7bd"><td class="memItemLeft" align="right" valign="top">static union <a class="el" href="uniontask__union.html">task_union</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a8b614e45abc3e58768258131fceae7bd">init_task</a> ={<a class="el" href="src_2include_2linux_2sched_8h.html#a0a5b2a7a38d56a68c5c86d94ac594db6">INIT_TASK</a>,}</td></tr>
<tr class="separator:a8b614e45abc3e58768258131fceae7bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37aca3305753442605b0762afa99a07e"><td class="memItemLeft" align="right" valign="top">long volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a> =0</td></tr>
<tr class="separator:a37aca3305753442605b0762afa99a07e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39b7cd6026b7abf239ace8f11306e205"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a39b7cd6026b7abf239ace8f11306e205">startup_time</a> =0</td></tr>
<tr class="separator:a39b7cd6026b7abf239ace8f11306e205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a476ec09a598028a09942c2233aa5127e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtask__struct.html">task_struct</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a> =&amp;(<a class="el" href="src_2kernel_2sched_8c.html#a32ae6a90bd92bba7a7d2103b2b0662d8">init_task.task</a>)</td></tr>
<tr class="separator:a476ec09a598028a09942c2233aa5127e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a720faae9986c1917541956019c8a3b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtask__struct.html">task_struct</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a4a720faae9986c1917541956019c8a3b">last_task_used_math</a> =<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a4a720faae9986c1917541956019c8a3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ae6a90bd92bba7a7d2103b2b0662d8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtask__struct.html">task_struct</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a32ae6a90bd92bba7a7d2103b2b0662d8">task</a> [<a class="el" href="src_2include_2linux_2sched_8h.html#a88a8e8596ba6eca6449e368319c9c73d">NR_TASKS</a>] ={&amp;(init_task.task),}</td></tr>
<tr class="separator:a32ae6a90bd92bba7a7d2103b2b0662d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83d92e245645fe5e69db546edf9dfd26"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a83d92e245645fe5e69db546edf9dfd26">user_stack</a> [<a class="el" href="src_2include_2linux_2mm_8h.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a> &gt;&gt;2]</td></tr>
<tr class="separator:a83d92e245645fe5e69db546edf9dfd26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09b8ff62b9072512c7ffaa50f75e8984"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:a51b793e85a87ef39d9c145cbb7bcafd4"><td class="memItemLeft" >&#160;&#160;&#160;long *&#160;&#160;&#160;<a class="el" href="src_2kernel_2sched_8c.html#a528b92115c4bb60d7b46de7e09ea0bae">a</a></td></tr>
<tr class="separator:a51b793e85a87ef39d9c145cbb7bcafd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57fd7d3e790ba28787378f94e3489576"><td class="memItemLeft" >&#160;&#160;&#160;short&#160;&#160;&#160;<a class="el" href="src_2kernel_2sched_8c.html#a14c92240a8c7badaaa4e18952e560053">b</a></td></tr>
<tr class="separator:a57fd7d3e790ba28787378f94e3489576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09b8ff62b9072512c7ffaa50f75e8984"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a09b8ff62b9072512c7ffaa50f75e8984">stack_start</a> ={&amp;<a class="el" href="src_2kernel_2sched_8c.html#a83d92e245645fe5e69db546edf9dfd26">user_stack</a>[<a class="el" href="src_2include_2linux_2mm_8h.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>&gt;&gt;2],0x10}</td></tr>
<tr class="separator:a09b8ff62b9072512c7ffaa50f75e8984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7acd8ec210022a3ca399b5ee9e6d05f6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structtask__struct.html">task_struct</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a7acd8ec210022a3ca399b5ee9e6d05f6">wait_motor</a> [4] ={<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>}</td></tr>
<tr class="separator:a7acd8ec210022a3ca399b5ee9e6d05f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc5015fa1359261094d4aa4d309a149"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a> [4] ={0,0,0,0}</td></tr>
<tr class="separator:afbc5015fa1359261094d4aa4d309a149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab218c7c6e6e256c43506e0c421328851"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#ab218c7c6e6e256c43506e0c421328851">moff_timer</a> [4] ={0,0,0,0}</td></tr>
<tr class="separator:ab218c7c6e6e256c43506e0c421328851"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a581bf75201a0c19048387d483845bdb5"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a> =0x0C</td></tr>
<tr class="separator:a581bf75201a0c19048387d483845bdb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da6b8319e1f3d2153a622255d75ca60"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structtimer__list.html">timer_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a8da6b8319e1f3d2153a622255d75ca60">timer_list</a> [<a class="el" href="src_2kernel_2sched_8c.html#ae4db57ef4cd102bbe3b7f5aab2991fca">TIME_REQUESTS</a>]</td></tr>
<tr class="separator:a8da6b8319e1f3d2153a622255d75ca60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a2fd6a6a4ad81747ab920eb87fe1549"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structtimer__list.html">timer_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a> [<a class="el" href="src_2kernel_2sched_8c.html#ae4db57ef4cd102bbe3b7f5aab2991fca">TIME_REQUESTS</a>] =<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a4a2fd6a6a4ad81747ab920eb87fe1549"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7663d7fadaf4bac5e8bb574632ba0351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7663d7fadaf4bac5e8bb574632ba0351">&#9670;&nbsp;</a></span>_BLOCKABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _BLOCKABLE&#160;&#160;&#160;(~(<a class="el" href="src_2kernel_2sched_8c.html#a7c38707157b082f151b5390da056a350">_S</a>(<a class="el" href="src_2include_2signal_8h.html#addd8dcd406ce514ab3b4f576a5343d42">SIGKILL</a>)|<a class="el" href="src_2kernel_2sched_8c.html#a7c38707157b082f151b5390da056a350">_S</a>(<a class="el" href="src_2include_2signal_8h.html#a069e358bc9a864b7dc4fed2440eda14c">SIGSTOP</a>)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00020">20</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a7c38707157b082f151b5390da056a350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c38707157b082f151b5390da056a350">&#9670;&nbsp;</a></span>_S</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _S</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">nr</td><td>)</td>
          <td>&#160;&#160;&#160;(1&lt;&lt;((nr)-1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00019">19</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="ac2059fd29cfd2e7617b2dd6a0de2e0b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2059fd29cfd2e7617b2dd6a0de2e0b5">&#9670;&nbsp;</a></span>LATCH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LATCH&#160;&#160;&#160;(1193180/<a class="el" href="src_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00041">41</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="ae4db57ef4cd102bbe3b7f5aab2991fca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4db57ef4cd102bbe3b7f5aab2991fca">&#9670;&nbsp;</a></span>TIME_REQUESTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIME_REQUESTS&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00285">285</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af3ad73535a475aee9be4dd47decb2344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3ad73535a475aee9be4dd47decb2344">&#9670;&nbsp;</a></span>add_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_timer </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>jiffies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00294">294</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                             {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keyword">struct </span><a class="code" href="structtimer__list.html">timer_list</a> *p;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">// 如果定时处理程序指针为空，则退出。</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a68c330e94fe121eba993e5a5973c3162">cli</a>();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a>&lt;=0)  <span class="comment">// 若定时值 &lt;=0 ，则立刻调用其它处理程序。且该定时器不加入链表中。</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    (<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>)();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">else</span>{ <span class="comment">// 从定时器数组中，找一个空闲项</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">for</span>(p=<a class="code" href="structtimer__list.html">timer_list</a>;p&lt;<a class="code" href="structtimer__list.html">timer_list</a>+<a class="code" href="src_2kernel_2sched_8c.html#ae4db57ef4cd102bbe3b7f5aab2991fca">TIME_REQUESTS</a>;p++)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">if</span>(!p-&gt;<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>)  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span>(p&gt;=<a class="code" href="structtimer__list.html">timer_list</a>+<a class="code" href="src_2kernel_2sched_8c.html#ae4db57ef4cd102bbe3b7f5aab2991fca">TIME_REQUESTS</a>) <span class="comment">// 若已经用完定时器数组则系统崩溃</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;No more time requests free&quot;</span>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    p-&gt;<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>=<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    p-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>=<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    p-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a>=<a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a>=p;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">// 链表项按定时值从小到大排序。在排序时减去排在前面需要的滴答数，这样在处理定时器时只要查看链表头的</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">// 第一项的定时是否到期即可。[这段程序好像没有考虑周全。如果新插入的定时器值小于原来头一个</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">// 定时器值时，也应该将其后面的定时值减去新的第 1 个的定时值。]</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">while</span>(p-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a> &amp;&amp; p-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a>-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>&lt;p-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>){</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      p-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>-=p-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a>-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>=p-&gt;<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      p-&gt;<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>=p-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a>-&gt;<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      p-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a>-&gt;<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>=<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a>=p-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      p-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>=p-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a>-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      p-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a>-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>=<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      p=p-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#ac5d15f274bc9b1e96230f3d3c60fd1f8">sti</a>();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_a68c330e94fe121eba993e5a5973c3162"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a68c330e94fe121eba993e5a5973c3162">cli</a></div><div class="ttdeci">#define cli()</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00017">system.h:17</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_ac5d15f274bc9b1e96230f3d3c60fd1f8"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#ac5d15f274bc9b1e96230f3d3c60fd1f8">sti</a></div><div class="ttdeci">#define sti()</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00016">system.h:16</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2kernel_8h_html_ab43c5eded9a063f60e583332eaa73258"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a></div><div class="ttdeci">volatile void panic(const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2panic_8c_source.html#l00018">panic.c:18</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a37aca3305753442605b0762afa99a07e"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a></div><div class="ttdeci">long volatile jiffies</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00060">sched.c:60</a></div></div>
<div class="ttc" id="asrc_2kernel_2sched_8c_html_a4a2fd6a6a4ad81747ab920eb87fe1549"><div class="ttname"><a href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a></div><div class="ttdeci">static struct timer_list * next_timer[TIME_REQUESTS]</div></div>
<div class="ttc" id="asrc_2kernel_2sched_8c_html_ae4db57ef4cd102bbe3b7f5aab2991fca"><div class="ttname"><a href="src_2kernel_2sched_8c.html#ae4db57ef4cd102bbe3b7f5aab2991fca">TIME_REQUESTS</a></div><div class="ttdeci">#define TIME_REQUESTS</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2sched_8c_source.html#l00285">sched.c:285</a></div></div>
<div class="ttc" id="astructtimer__list_html"><div class="ttname"><a href="structtimer__list.html">timer_list</a></div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00266">sched.c:266</a></div></div>
<div class="ttc" id="astructtimer__list_html_a1f38700f99736f413d82a540274aa4db"><div class="ttname"><a href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">timer_list::next</a></div><div class="ttdeci">struct timer_list * next</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00269">sched.c:269</a></div></div>
<div class="ttc" id="astructtimer__list_html_a41385c11cefcf1bc7073d053c70428c9"><div class="ttname"><a href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">timer_list::jiffies</a></div><div class="ttdeci">long jiffies</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00267">sched.c:267</a></div></div>
<div class="ttc" id="astructtimer__list_html_a9da59c5e81cd532fc11bdb8945cefbc5"><div class="ttname"><a href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">timer_list::fn</a></div><div class="ttdeci">void(* fn)()</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00268">sched.c:268</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_af3ad73535a475aee9be4dd47decb2344_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_af3ad73535a475aee9be4dd47decb2344_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_af3ad73535a475aee9be4dd47decb2344_cgraph" id="asrc_2kernel_2sched_8c_af3ad73535a475aee9be4dd47decb2344_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,93,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="141,81,199,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="257,56,317,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="247,107,328,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="376,56,448,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="501,5,573,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="496,56,577,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="507,107,566,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_af3ad73535a475aee9be4dd47decb2344_icgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_af3ad73535a475aee9be4dd47decb2344_icgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_af3ad73535a475aee9be4dd47decb2344_icgraph" id="asrc_2kernel_2sched_8c_af3ad73535a475aee9be4dd47decb2344_icgraph">
<area shape="rect" title=" " alt="" coords="1003,359,1091,385"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a06e6fc6f4a9928ed7ca3b92c5e1aa6e9" title=" " alt="" coords="840,232,955,259"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a8b1b0844261bdb5e0e9f41e83e7df7d3" title=" " alt="" coords="5,435,153,461"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a1d799ddf9a7fe6dfea15646acacc6338" title=" " alt="" coords="674,5,791,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a22aa6849ea2eba2f259d33e2a8d0bd59" title=" " alt="" coords="487,68,625,95"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#abd1fd9a68f5c49bfb7ab6bbe78b6a5e5" title=" " alt="" coords="673,131,792,157"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#ae7ef0adb7b854c68e71519740e5bde05" title=" " alt="" coords="682,232,783,259"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#aa75ba625c96dd049ce11fe73d6c7541e" title=" " alt="" coords="492,283,620,309"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a47089b6922ed13076dc6be59c42a8053" title=" " alt="" coords="323,333,439,360"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a8ca55f4aa2fc641f1390a8cccac15ac7" title=" " alt="" coords="201,359,275,385"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a6f41207dab16e9eb642875cf30c7018b" title=" " alt="" coords="505,156,607,183"/>
</map>
</div>

</div>
</div>
<a id="afe910b8f0902f3e2c42d6630d7f5adc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe910b8f0902f3e2c42d6630d7f5adc9">&#9670;&nbsp;</a></span>do_floppy_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_floppy_timer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00265">265</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                          {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mask=0x10;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">for</span>(i=0;i&lt;4;i++,mask&lt;&lt;=1){</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">if</span>(!(mask &amp; <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a>)) <span class="comment">// 如果不是 DOR 指定的电动机则跳过</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="src_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[i]){</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">if</span>(!--<a class="code" href="src_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[i])</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#add6d90b147b8d600062919f0220600f4">wake_up</a>(i+<a class="code" href="src_2kernel_2sched_8c.html#a7acd8ec210022a3ca399b5ee9e6d05f6">wait_motor</a>);  <span class="comment">// 如果电动机启动定时到则唤醒进程。</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="src_2kernel_2sched_8c.html#ab218c7c6e6e256c43506e0c421328851">moff_timer</a>[i]){  <span class="comment">// 如果电动机停转定时到则复位相应电动机启动位，并更新数字输出寄存器</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a> &amp;= ~mask;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#aff0f5d0c71d15c5888f22f86b5ca841b">outb</a>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a>,<a class="code" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a89b40b36cb9fad0b750cd7df087c920c">FD_DOR</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <a class="code" href="src_2kernel_2sched_8c.html#ab218c7c6e6e256c43506e0c421328851">moff_timer</a>[i]--;  <span class="comment">// 电动机停转计时递减。</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2io_8h_html_aff0f5d0c71d15c5888f22f86b5ca841b"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2io_8h.html#aff0f5d0c71d15c5888f22f86b5ca841b">outb</a></div><div class="ttdeci">#define outb(value, port)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2io_8h_source.html#l00001">io.h:1</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fdreg_8h_html_a89b40b36cb9fad0b750cd7df087c920c"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a89b40b36cb9fad0b750cd7df087c920c">FD_DOR</a></div><div class="ttdeci">#define FD_DOR</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fdreg_8h_source.html#l00018">fdreg.h:18</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a581bf75201a0c19048387d483845bdb5"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a></div><div class="ttdeci">unsigned char current_DOR</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00204">sched.c:204</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_add6d90b147b8d600062919f0220600f4"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#add6d90b147b8d600062919f0220600f4">wake_up</a></div><div class="ttdeci">void wake_up(struct task_struct **p)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00188">sched.c:188</a></div></div>
<div class="ttc" id="asrc_2kernel_2sched_8c_html_a7acd8ec210022a3ca399b5ee9e6d05f6"><div class="ttname"><a href="src_2kernel_2sched_8c.html#a7acd8ec210022a3ca399b5ee9e6d05f6">wait_motor</a></div><div class="ttdeci">static struct task_struct * wait_motor[4]</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2sched_8c_source.html#l00219">sched.c:219</a></div></div>
<div class="ttc" id="asrc_2kernel_2sched_8c_html_ab218c7c6e6e256c43506e0c421328851"><div class="ttname"><a href="src_2kernel_2sched_8c.html#ab218c7c6e6e256c43506e0c421328851">moff_timer</a></div><div class="ttdeci">static int moff_timer[4]</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2sched_8c_source.html#l00221">sched.c:221</a></div></div>
<div class="ttc" id="asrc_2kernel_2sched_8c_html_afbc5015fa1359261094d4aa4d309a149"><div class="ttname"><a href="src_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a></div><div class="ttdeci">static int mon_timer[4]</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2sched_8c_source.html#l00220">sched.c:220</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_afe910b8f0902f3e2c42d6630d7f5adc9_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_afe910b8f0902f3e2c42d6630d7f5adc9_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_afe910b8f0902f3e2c42d6630d7f5adc9_cgraph" id="asrc_2kernel_2sched_8c_afe910b8f0902f3e2c42d6630d7f5adc9_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,132,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="180,5,259,32"/>
</map>
</div>

</div>
</div>
<a id="a7c136705cbcc7caebb2c4734b6ab907b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c136705cbcc7caebb2c4734b6ab907b">&#9670;&nbsp;</a></span>do_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_timer </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>cpl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00329">329</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                       {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#aca0ddc5f1281d69446d86f164e5a07ae">beepcount</a>; <span class="comment">// 扬声器发声时间滴答数 (kernel/chr_drv/console.c 767)</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#aeedacf63f0888d6715e3b820118374aa">sysbeepstop</a>(<span class="keywordtype">void</span>);  <span class="comment">// 关闭扬声器 (kernel/chr_drv/console.c 762)</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#aca0ddc5f1281d69446d86f164e5a07ae">beepcount</a>) <span class="comment">// 如果发生计数次数到，则关闭发声</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span>(!--<a class="code" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#aca0ddc5f1281d69446d86f164e5a07ae">beepcount</a>)  <span class="comment">// 向 0x61 口发送命令，复位位 0 和 1.</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <a class="code" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#aeedacf63f0888d6715e3b820118374aa">sysbeepstop</a>();  <span class="comment">// 位 0 控制 8253 计数器 2 的工作，位 1 控制扬声器。</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">// 如果当前特权级(cpl)为 0 (最高，表示是内核程序在工作) ，则将内核程序运行时间 stime 递增；</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">// 如果 cpl&gt;0 ,则表示是一般用户程序在工作，增加 utime.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span>(cpl)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#ac67536267a42feff0b76cd421f3b7ba5">utime</a>++;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#aa93ba7dd90be4a36c8f99605d0c1c267">stime</a>++;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">// 如果有软驱操作定时器存在，则将链表第 1 个定时器的值减 1。如果已等于 0，则调用相应的处理程序，</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">// 并将该处理程序指针置为空。然后去掉该项定时器。</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a>){</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a>-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a>--;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">while</span>(<a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a> &amp;&amp; <a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a>-&gt;<a class="code" href="structtimer__list.html#a41385c11cefcf1bc7073d053c70428c9">jiffies</a> &lt;=0){</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        void (*fn)(void); <span class="comment">// 这里插入了一个函数指针定义！！！</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        fn=<a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a>-&gt;<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a>-&gt;<a class="code" href="structtimer__list.html#a9da59c5e81cd532fc11bdb8945cefbc5">fn</a>=<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a>=<a class="code" href="src_2kernel_2sched_8c.html#a4a2fd6a6a4ad81747ab920eb87fe1549">next_timer</a>-&gt;<a class="code" href="structtimer__list.html#a1f38700f99736f413d82a540274aa4db">next</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        (fn)(); <span class="comment">// 调用处理函数</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">// 如果当前软盘控制器 FDC 的数字输出寄存器中电动机启动位有置位的，则执行软盘定时程序(265 行)</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a> &amp; 0xf0)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#afe910b8f0902f3e2c42d6630d7f5adc9">do_floppy_timer</a>();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span>((--<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#ae4e1fb3352913d7090328fb14a5f1ab6">counter</a>)&gt;0)  <span class="keywordflow">return</span>; <span class="comment">// 如果进程运行时间还没完，则退出</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#ae4e1fb3352913d7090328fb14a5f1ab6">counter</a>=0;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span>(!cpl) <span class="keywordflow">return</span>;  <span class="comment">// 对于内核程序，不依赖 counter 值进行调度</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15">schedule</a>();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2fs_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2fs_8h_source.html#l00052">fs.h:52</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2chr__drv_2console_8c_html_aca0ddc5f1281d69446d86f164e5a07ae"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#aca0ddc5f1281d69446d86f164e5a07ae">beepcount</a></div><div class="ttdeci">int beepcount</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c_source.html#l00674">console.c:674</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2chr__drv_2console_8c_html_aeedacf63f0888d6715e3b820118374aa"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#aeedacf63f0888d6715e3b820118374aa">sysbeepstop</a></div><div class="ttdeci">void sysbeepstop(void)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c_source.html#l00669">console.c:669</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a476ec09a598028a09942c2233aa5127e"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a></div><div class="ttdeci">struct task_struct * current</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00062">sched.c:62</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_ac48128e72b303ea22d8ec641a9516b15"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15">schedule</a></div><div class="ttdeci">void schedule(void)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00104">sched.c:104</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_afe910b8f0902f3e2c42d6630d7f5adc9"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#afe910b8f0902f3e2c42d6630d7f5adc9">do_floppy_timer</a></div><div class="ttdeci">void do_floppy_timer(void)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00245">sched.c:245</a></div></div>
<div class="ttc" id="astructtask__struct_html_aa93ba7dd90be4a36c8f99605d0c1c267"><div class="ttname"><a href="structtask__struct.html#aa93ba7dd90be4a36c8f99605d0c1c267">task_struct::stime</a></div><div class="ttdeci">long stime</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00095">sched.h:95</a></div></div>
<div class="ttc" id="astructtask__struct_html_ac67536267a42feff0b76cd421f3b7ba5"><div class="ttname"><a href="structtask__struct.html#ac67536267a42feff0b76cd421f3b7ba5">task_struct::utime</a></div><div class="ttdeci">long utime</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00095">sched.h:95</a></div></div>
<div class="ttc" id="astructtask__struct_html_ae4e1fb3352913d7090328fb14a5f1ab6"><div class="ttname"><a href="structtask__struct.html#ae4e1fb3352913d7090328fb14a5f1ab6">task_struct::counter</a></div><div class="ttdeci">long counter</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00083">sched.h:83</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_a7c136705cbcc7caebb2c4734b6ab907b_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_a7c136705cbcc7caebb2c4734b6ab907b_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_a7c136705cbcc7caebb2c4734b6ab907b_cgraph" id="asrc_2kernel_2sched_8c_a7c136705cbcc7caebb2c4734b6ab907b_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,85,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#afe910b8f0902f3e2c42d6630d7f5adc9" title=" " alt="" coords="133,5,260,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="157,56,237,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#aeedacf63f0888d6715e3b820118374aa" title=" " alt="" coords="145,107,249,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#add6d90b147b8d600062919f0220600f4" title=" " alt="" coords="308,5,387,32"/>
</map>
</div>

</div>
</div>
<a id="ab619972c908f2f1646202e72ab69ddae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab619972c908f2f1646202e72ab69ddae">&#9670;&nbsp;</a></span>floppy_off()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void floppy_off </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00259">259</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="src_2kernel_2sched_8c.html#ab218c7c6e6e256c43506e0c421328851">moff_timer</a>[nr]=3*<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a8489802eaedf42fdb5f2ce1708eaffa2"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a></div><div class="ttdeci">#define HZ</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00005">sched.h:5</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_ab619972c908f2f1646202e72ab69ddae_icgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_ab619972c908f2f1646202e72ab69ddae_icgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_ab619972c908f2f1646202e72ab69ddae_icgraph" id="asrc_2kernel_2sched_8c_ab619972c908f2f1646202e72ab69ddae_icgraph">
<area shape="rect" title=" " alt="" coords="788,81,875,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#abe1936a56cbf6ac4fb9d685078f38e9c" title=" " alt="" coords="624,81,740,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a53eefc9fcd3ae0cc20ec6eeea2dd6d44" title=" " alt="" coords="428,81,576,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="285,56,380,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="291,107,374,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="140,5,237,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="142,56,235,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="5,5,92,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="147,107,231,133"/>
</map>
</div>

</div>
</div>
<a id="a3b9c3c3f694cbf682e4eb7724a9e6230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b9c3c3f694cbf682e4eb7724a9e6230">&#9670;&nbsp;</a></span>floppy_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void floppy_on </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00252">252</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                               {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a68c330e94fe121eba993e5a5973c3162">cli</a>();  <span class="comment">// 关中断</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#abc0dfac0621c67bb6a1faf733bbe82f5">ticks_to_floppy_on</a>(nr)) <span class="comment">// 如果电动机启动定时还没到，就一直把当前进程置为不可中</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a8ee0eea1a206d256d223fd33292ddb5d">sleep_on</a>(nr+<a class="code" href="src_2kernel_2sched_8c.html#a7acd8ec210022a3ca399b5ee9e6d05f6">wait_motor</a>);  <span class="comment">// 断睡眠状态并放入等待电动机运行的队列中。</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#ac5d15f274bc9b1e96230f3d3c60fd1f8">sti</a>();  <span class="comment">// 开中断。</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a8ee0eea1a206d256d223fd33292ddb5d"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a8ee0eea1a206d256d223fd33292ddb5d">sleep_on</a></div><div class="ttdeci">void sleep_on(struct task_struct **p)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00151">sched.c:151</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_abc0dfac0621c67bb6a1faf733bbe82f5"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#abc0dfac0621c67bb6a1faf733bbe82f5">ticks_to_floppy_on</a></div><div class="ttdeci">int ticks_to_floppy_on(unsigned int nr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00206">sched.c:206</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_a3b9c3c3f694cbf682e4eb7724a9e6230_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_a3b9c3c3f694cbf682e4eb7724a9e6230_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_a3b9c3c3f694cbf682e4eb7724a9e6230_cgraph" id="asrc_2kernel_2sched_8c_a3b9c3c3f694cbf682e4eb7724a9e6230_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,91,57"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a8ee0eea1a206d256d223fd33292ddb5d" title=" " alt="" coords="170,5,250,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#abc0dfac0621c67bb6a1faf733bbe82f5" title=" " alt="" coords="139,56,281,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_a3b9c3c3f694cbf682e4eb7724a9e6230_icgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_a3b9c3c3f694cbf682e4eb7724a9e6230_icgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_a3b9c3c3f694cbf682e4eb7724a9e6230_icgraph" id="asrc_2kernel_2sched_8c_a3b9c3c3f694cbf682e4eb7724a9e6230_icgraph">
<area shape="rect" title=" " alt="" coords="788,81,873,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#abe1936a56cbf6ac4fb9d685078f38e9c" title=" " alt="" coords="624,81,740,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a53eefc9fcd3ae0cc20ec6eeea2dd6d44" title=" " alt="" coords="428,81,576,108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="285,56,380,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="291,107,374,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="140,5,237,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="142,56,235,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="5,5,92,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="147,107,231,133"/>
</map>
</div>

</div>
</div>
<a id="a1e7f1f0c2e37cb25f642125fb32ffcec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e7f1f0c2e37cb25f642125fb32ffcec">&#9670;&nbsp;</a></span>interruptible_sleep_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void interruptible_sleep_on </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtask__struct.html">task_struct</a> **&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00182">182</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                                     {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keyword">struct </span><a class="code" href="structtask__struct.html">task_struct</a> * tmp;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span>(!p) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>==&amp;(<a class="code" href="src_2kernel_2sched_8c.html#a8b614e45abc3e58768258131fceae7bd">init_task</a>.<a class="code" href="uniontask__union.html#ad1dfbbf21707c070bbb65cf5d8dc99c9">task</a>))</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;task[0] trying to sleep&quot;</span>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  tmp=*p;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  *p=<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;repeat: <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a7c764a1b0218921014431825397cdce8">state</a>=<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8f52c913830b57c112a0d33a1daf587d">TASK_INTERRUPTIBLE</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15">schedule</a>();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">// 如果等待队列中还有任务，并且队列头指针所指向的任务不是当前任务时，则将该等待任务置为就绪状态，</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">// 并重新执行调度程序。当指针 *p 所指向的不是当前任务时，表示在当前任务被放入队列后，又有新的</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">// 任务被插入等待队列中，因此，就应该将所有其它等待任务也置为可运行状态。</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">if</span>(*p &amp;&amp; *p != <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>){</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    ( * * p).state=0;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">goto</span> repeat;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">// 下面一句代码有误，应该是 *p=tmp ，让队列头指针指向其余等待任务，否则在当前任务之前插入等待队列</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">// 的任务均被抹掉了。当然，同时也需要删除 208 行上的语句</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  *p=<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">if</span>(tmp)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    tmp-&gt;<a class="code" href="structtask__struct.html#a7c764a1b0218921014431825397cdce8">state</a>=0;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a8f52c913830b57c112a0d33a1daf587d"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8f52c913830b57c112a0d33a1daf587d">TASK_INTERRUPTIBLE</a></div><div class="ttdeci">#define TASK_INTERRUPTIBLE</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00020">sched.h:20</a></div></div>
<div class="ttc" id="asrc_2kernel_2sched_8c_html_a8b614e45abc3e58768258131fceae7bd"><div class="ttname"><a href="src_2kernel_2sched_8c.html#a8b614e45abc3e58768258131fceae7bd">init_task</a></div><div class="ttdeci">static union task_union init_task</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2sched_8c_source.html#l00046">sched.c:53</a></div></div>
<div class="ttc" id="astructtask__struct_html"><div class="ttname"><a href="structtask__struct.html">task_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00080">sched.h:80</a></div></div>
<div class="ttc" id="astructtask__struct_html_a7c764a1b0218921014431825397cdce8"><div class="ttname"><a href="structtask__struct.html#a7c764a1b0218921014431825397cdce8">task_struct::state</a></div><div class="ttdeci">long state</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00082">sched.h:82</a></div></div>
<div class="ttc" id="auniontask__union_html_ad1dfbbf21707c070bbb65cf5d8dc99c9"><div class="ttname"><a href="uniontask__union.html#ad1dfbbf21707c070bbb65cf5d8dc99c9">task_union::task</a></div><div class="ttdeci">struct task_struct task</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00385">sched.c:54</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_a1e7f1f0c2e37cb25f642125fb32ffcec_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_a1e7f1f0c2e37cb25f642125fb32ffcec_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_a1e7f1f0c2e37cb25f642125fb32ffcec_cgraph" id="asrc_2kernel_2sched_8c_a1e7f1f0c2e37cb25f642125fb32ffcec_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,172,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="231,81,289,108"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="220,132,300,159"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="359,56,419,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="348,107,429,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="477,56,549,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="602,5,674,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="597,56,679,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="609,107,667,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_a1e7f1f0c2e37cb25f642125fb32ffcec_icgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_a1e7f1f0c2e37cb25f642125fb32ffcec_icgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_a1e7f1f0c2e37cb25f642125fb32ffcec_icgraph" id="asrc_2kernel_2sched_8c_a1e7f1f0c2e37cb25f642125fb32ffcec_icgraph">
<area shape="rect" title=" " alt="" coords="840,120,1007,147"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#abe1936a56cbf6ac4fb9d685078f38e9c" title=" " alt="" coords="673,63,789,89"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2tty__io_8c.html#a95a4702b2b80a770e8e6091a62efa991" title=" " alt="" coords="669,120,792,147"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2tty__io_8c.html#a31a8b84e58a2d1a0c7ffd0922f5ba3f3" title=" " alt="" coords="680,183,781,209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a53eefc9fcd3ae0cc20ec6eeea2dd6d44" title=" " alt="" coords="473,56,621,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="308,56,403,83"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a710bd8fc9f99d575d34e7fb7e64c8c09" title=" " alt="" coords="314,5,397,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="140,107,237,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a02dcfdb731cb4c5dfc6fcd8516dabf98" title=" " alt="" coords="142,56,235,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="5,107,92,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a97da1b73b641350471360707e39ed5f6" title=" " alt="" coords="147,5,231,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2char__dev_8c.html#af6c1964382930a12ed0726c855d9b628" title=" " alt="" coords="509,157,585,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a458d21c73fc4113236898d9afa004ed4" title=" " alt="" coords="285,107,425,133"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2char__dev_8c.html#a60e4722bc43d19889565a39c2f058e1d" title=" " alt="" coords="320,183,391,209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2char__dev_8c.html#ac606195a8d4461b6b12fdd87f935339a" title=" " alt="" coords="157,183,220,209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2char__dev_8c.html#ac9eded591fff3c631ee7551c468f5f71" title=" " alt="" coords="507,208,587,235"/>
</map>
</div>

</div>
</div>
<a id="ad02e340c756cdf6f835eb936aaa0b394"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad02e340c756cdf6f835eb936aaa0b394">&#9670;&nbsp;</a></span>math_state_restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void math_state_restore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00077">77</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                         {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a4a720faae9986c1917541956019c8a3b">last_task_used_math</a>==<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>)  <span class="comment">// 如果任务没变则返回(上一个任务是当前任务)</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// 这里所指的“上个任务”是刚被交换出去的任务</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  __asm__(<span class="stringliteral">&quot;fwait&quot;</span>); <span class="comment">// 在发送协处理器指令之前要先发 WAIT 指令</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a4a720faae9986c1917541956019c8a3b">last_task_used_math</a>) <span class="comment">// 如果上个任务使用了协处理器，则保存其状态</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    __asm__(<span class="stringliteral">&quot;fnsave %0&quot;</span>::<span class="stringliteral">&quot;m&quot;</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a4a720faae9986c1917541956019c8a3b">last_task_used_math</a>-&gt;<a class="code" href="structtask__struct.html#a5d739e2cde5e8828a687c539076535b5">tss</a>.<a class="code" href="structtss__struct.html#a58edc7ddd17400641060790ec8c41be2">i387</a>));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// 现在，last_task_used_math 指向当前任务</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a4a720faae9986c1917541956019c8a3b">last_task_used_math</a>=<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>;  <span class="comment">// 以备当前任务被交换出去时使用</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a65ad4a33e4bc3318629dbf2881ea12ff">used_math</a>)  <span class="comment">// 如果当前任务用过协处理器，则恢复其状态</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    __asm__(<span class="stringliteral">&quot;frstor %0&quot;</span>::<span class="stringliteral">&quot;m&quot;</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a5d739e2cde5e8828a687c539076535b5">tss</a>.<a class="code" href="structtss__struct.html#a58edc7ddd17400641060790ec8c41be2">i387</a>));</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">else</span>{ <span class="comment">// 否则说明是第一次使用</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    __asm__(<span class="stringliteral">&quot;fninit&quot;</span>::);  <span class="comment">// 于是就向协处理器发初始化指令</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a65ad4a33e4bc3318629dbf2881ea12ff">used_math</a>=1; <span class="comment">// 并设置使用了协处理器标志。</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a4a720faae9986c1917541956019c8a3b"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a4a720faae9986c1917541956019c8a3b">last_task_used_math</a></div><div class="ttdeci">struct task_struct * last_task_used_math</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00063">sched.c:63</a></div></div>
<div class="ttc" id="astructtask__struct_html_a5d739e2cde5e8828a687c539076535b5"><div class="ttname"><a href="structtask__struct.html#a5d739e2cde5e8828a687c539076535b5">task_struct::tss</a></div><div class="ttdeci">struct tss_struct tss</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00104">sched.h:108</a></div></div>
<div class="ttc" id="astructtask__struct_html_a65ad4a33e4bc3318629dbf2881ea12ff"><div class="ttname"><a href="structtask__struct.html#a65ad4a33e4bc3318629dbf2881ea12ff">task_struct::used_math</a></div><div class="ttdeci">unsigned short used_math</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00096">sched.h:96</a></div></div>
<div class="ttc" id="astructtss__struct_html_a58edc7ddd17400641060790ec8c41be2"><div class="ttname"><a href="structtss__struct.html#a58edc7ddd17400641060790ec8c41be2">tss_struct::i387</a></div><div class="ttdeci">struct i387_struct i387</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00076">sched.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b2a42c55545e4a2a101244d9b6624a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b2a42c55545e4a2a101244d9b6624a8">&#9670;&nbsp;</a></span>mem_use()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mem_use </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac76f0bd4fbafc057a2f780869968e3ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac76f0bd4fbafc057a2f780869968e3ed">&#9670;&nbsp;</a></span>sched_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sched_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00403">403</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                     {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keyword">struct </span><a class="code" href="structdesc__struct.html">desc_struct</a> *p;  <span class="comment">// 描述符表结构指针</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">if</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structsigaction.html">sigaction</a>)!=16)  <span class="comment">// sigaction 是存放有关信号状态的结构</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;Struct sigaction MUST be 16 bytes&quot;</span>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">// 设置初始任务(任务 0)的任务状态段描述符和局部数据表描述符(include/asm/system.h,2222)</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a96702af0c49d089dea06401ef7c35603">set_tss_desc</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2head_8h.html#a3e85239bce7eee478410603d53e53218">gdt</a>+<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#aefe0cea87f00996e61511690b95362aa">FIRST_TSS_ENTRY</a>,&amp;(<a class="code" href="src_2kernel_2sched_8c.html#a8b614e45abc3e58768258131fceae7bd">init_task</a>.<a class="code" href="uniontask__union.html#ad1dfbbf21707c070bbb65cf5d8dc99c9">task</a>.<a class="code" href="structtask__struct.html#a5d739e2cde5e8828a687c539076535b5">tss</a>));</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a2c14e0b2544e442c0ab14172a8ee869d">set_ldt_desc</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2head_8h.html#a3e85239bce7eee478410603d53e53218">gdt</a>+<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#af64191dd71668816b0163a4f16f01946">FIRST_LDT_ENTRY</a>,&amp;(<a class="code" href="src_2kernel_2sched_8c.html#a8b614e45abc3e58768258131fceae7bd">init_task</a>.<a class="code" href="uniontask__union.html#ad1dfbbf21707c070bbb65cf5d8dc99c9">task</a>.<a class="code" href="structtask__struct.html#a326ff4e561c98dd1d2a23d43d0a42ab6">ldt</a>));</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">// 清任务数组和描述符表项(注意 i=1 开始，所以出事任务的描述符还在)。</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  p=<a class="code" href="flash_2Linux-0_811_2include_2linux_2head_8h.html#a3e85239bce7eee478410603d53e53218">gdt</a>+2+<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#aefe0cea87f00996e61511690b95362aa">FIRST_TSS_ENTRY</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">for</span>(i=1;i&lt;<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a88a8e8596ba6eca6449e368319c9c73d">NR_TASKS</a>;i++){</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a32ae6a90bd92bba7a7d2103b2b0662d8">task</a>[i]=<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    p-&gt;<a class="code" href="structdesc__struct.html#a00779843173f46433332b3755a1dbb76">a</a>=p-&gt;<a class="code" href="structdesc__struct.html#ad2de39c74ab3f59efe296995c252004b">b</a>=0;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    p++;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    p-&gt;<a class="code" href="structdesc__struct.html#a00779843173f46433332b3755a1dbb76">a</a>=p-&gt;<a class="code" href="structdesc__struct.html#ad2de39c74ab3f59efe296995c252004b">b</a>=0;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    p++;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">// Clear NT,so that won&#39;t have trouble with that later on</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">// 清除标志寄存器中的位 NT，这样以后就不会有麻烦</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">// NT 标志用于控制程序的递归调用(Nested Task).当 NT 置位时，那么当前中断任务执行 iret 指令</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">// 时就会引起用户切换。NT 指出 TSS 中的 back_link 字段是否有效。</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  __asm__(<span class="stringliteral">&quot;pushfl;andl $0xffffbfff,(%esp);popfl&quot;</span>);  <span class="comment">// 复位 NT 标志</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a042a0680c2ba18df1a0eba940a01fc20">ltr</a>(0); <span class="comment">// 将任务 0 的 TSS 加载到任务寄存器 tr</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#ab09146d15a36413c5cf62b229f21111a">lldt</a>(0);  <span class="comment">// 将局部描述符表加载到局部描述符表寄存器</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">// 注意！！ 是将 GDT 中相应 LDT 描述符表的选择符加载到 ldtr。只明确加载这一次，以后新任务 LDT</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">// 的加载，是 CPU 根据 TSS 中的 LDT 项自动加载。</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">// 下面代码用于初始化 8253 定时器</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#ad1af5de58371ff9cb1778f6fd96d09f1">outb_p</a>(0x36,0x43);  <span class="comment">// binary,mode 3,LSB/MSB.ch 0</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#ad1af5de58371ff9cb1778f6fd96d09f1">outb_p</a>(<a class="code" href="src_2kernel_2sched_8c.html#ac2059fd29cfd2e7617b2dd6a0de2e0b5">LATCH</a> &amp; 0xff,0x40);  <span class="comment">// LSB  定时值低字节</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#aff0f5d0c71d15c5888f22f86b5ca841b">outb</a>(<a class="code" href="src_2kernel_2sched_8c.html#ac2059fd29cfd2e7617b2dd6a0de2e0b5">LATCH</a>&gt;&gt;8,0x40);  <span class="comment">// MSB  定时值高字节</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a59382a0c17b490da04ea9f9f68cf0c55">set_intr_gate</a>(0x20,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a716cae445f71ceadde1072c774c6b9bf">timer_interrupt</a>); <span class="comment">// 设置时钟中断处理句柄(设置时钟中断门)</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#aff0f5d0c71d15c5888f22f86b5ca841b">outb</a>(<a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#abbb81c8eae91d64a9b30d940985d09fc">inb_p</a>(0x21)&amp;~0x01,0x21); <span class="comment">// 修改中断控制器屏蔽码，允许时钟中断</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a3697f52b540e9cdffd4a31dc51ca3f4a">set_system_gate</a>(0x80,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#aab18a66658acfaf7fdb1dad14e1ea496">system_call</a>); <span class="comment">// 设置系统调用中断门</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2io_8h_html_abbb81c8eae91d64a9b30d940985d09fc"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2io_8h.html#abbb81c8eae91d64a9b30d940985d09fc">inb_p</a></div><div class="ttdeci">#define inb_p(port)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2io_8h_source.html#l00017">io.h:17</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2io_8h_html_ad1af5de58371ff9cb1778f6fd96d09f1"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2io_8h.html#ad1af5de58371ff9cb1778f6fd96d09f1">outb_p</a></div><div class="ttdeci">#define outb_p(value, port)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2io_8h_source.html#l00011">io.h:11</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_a2c14e0b2544e442c0ab14172a8ee869d"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a2c14e0b2544e442c0ab14172a8ee869d">set_ldt_desc</a></div><div class="ttdeci">#define set_ldt_desc(n, addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00066">system.h:66</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_a3697f52b540e9cdffd4a31dc51ca3f4a"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a3697f52b540e9cdffd4a31dc51ca3f4a">set_system_gate</a></div><div class="ttdeci">#define set_system_gate(n, addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00039">system.h:39</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_a59382a0c17b490da04ea9f9f68cf0c55"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a59382a0c17b490da04ea9f9f68cf0c55">set_intr_gate</a></div><div class="ttdeci">#define set_intr_gate(n, addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00033">system.h:33</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_a96702af0c49d089dea06401ef7c35603"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a96702af0c49d089dea06401ef7c35603">set_tss_desc</a></div><div class="ttdeci">#define set_tss_desc(n, addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00065">system.h:65</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2head_8h_html_a3e85239bce7eee478410603d53e53218"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2head_8h.html#a3e85239bce7eee478410603d53e53218">gdt</a></div><div class="ttdeci">desc_table gdt</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2head_8h_source.html#l00009">head.h:9</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a042a0680c2ba18df1a0eba940a01fc20"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a042a0680c2ba18df1a0eba940a01fc20">ltr</a></div><div class="ttdeci">#define ltr(n)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00159">sched.h:159</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a88a8e8596ba6eca6449e368319c9c73d"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a88a8e8596ba6eca6449e368319c9c73d">NR_TASKS</a></div><div class="ttdeci">#define NR_TASKS</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00004">sched.h:4</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_ab09146d15a36413c5cf62b229f21111a"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#ab09146d15a36413c5cf62b229f21111a">lldt</a></div><div class="ttdeci">#define lldt(n)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00160">sched.h:160</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_aefe0cea87f00996e61511690b95362aa"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#aefe0cea87f00996e61511690b95362aa">FIRST_TSS_ENTRY</a></div><div class="ttdeci">#define FIRST_TSS_ENTRY</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00155">sched.h:155</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_af64191dd71668816b0163a4f16f01946"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#af64191dd71668816b0163a4f16f01946">FIRST_LDT_ENTRY</a></div><div class="ttdeci">#define FIRST_LDT_ENTRY</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00156">sched.h:156</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a32ae6a90bd92bba7a7d2103b2b0662d8"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a32ae6a90bd92bba7a7d2103b2b0662d8">task</a></div><div class="ttdeci">struct task_struct * task[NR_TASKS]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00065">sched.c:65</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a716cae445f71ceadde1072c774c6b9bf"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a716cae445f71ceadde1072c774c6b9bf">timer_interrupt</a></div><div class="ttdeci">int timer_interrupt(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_aab18a66658acfaf7fdb1dad14e1ea496"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#aab18a66658acfaf7fdb1dad14e1ea496">system_call</a></div><div class="ttdeci">int system_call(void)</div></div>
<div class="ttc" id="asrc_2kernel_2sched_8c_html_ac2059fd29cfd2e7617b2dd6a0de2e0b5"><div class="ttname"><a href="src_2kernel_2sched_8c.html#ac2059fd29cfd2e7617b2dd6a0de2e0b5">LATCH</a></div><div class="ttdeci">#define LATCH</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2sched_8c_source.html#l00041">sched.c:41</a></div></div>
<div class="ttc" id="astructdesc__struct_html"><div class="ttname"><a href="structdesc__struct.html">desc_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2head_8h_source.html#l00004">head.h:4</a></div></div>
<div class="ttc" id="astructdesc__struct_html_a00779843173f46433332b3755a1dbb76"><div class="ttname"><a href="structdesc__struct.html#a00779843173f46433332b3755a1dbb76">desc_struct::a</a></div><div class="ttdeci">unsigned long a</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2head_8h_source.html#l00005">head.h:5</a></div></div>
<div class="ttc" id="astructdesc__struct_html_ad2de39c74ab3f59efe296995c252004b"><div class="ttname"><a href="structdesc__struct.html#ad2de39c74ab3f59efe296995c252004b">desc_struct::b</a></div><div class="ttdeci">unsigned long b</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2head_8h_source.html#l00005">head.h:5</a></div></div>
<div class="ttc" id="astructsigaction_html"><div class="ttname"><a href="structsigaction.html">sigaction</a></div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2signal_8h_source.html#l00048">signal.h:48</a></div></div>
<div class="ttc" id="astructtask__struct_html_a326ff4e561c98dd1d2a23d43d0a42ab6"><div class="ttname"><a href="structtask__struct.html#a326ff4e561c98dd1d2a23d43d0a42ab6">task_struct::ldt</a></div><div class="ttdeci">struct desc_struct ldt[3]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00104">sched.h:106</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_ac76f0bd4fbafc057a2f780869968e3ed_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_ac76f0bd4fbafc057a2f780869968e3ed_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_ac76f0bd4fbafc057a2f780869968e3ed_cgraph" id="asrc_2kernel_2sched_8c_ac76f0bd4fbafc057a2f780869968e3ed_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,93,159"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="173,81,230,108"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#aab18a66658acfaf7fdb1dad14e1ea496" title=" " alt="" coords="151,132,251,159"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a716cae445f71ceadde1072c774c6b9bf" title=" " alt="" coords="141,183,261,209"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="320,56,380,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="309,107,391,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="439,56,511,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="563,5,635,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="559,56,640,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="570,107,629,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_ac76f0bd4fbafc057a2f780869968e3ed_icgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_ac76f0bd4fbafc057a2f780869968e3ed_icgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_ac76f0bd4fbafc057a2f780869968e3ed_icgraph" id="asrc_2kernel_2sched_8c_ac76f0bd4fbafc057a2f780869968e3ed_icgraph">
<area shape="rect" title=" " alt="" coords="557,31,645,57"/>
<area shape="rect" href="src_2init_2main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667" title=" " alt="" coords="455,5,509,32"/>
<area shape="rect" href="flash_2Linux-0_811_2init_2main_8c.html#aedc96a40e844bc2efc8bbef1b0782702" title=" " alt="" coords="456,56,508,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#abe7ed9cd5a2bab0543d1ec98126b1b2c" title=" " alt="" coords="334,5,385,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#a377e8516180829f477606c9e971eade8" title=" " alt="" coords="331,56,387,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#afc318b86ebf9e88f5af7ca7077098a7f" title=" " alt="" coords="312,284,407,311"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2tty_8h.html#a1426c68492789f611d285f530c7ff19d" title=" " alt="" coords="171,5,257,32"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#ae9bbfad9a19a302b82cf82046bbb524e" title=" " alt="" coords="179,56,249,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2signal_8c.html#a06c58d4276ef5e9e8c96309b3b635613" title=" " alt="" coords="172,107,256,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2tty__ioctl_8c.html#a329f7cc69ddf54c9ed0b15bd39ce33d8" title=" " alt="" coords="167,157,261,184"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2ioctl_8c.html#a709d61416c8ec6675ca795d62495a3ae" title=" " alt="" coords="23,208,98,235"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2tty__ioctl_8c.html#a3999b4bae89c857b1742c230d023b7c0" title=" " alt="" coords="164,259,264,285"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2signal_8c.html#a4ac17838628ac8773a5c99d8293d7c0d" title=" " alt="" coords="174,309,254,336"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2read__write_8c.html#a8ace77218f609b6282577c9cb3a8cac5" title=" " alt="" coords="174,360,254,387"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sys_8c.html#a944189ed10ed5a3ba57f0fbd09f5e79b" title=" " alt="" coords="173,411,255,437"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sys_8c.html#ab12535d66aaba5404b7101d381a43b36" title=" " alt="" coords="170,461,258,488"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sys_8c.html#a45548e3c78799983a4fd25f7d50094c3" title=" " alt="" coords="166,512,262,539"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a69163056b363c343e0467605762db26c" title=" " alt="" coords="165,563,263,589"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a116c0c99bed8d1246fe4ad85421b14c5" title=" " alt="" coords="20,31,101,57"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2stat_8c.html#a8d4a37bb6cbbf7fe6db13504f67d9234" title=" " alt="" coords="23,81,99,108"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2signal_8c.html#ad631f34ef5e519a7bc9232a66aa43fbc" title=" " alt="" coords="5,309,116,336"/>
</map>
</div>

</div>
</div>
<a id="ac48128e72b303ea22d8ec641a9516b15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac48128e72b303ea22d8ec641a9516b15">&#9670;&nbsp;</a></span>schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void schedule </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00108">108</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                   {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordtype">int</span> i,next,c;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keyword">struct </span><a class="code" href="structtask__struct.html">task_struct</a> * * p;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">// 检测 alarm (进程的警报定时值),唤醒任何已得到信号的可中断任务</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">// check alarm,wake up any interruptible tasks that ahve got a signal</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">// 从任务数组中最后一个任务开始检测 alarm</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">for</span>(p=&amp;<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#abc4ed73e97cde0df36d05d8075614f17">LAST_TASK</a>;p&gt;&amp;<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a34c8eecdb7a88d11553137a71d7c2cc3">FIRST_TASK</a>;--p)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span>(*p){</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// 如果没有设置过任务的 alarm 并且任务的 alarm 时间已经过期(alarm&lt;jiffies)，则在信号位图中</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// 置 SIGALRM 信号，然后清 alarm。jiffies 是系统从开机算起的滴答数(10ms/滴答)。定义在 sched.h</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// 第 22222 行。</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">if</span>((*p)-&gt;alarm &amp;&amp; (*p)-&gt;alarm&lt;<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a>){</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;          (*p)-&gt;<a class="code" href="structtask__struct.html#a52bf129480ad1720d6672e94a8736b56">signal</a> |=(1&lt;&lt;(<a class="code" href="flash_2Linux-0_811_2include_2signal_8h.html#aa6946723c6b7a86ec3c33caaf832840b">SIGALRM</a>-1));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;          (*p)-&gt;alarm=0;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">// 如果信号位图中除被阻塞的信号外还有其他信号，并且任务处于可中断状态，则置任务为就绪状态。</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">// 其中 &#39;~(_BLOCKABLE &amp;(*p)-&gt;blocked)&#39; 用于忽略被阻塞的信号，但 SIGKILL 和 SIGSTOP</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">// 不能被阻塞。</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">if</span>(((*p)-&gt;signal &amp; ~(<a class="code" href="src_2kernel_2sched_8c.html#a7663d7fadaf4bac5e8bb574632ba0351">_BLOCKABLE</a> &amp; (*p)-&gt;blocked))&amp;&amp;(*p)-&gt;state==<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8f52c913830b57c112a0d33a1daf587d">TASK_INTERRUPTIBLE</a>)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        (*p)-&gt;state=<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a17e3f99a030e5dfefb8f9815600e3fed">TASK_RUNNING</a>; <span class="comment">// 置为就绪</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">// this is the schedule proper:</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">// 这里是调度程序的主要部分</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">while</span>(1){</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    c=-1;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    next=0;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    i=<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a88a8e8596ba6eca6449e368319c9c73d">NR_TASKS</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    p=&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a32ae6a90bd92bba7a7d2103b2b0662d8">task</a>[<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a88a8e8596ba6eca6449e368319c9c73d">NR_TASKS</a>];</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// 这段代码也是从任务数组最后任务开始循环处理，并跳过不含任务的槽。比较每个就绪状态任务的 counter</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// (任务运行时间的递减计数)值，哪个值大，运行时间还不长，next 就指向哪个任务号。</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">while</span>(--i){</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">if</span>(!*--p)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">if</span>((*p)-&gt;state==<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a17e3f99a030e5dfefb8f9815600e3fed">TASK_RUNNING</a> &amp;&amp; (*p) -&gt; <a class="code" href="structtask__struct.html#ae4e1fb3352913d7090328fb14a5f1ab6">counter</a>&gt;c)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        c=(*p)-&gt;<a class="code" href="structtask__struct.html#ae4e1fb3352913d7090328fb14a5f1ab6">counter</a>,next=i;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">// 如果比较得出有 counter 值大于 0 的结果，则退出 131 行开始的循环，执行任务切换 152 行</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span>(c) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">// 否则就根据每个任务的优先权值，更新每一个任务的 counter 值，然后回到 132 行重新进行比较。</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">// counter 值的计算方式为 counter=counter/2+priority。这里不考虑进程的状态。</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">for</span>(p=&amp;<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#abc4ed73e97cde0df36d05d8075614f17">LAST_TASK</a>;p&gt;&amp;<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a34c8eecdb7a88d11553137a71d7c2cc3">FIRST_TASK</a>;--p)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">if</span>(*p)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        (*p)-&gt;counter=((*p)-&gt;counter&gt;&gt;1)+(*p)-&gt;priority;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a444a341396090a8e0b8c52736b08bb42">switch_to</a>(next);  <span class="comment">// 切换到任务号为 next 的任务，并运行之。若无其他任务则运行任务 0.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a17e3f99a030e5dfefb8f9815600e3fed"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a17e3f99a030e5dfefb8f9815600e3fed">TASK_RUNNING</a></div><div class="ttdeci">#define TASK_RUNNING</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00019">sched.h:19</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a34c8eecdb7a88d11553137a71d7c2cc3"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a34c8eecdb7a88d11553137a71d7c2cc3">FIRST_TASK</a></div><div class="ttdeci">#define FIRST_TASK</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00007">sched.h:7</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a444a341396090a8e0b8c52736b08bb42"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a444a341396090a8e0b8c52736b08bb42">switch_to</a></div><div class="ttdeci">#define switch_to(n)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00173">sched.h:173</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_abc4ed73e97cde0df36d05d8075614f17"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#abc4ed73e97cde0df36d05d8075614f17">LAST_TASK</a></div><div class="ttdeci">#define LAST_TASK</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00008">sched.h:8</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2signal_8h_html_aa6946723c6b7a86ec3c33caaf832840b"><div class="ttname"><a href="flash_2Linux-0_811_2include_2signal_8h.html#aa6946723c6b7a86ec3c33caaf832840b">SIGALRM</a></div><div class="ttdeci">#define SIGALRM</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2signal_8h_source.html#l00026">signal.h:26</a></div></div>
<div class="ttc" id="asrc_2kernel_2sched_8c_html_a7663d7fadaf4bac5e8bb574632ba0351"><div class="ttname"><a href="src_2kernel_2sched_8c.html#a7663d7fadaf4bac5e8bb574632ba0351">_BLOCKABLE</a></div><div class="ttdeci">#define _BLOCKABLE</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2sched_8c_source.html#l00020">sched.c:20</a></div></div>
<div class="ttc" id="astructtask__struct_html_a52bf129480ad1720d6672e94a8736b56"><div class="ttname"><a href="structtask__struct.html#a52bf129480ad1720d6672e94a8736b56">task_struct::signal</a></div><div class="ttdeci">long signal</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00085">sched.h:85</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_ac48128e72b303ea22d8ec641a9516b15_icgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_ac48128e72b303ea22d8ec641a9516b15_icgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_ac48128e72b303ea22d8ec641a9516b15_icgraph" id="asrc_2kernel_2sched_8c_ac48128e72b303ea22d8ec641a9516b15_icgraph">
<area shape="rect" title=" " alt="" coords="523,50,603,77"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="129,25,200,51"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a4b358e49189bbfecc559204d6f1e8694" title=" " alt="" coords="399,75,470,102"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a69163056b363c343e0467605762db26c" title=" " alt="" coords="248,25,347,51"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2char__dev_8c.html#ac9eded591fff3c631ee7551c468f5f71" title=" " alt="" coords="395,126,475,153"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#ae8584b188355851cdd6f403cd5df3c12" title=" " alt="" coords="5,25,81,51"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a8ca56e7d5016dbf7a39ef89eeda70be6" title=" " alt="" coords="253,75,342,102"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2char__dev_8c.html#a60e4722bc43d19889565a39c2f058e1d" title=" " alt="" coords="262,126,333,153"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2char__dev_8c.html#ac606195a8d4461b6b12fdd87f935339a" title=" " alt="" coords="133,126,196,153"/>
</map>
</div>

</div>
</div>
<a id="ad117f749a66addb65b10396e08ad2ced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad117f749a66addb65b10396e08ad2ced">&#9670;&nbsp;</a></span>show_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void show_stat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00033">33</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                    {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a88a8e8596ba6eca6449e368319c9c73d">NR_TASKS</a>;i++) <span class="comment">// NR_TASKS 是系统能容纳的最大进程(任务)数量(64 个)</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a32ae6a90bd92bba7a7d2103b2b0662d8">task</a>[i]) <span class="comment">// 定义在 include/kernel/sched.h 第 4 行</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a1ad17830f10ab318d229f0b4f3e4278c">show_task</a>(i,<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a32ae6a90bd92bba7a7d2103b2b0662d8">task</a>[i]);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2sched_8c_html_a1ad17830f10ab318d229f0b4f3e4278c"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2sched_8c.html#a1ad17830f10ab318d229f0b4f3e4278c">show_task</a></div><div class="ttdeci">void show_task(int nr, struct task_struct *p)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00026">sched.c:26</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_ad117f749a66addb65b10396e08ad2ced_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_ad117f749a66addb65b10396e08ad2ced_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_ad117f749a66addb65b10396e08ad2ced_cgraph" id="asrc_2kernel_2sched_8c_ad117f749a66addb65b10396e08ad2ced_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,93,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a1ad17830f10ab318d229f0b4f3e4278c" title=" " alt="" coords="141,56,232,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="280,56,340,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="388,56,460,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="513,5,585,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="508,56,589,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="519,107,578,133"/>
</map>
</div>

</div>
</div>
<a id="a1ad17830f10ab318d229f0b4f3e4278c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ad17830f10ab318d229f0b4f3e4278c">&#9670;&nbsp;</a></span>show_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void show_task </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtask__struct.html">task_struct</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00023">23</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                                             {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <span class="keywordtype">int</span> i,j=4096-<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structtask__struct.html">task_struct</a>);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;%d:pid= %d,state=%d,&quot;</span>,nr,p-&gt;<a class="code" href="structtask__struct.html#a192ab89a0e8b299ff3fca4931e331667">pid</a>,p-&gt;<a class="code" href="structtask__struct.html#a7c764a1b0218921014431825397cdce8">state</a>);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  i=0;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keywordflow">while</span>(i&lt;j&amp;&amp;!((<span class="keywordtype">char</span> *)(p+1))[i]) <span class="comment">// 检测指定任务数据结构以后等于 0 的字节数</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    i++;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;%d(of %d)chars free in kernel stack\n\r&quot;</span>,i,j);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2kernel_8h_html_a929c48d2c61fe71be34a9cdf0ab04fcc"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a></div><div class="ttdeci">int printk(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2printk_8c_source.html#l00021">printk.c:21</a></div></div>
<div class="ttc" id="astructtask__struct_html_a192ab89a0e8b299ff3fca4931e331667"><div class="ttname"><a href="structtask__struct.html#a192ab89a0e8b299ff3fca4931e331667">task_struct::pid</a></div><div class="ttdeci">long pid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00091">sched.h:91</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_a1ad17830f10ab318d229f0b4f3e4278c_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_a1ad17830f10ab318d229f0b4f3e4278c_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_a1ad17830f10ab318d229f0b4f3e4278c_cgraph" id="asrc_2kernel_2sched_8c_a1ad17830f10ab318d229f0b4f3e4278c_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,96,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="144,56,204,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="252,56,324,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="377,5,449,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="372,56,453,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="383,107,442,133"/>
</map>
</div>

</div>
</div>
<a id="a8ee0eea1a206d256d223fd33292ddb5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ee0eea1a206d256d223fd33292ddb5d">&#9670;&nbsp;</a></span>sleep_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sleep_on </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtask__struct.html">task_struct</a> **&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00165">165</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                       {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keyword">struct </span><a class="code" href="structtask__struct.html">task_struct</a> * tmp;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">// 若指针无效，则退出(指针所指的对象可以是 NULL，但指针本身不会为 0)。</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">if</span>(!p)  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>== &amp;(<a class="code" href="src_2kernel_2sched_8c.html#a8b614e45abc3e58768258131fceae7bd">init_task</a>.<a class="code" href="uniontask__union.html#ad1dfbbf21707c070bbb65cf5d8dc99c9">task</a>)) <span class="comment">// 如果当前任务是任务 0，则死机(不可能).</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;task[0] trying to sleep&quot;</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  tmp=*p; <span class="comment">// 让 tmp 指向已经在等待队列上的任务(如果有的话)</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  *p=<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>; <span class="comment">// 将睡眠队列头的等待指针指向当前任务。</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a7c764a1b0218921014431825397cdce8">state</a>=<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a797095919d5e24e5dc00c4d0bbc7ec31">TASK_UNINTERRUPTIBLE</a>; <span class="comment">// 将当前任务置为不可中断的等待状态</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15">schedule</a>(); <span class="comment">// 重新调度</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">// 只有当这个等待任务被唤醒时，调度程序才又返回到这里，则表示进程已被明确地唤醒。既然大家都在等待</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">// 相同的资源，那么在资源可用时，就有必要唤醒所有等待该资源的进程。该函数嵌套调用，也会嵌套唤醒</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">// 所有等待该资源的进程。</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span>(tmp) <span class="comment">// 若还存在等待的任务，则也将其置为就绪状态(唤醒)</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    tmp-&gt;<a class="code" href="structtask__struct.html#a7c764a1b0218921014431825397cdce8">state</a>=0;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a797095919d5e24e5dc00c4d0bbc7ec31"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a797095919d5e24e5dc00c4d0bbc7ec31">TASK_UNINTERRUPTIBLE</a></div><div class="ttdeci">#define TASK_UNINTERRUPTIBLE</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00021">sched.h:21</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_a8ee0eea1a206d256d223fd33292ddb5d_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_a8ee0eea1a206d256d223fd33292ddb5d_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_a8ee0eea1a206d256d223fd33292ddb5d_cgraph" id="asrc_2kernel_2sched_8c_a8ee0eea1a206d256d223fd33292ddb5d_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,85,133"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="145,81,202,108"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="133,132,213,159"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="272,56,332,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="261,107,343,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="391,56,463,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="515,5,587,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="511,56,592,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="522,107,581,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_a8ee0eea1a206d256d223fd33292ddb5d_icgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_a8ee0eea1a206d256d223fd33292ddb5d_icgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_a8ee0eea1a206d256d223fd33292ddb5d_icgraph" id="asrc_2kernel_2sched_8c_a8ee0eea1a206d256d223fd33292ddb5d_icgraph">
<area shape="rect" title=" " alt="" coords="1741,1502,1821,1529"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a197cebc7bc8d67773a979e92c14b40c0" title=" " alt="" coords="1251,565,1313,592"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#a304a48e632da3fd0006aa586f7cc7ca7" title=" " alt="" coords="1587,178,1681,205"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#ae0d0119949a9c5eed9b1128db4f13674" title=" " alt="" coords="1400,26,1515,53"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa4df3c26552f5d09c7a0d6b080baf55" title=" " alt="" coords="1061,1528,1153,1554"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a3f4f567cec35d4d407a20030574e7024" title=" " alt="" coords="1236,1832,1328,1858"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2pipe_8c.html#a00c254a1f8234faf9def51bc2c54c59e" title=" " alt="" coords="1591,1528,1677,1554"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a96f49dc697e8292e946ba7680ebecf96" title=" " alt="" coords="1575,657,1693,684"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#aef87a93dd139de38ca5b9baac78f4ccc" title=" " alt="" coords="1224,2009,1340,2036"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a443c3c886626b03f1130aa6a8758f8ef" title=" " alt="" coords="1576,1578,1692,1605"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2pipe_8c.html#ab3c0b63f7a3761cde15f67ce11f8be76" title=" " alt="" coords="1589,1781,1679,1808"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#a9af8af96c24b2aee5f949b116decfd02" title=" " alt="" coords="868,236,965,262"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="1078,666,1137,693"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7bcdedc1f5ba7597461c3a49559e5b12" title=" " alt="" coords="1058,134,1157,161"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a1b310db1dc1e28275c0888c724d48724" title=" " alt="" coords="1074,286,1141,313"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="1062,1224,1153,1250"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="883,1249,950,1276"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="871,844,963,870"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="873,438,960,465"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="144,1097,233,1124"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="291,1097,381,1124"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="873,894,961,921"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="877,945,956,972"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="875,996,958,1022"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="293,1198,379,1225"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="686,793,769,820"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="879,793,954,820"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#afe8b61fe00bf63ea72d91f7a1d1b6d09" title=" " alt="" coords="881,337,952,364"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="5,413,92,440"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="869,1528,964,1554"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="680,1528,775,1554"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="867,1477,966,1504"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="313,1832,359,1858"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a516f58ff075ed9e15bb77645c5d55b56" title=" " alt="" coords="140,1528,237,1554"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a233cbadcd057272f37322a707c908989" title=" " alt="" coords="660,1908,795,1934"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="435,1477,481,1504"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a4e8b4c0a66f6ea10acdb053c4f4e8c79" title=" " alt="" coords="676,1578,779,1605"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a6f09e1a09832c2a7f44ea07d32fd426e" title=" " alt="" coords="285,1730,387,1757"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a95df8a2e491bf4181e3d7b6ddfc755a3" title=" " alt="" coords="529,1376,612,1402"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a3c674993ee07115ee464f88503882488" title=" " alt="" coords="530,33,611,60"/>
<area shape="rect" href="flash_2Linux-0_811_2mm_2memory_8c.html#a55531a8e8bf5db98f751b376994ded87" title=" " alt="" coords="867,134,967,161"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#aaaa32bea7c458e274286421ec9c6266f" title=" " alt="" coords="870,286,963,313"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#af9add4ad497e3b9eae67e2cbf7cea45e" title=" " alt="" coords="1235,109,1329,136"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7d20b074bcbc61719507a1f8e55b0606" title=" " alt="" coords="1064,1730,1151,1757"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a53eefc9fcd3ae0cc20ec6eeea2dd6d44" title=" " alt="" coords="843,1781,991,1808"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="1251,844,1313,870"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a26c3be9640a543377e6c6f8d189c83e9" title=" " alt="" coords="1397,616,1518,642"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#acea2962102f7d035a1778ac7ca18c538" title=" " alt="" coords="1388,1629,1527,1656"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#aaab8557dc3b2ebf624bb29642d0753c6" title=" " alt="" coords="1039,1933,1176,1960"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a43f836df13a239d2197028d56018edba" title=" " alt="" coords="1239,1604,1325,1630"/>
</map>
</div>

</div>
</div>
<a id="a37d84c215ba10664a8e2859e1bc79a93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37d84c215ba10664a8e2859e1bc79a93">&#9670;&nbsp;</a></span>sys_alarm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_alarm </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00364">364</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                           {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordtype">int</span> old=<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a0e5b73ccd6d17da05b7d7b4f12840dd7">alarm</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span>(old)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    old=(old-<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a>)/<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a0e5b73ccd6d17da05b7d7b4f12840dd7">alarm</a>=(seconds&gt;0)?(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a37aca3305753442605b0762afa99a07e">jiffies</a>+<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a>*seconds):0;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div>
<div class="ttc" id="astructtask__struct_html_a0e5b73ccd6d17da05b7d7b4f12840dd7"><div class="ttname"><a href="structtask__struct.html#a0e5b73ccd6d17da05b7d7b4f12840dd7">task_struct::alarm</a></div><div class="ttdeci">long alarm</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00094">sched.h:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad8be7e26f5fca92fbd18b3967eff5583"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8be7e26f5fca92fbd18b3967eff5583">&#9670;&nbsp;</a></span>sys_getegid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_getegid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00393">393</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                     {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#adcb9e4efc2b55fd489bcf687399d2cc9">egid</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="ttc" id="astructtask__struct_html_adcb9e4efc2b55fd489bcf687399d2cc9"><div class="ttname"><a href="structtask__struct.html#adcb9e4efc2b55fd489bcf687399d2cc9">task_struct::egid</a></div><div class="ttdeci">unsigned short egid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00093">sched.h:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a39dcd4514f07d0ce177895dd1e1ecbcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39dcd4514f07d0ce177895dd1e1ecbcd">&#9670;&nbsp;</a></span>sys_geteuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_geteuid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00385">385</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                     {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a6b38eba448cc0f45a2b49404daf0c52e">euid</a>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div>
<div class="ttc" id="astructtask__struct_html_a6b38eba448cc0f45a2b49404daf0c52e"><div class="ttname"><a href="structtask__struct.html#a6b38eba448cc0f45a2b49404daf0c52e">task_struct::euid</a></div><div class="ttdeci">unsigned short euid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00092">sched.h:92</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a14eba039c00be33b2247170394dc3fc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14eba039c00be33b2247170394dc3fc3">&#9670;&nbsp;</a></span>sys_getgid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_getgid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00389">389</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#af7e5f7a28da9a65ad09fb728dc67b932">gid</a>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div>
<div class="ttc" id="astructtask__struct_html_af7e5f7a28da9a65ad09fb728dc67b932"><div class="ttname"><a href="structtask__struct.html#af7e5f7a28da9a65ad09fb728dc67b932">task_struct::gid</a></div><div class="ttdeci">unsigned short gid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00093">sched.h:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac81965412a0725574b8c72afda11243e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac81965412a0725574b8c72afda11243e">&#9670;&nbsp;</a></span>sys_getpid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_getpid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00373">373</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a192ab89a0e8b299ff3fca4931e331667">pid</a>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9da8311322924d20b2bf48e7a474248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9da8311322924d20b2bf48e7a474248">&#9670;&nbsp;</a></span>sys_getppid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_getppid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00377">377</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                     {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a889eead58452db4f8a717d529db3476f">father</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
<div class="ttc" id="astructtask__struct_html_a889eead58452db4f8a717d529db3476f"><div class="ttname"><a href="structtask__struct.html#a889eead58452db4f8a717d529db3476f">task_struct::father</a></div><div class="ttdeci">long father</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00091">sched.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa83305cc922ff56521e79402a46b69f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa83305cc922ff56521e79402a46b69f1">&#9670;&nbsp;</a></span>sys_getuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_getuid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00381">381</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                    {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#abac0f8ffacd11e176771b03caa4b890c">uid</a>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="ttc" id="astructtask__struct_html_abac0f8ffacd11e176771b03caa4b890c"><div class="ttname"><a href="structtask__struct.html#abac0f8ffacd11e176771b03caa4b890c">task_struct::uid</a></div><div class="ttdeci">unsigned short uid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00092">sched.h:92</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af85a189b3ff6ee8f9b8c09314a4aab8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85a189b3ff6ee8f9b8c09314a4aab8d">&#9670;&nbsp;</a></span>sys_nice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_nice </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>increment</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00397">397</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                            {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a8193f5ec2b16adca8548c1933ea32ac4">priority</a>-increment&gt;0)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a8193f5ec2b16adca8548c1933ea32ac4">priority</a>-=increment;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div>
<div class="ttc" id="astructtask__struct_html_a8193f5ec2b16adca8548c1933ea32ac4"><div class="ttname"><a href="structtask__struct.html#a8193f5ec2b16adca8548c1933ea32ac4">task_struct::priority</a></div><div class="ttdeci">long priority</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00084">sched.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b40933fbbecf5e20bd8e6a1cdf6353f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b40933fbbecf5e20bd8e6a1cdf6353f">&#9670;&nbsp;</a></span>sys_pause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_pause </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00158">158</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                   {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a7c764a1b0218921014431825397cdce8">state</a>=<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8f52c913830b57c112a0d33a1daf587d">TASK_INTERRUPTIBLE</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15">schedule</a>();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_a8b40933fbbecf5e20bd8e6a1cdf6353f_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_a8b40933fbbecf5e20bd8e6a1cdf6353f_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_a8b40933fbbecf5e20bd8e6a1cdf6353f_cgraph" id="asrc_2kernel_2sched_8c_a8b40933fbbecf5e20bd8e6a1cdf6353f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,96,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2sched_8c.html#ac48128e72b303ea22d8ec641a9516b15" title=" " alt="" coords="144,5,224,32"/>
</map>
</div>

</div>
</div>
<a id="aab18a66658acfaf7fdb1dad14e1ea496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab18a66658acfaf7fdb1dad14e1ea496">&#9670;&nbsp;</a></span>system_call()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int system_call </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abc0dfac0621c67bb6a1faf733bbe82f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc0dfac0621c67bb6a1faf733bbe82f5">&#9670;&nbsp;</a></span>ticks_to_floppy_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ticks_to_floppy_on </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00224">224</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                       {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a4c0237fdbba78af703ee275cc492a8b1">selected</a>;  <span class="comment">// 当前选中的软盘号(blk_drv/floppy.c 139)</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mask=0x10&lt;&lt;nr;  <span class="comment">// 所选软驱对应数字输出寄存器中启动马达比特位。</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span>(nr&gt;3)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258">panic</a>(<span class="stringliteral">&quot;floppy_on: nr&gt;3&quot;</span>); <span class="comment">// 最多 4 个软驱</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="src_2kernel_2sched_8c.html#ab218c7c6e6e256c43506e0c421328851">moff_timer</a>[nr]=10000; <span class="comment">// 100 s =very big :-)</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a68c330e94fe121eba993e5a5973c3162">cli</a>();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  mask|=<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a4c0237fdbba78af703ee275cc492a8b1">selected</a>){  <span class="comment">// 若非当前软驱，则先复位其它软驱选择位，然后置对应软驱选择位</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    mask&amp;=0xFC;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    mask|=nr;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">// 如果数字输出寄存器的当前值与要求的值不同，则向 FDC 数字输出端口输出新值(mask)。并且如果要求启动</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">// 的电动机还没有启动，则置相应软驱的电动机启动定时器值(HZ/2=0.5 秒或 50 个滴答)</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// 此后更新当前数字输出寄存器值 current_DOR.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span>(mask!=<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a>){</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#aff0f5d0c71d15c5888f22f86b5ca841b">outb</a>(mask,<a class="code" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a89b40b36cb9fad0b750cd7df087c920c">FD_DOR</a>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span>((mask^<a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a>)&amp;0xf0)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <a class="code" href="src_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[nr]=<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a8489802eaedf42fdb5f2ce1708eaffa2">HZ</a>/2;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="src_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[nr]&lt;2)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <a class="code" href="src_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[nr]=2;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="flash_2Linux-0_811_2kernel_2sched_8c.html#a581bf75201a0c19048387d483845bdb5">current_DOR</a>=mask;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#ac5d15f274bc9b1e96230f3d3c60fd1f8">sti</a>();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="src_2kernel_2sched_8c.html#afbc5015fa1359261094d4aa4d309a149">mon_timer</a>[nr];</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_html_a4c0237fdbba78af703ee275cc492a8b1"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a4c0237fdbba78af703ee275cc492a8b1">selected</a></div><div class="ttdeci">unsigned char selected</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c_source.html#l00122">floppy.c:122</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_abc0dfac0621c67bb6a1faf733bbe82f5_cgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_abc0dfac0621c67bb6a1faf733bbe82f5_cgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_abc0dfac0621c67bb6a1faf733bbe82f5_cgraph" id="asrc_2kernel_2sched_8c_abc0dfac0621c67bb6a1faf733bbe82f5_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,148,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#ab43c5eded9a063f60e583332eaa73258" title=" " alt="" coords="196,81,253,108"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc" title=" " alt="" coords="312,56,372,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2panic_8c.html#acc81aedafa96378bafb37b5bccbccb20" title=" " alt="" coords="301,107,383,133"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2printk_8c.html#aaa83f2a89dae6d03dfe15deae29f383a" title=" " alt="" coords="431,56,503,83"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#ac2f4c669c6f6aa6caa5ab8adb1b07dd0" title=" " alt="" coords="555,5,627,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2vsprintf_8c.html#a3fa7c8ef8597579301cb4b5c59bc6d9a" title=" " alt="" coords="551,56,632,83"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2string_8h.html#a2dee044e4e667b5b789b493abd21cfa4" title=" " alt="" coords="562,107,621,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_abc0dfac0621c67bb6a1faf733bbe82f5_icgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_abc0dfac0621c67bb6a1faf733bbe82f5_icgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_abc0dfac0621c67bb6a1faf733bbe82f5_icgraph" id="asrc_2kernel_2sched_8c_abc0dfac0621c67bb6a1faf733bbe82f5_icgraph">
<area shape="rect" title=" " alt="" coords="1003,207,1145,233"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a06e6fc6f4a9928ed7ca3b92c5e1aa6e9" title=" " alt="" coords="840,207,955,233"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a1d799ddf9a7fe6dfea15646acacc6338" title=" " alt="" coords="674,5,791,32"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a22aa6849ea2eba2f259d33e2a8d0bd59" title=" " alt="" coords="487,68,625,95"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#abd1fd9a68f5c49bfb7ab6bbe78b6a5e5" title=" " alt="" coords="673,131,792,157"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#ae7ef0adb7b854c68e71519740e5bde05" title=" " alt="" coords="682,232,783,259"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#aa75ba625c96dd049ce11fe73d6c7541e" title=" " alt="" coords="492,283,620,309"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a47089b6922ed13076dc6be59c42a8053" title=" " alt="" coords="323,333,439,360"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a8ca55f4aa2fc641f1390a8cccac15ac7" title=" " alt="" coords="201,359,275,385"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a6f41207dab16e9eb642875cf30c7018b" title=" " alt="" coords="505,156,607,183"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2floppy_8c.html#a8b1b0844261bdb5e0e9f41e83e7df7d3" title=" " alt="" coords="5,409,153,436"/>
</map>
</div>

</div>
</div>
<a id="a716cae445f71ceadde1072c774c6b9bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a716cae445f71ceadde1072c774c6b9bf">&#9670;&nbsp;</a></span>timer_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int timer_interrupt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="add6d90b147b8d600062919f0220600f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add6d90b147b8d600062919f0220600f4">&#9670;&nbsp;</a></span>wake_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wake_up </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtask__struct.html">task_struct</a> **&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00205">205</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                      {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span>(p &amp;&amp; *p){</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    (**p).state=0;  <span class="comment">// 置为就绪(可运行)状态</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    *p=<a class="code" href="flash_2Linux-0_811_2include_2linux_2fs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="src_2kernel_2sched_8c_add6d90b147b8d600062919f0220600f4_icgraph.png" border="0" usemap="#asrc_2kernel_2sched_8c_add6d90b147b8d600062919f0220600f4_icgraph" alt=""/></div>
<map name="asrc_2kernel_2sched_8c_add6d90b147b8d600062919f0220600f4_icgraph" id="asrc_2kernel_2sched_8c_add6d90b147b8d600062919f0220600f4_icgraph">
<area shape="rect" title=" " alt="" coords="1051,2132,1129,2159"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad15c8296a5599c15736bb9383050eec7" title=" " alt="" coords="908,1005,971,1032"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#afa76e75f45af948cbb6e5da444038f40" title=" " alt="" coords="459,1727,505,1753"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2tty_8h.html#a9af3cad869b357548cf803fe1e551f38" title=" " alt="" coords="876,2284,1003,2311"/>
<area shape="rect" href="flash_2Linux-0_811_2include_2linux_2fdreg_8h.html#a5cd2212a8db9d1d8c34699a51d5f896a" title=" " alt="" coords="877,2081,1001,2108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#a1f4011b4e7734262f636282bc641139c" title=" " alt="" coords="894,2031,985,2057"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2pipe_8c.html#a00c254a1f8234faf9def51bc2c54c59e" title=" " alt="" coords="896,2183,983,2209"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2ll__rw__blk_8c.html#aee00866ea6c51121a5cabe13ca77c191" title=" " alt="" coords="884,2233,995,2260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a349a2c9da0dd73f8e8324143772650d6" title=" " alt="" coords="720,1777,828,1804"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2pipe_8c.html#ab3c0b63f7a3761cde15f67ce11f8be76" title=" " alt="" coords="894,2335,985,2361"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#ad19b3562cfd0ced5718591d63d158b26" title=" " alt="" coords="589,460,656,487"/>
<area shape="rect" href="src_2fs_2namei_8c.html#a2f643a217cf62507f4b1ebad773e0a29" title=" " alt="" coords="577,663,669,689"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a3d23fd77008f787f6d7d80ed7e30d1db" title=" " alt="" coords="301,865,388,892"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ad08df58f033bd23ea1315499d697a3b0" title=" " alt="" coords="148,1119,251,1145"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a66e6e29e97a5c76efd95d4cb140f8a24" title=" " alt="" coords="15,1271,90,1297"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a484b43eaa2a0c71c933dca84174f496f" title=" " alt="" coords="155,789,244,816"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a329edacaaf13eaf9a95b006a7675d84e" title=" " alt="" coords="151,1017,247,1044"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#aaaa32bea7c458e274286421ec9c6266f" title=" " alt="" coords="576,169,669,196"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2block__dev_8c.html#a9af8af96c24b2aee5f949b116decfd02" title=" " alt="" coords="574,232,671,259"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#ad78fac6715f3c28e0cf0522df36a111f" title=" " alt="" coords="745,967,803,993"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2exec_8c.html#a91e86d0620f471b2fa1276658f635455" title=" " alt="" coords="7,1819,98,1845"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a731206f30268d8d5f9f1763141a2d8b0" title=" " alt="" coords="579,1372,667,1399"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a27d1ae044824cfad6f765292986d316a" title=" " alt="" coords="156,1372,243,1399"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#a4e2f9d60bcd651f1f0f09f2ae79464c2" title=" " alt="" coords="583,713,662,740"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2file__dev_8c.html#aef91e97413092bbfe7e95259433a3b58" title=" " alt="" coords="581,1068,664,1095"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a13fdfb79df1bf5e5f9b0db0b484e26ed" title=" " alt="" coords="301,1271,388,1297"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#a658203e2c0a6d0bf5f672b319e3880dd" title=" " alt="" coords="166,1473,233,1500"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#ae192f1ee0225a7a7c86385b7bf653ac2" title=" " alt="" coords="168,1929,231,1956"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2namei_8c.html#aefea47c20c5dfe12a0815af38f767b4f" title=" " alt="" coords="154,1549,245,1576"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#a9127b9c1a0eae2a1f7d5ff723f5d3563" title=" " alt="" coords="441,1144,523,1171"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2truncate_8c.html#af203200db3c89f320ff91fafa6ff4e98" title=" " alt="" coords="585,1169,660,1196"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#afe8b61fe00bf63ea72d91f7a1d1b6d09" title=" " alt="" coords="587,359,658,385"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2blk__drv_2hd_8c.html#a1e990fd03a090a3504d84824343bc54a" title=" " alt="" coords="439,359,525,385"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#af3c9d35d7418d0b20df66b259199cedb" title=" " alt="" coords="575,1575,670,1601"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2super_8c.html#abd49a5c5f108e9b275586df332564e38" title=" " alt="" coords="575,1473,670,1500"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a35a7c0ed9f4a491c42318c15ecefd197" title=" " alt="" coords="573,1727,672,1753"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7bcdedc1f5ba7597461c3a49559e5b12" title=" " alt="" coords="725,55,823,81"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a1b310db1dc1e28275c0888c724d48724" title=" " alt="" coords="741,257,807,284"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#abdd0da83359d6f16a52320c44c41c526" title=" " alt="" coords="729,1220,819,1247"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#a3f051047ee70eb8464844e3ab6b430af" title=" " alt="" coords="729,409,819,436"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2buffer_8c.html#a7d20b074bcbc61719507a1f8e55b0606" title=" " alt="" coords="731,2081,817,2108"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a9be063177c32c1c12fedb43fc223f20e" title=" " alt="" coords="5,1888,100,1915"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a837b903fbb61e1e7f5f3b6fe75cddcea" title=" " alt="" coords="11,1968,94,1995"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#ab1034e286b88da9661927f127cb51ba7" title=" " alt="" coords="5,2056,100,2083"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#a762bca791b54ecba3696f76c6184204d" title=" " alt="" coords="6,2183,99,2209"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2open_8c.html#aa1b3b6fd527147d503d81563d606f6a1" title=" " alt="" coords="7,2233,99,2260"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2inode_8c.html#a78b297f206aacdb913d2db4db1ef6689" title=" " alt="" coords="321,1524,368,1551"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2exit_8c.html#a30772d89021c1d79338fbd93ceed5762" title=" " alt="" coords="309,1929,380,1956"/>
<area shape="rect" href="flash_2Linux-0_811_2fs_2bitmap_8c.html#aa17030f2c3706317c68a4552b2d8f61e" title=" " alt="" coords="299,1017,391,1044"/>
<area shape="rect" href="flash_2Linux-0_811_2kernel_2chr__drv_2console_8c.html#a90b66c15f7da2194244b47064f7b3f59" title=" " alt="" coords="737,2284,811,2311"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a528b92115c4bb60d7b46de7e09ea0bae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a528b92115c4bb60d7b46de7e09ea0bae">&#9670;&nbsp;</a></span>a</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long* a</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00066">66</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a14c92240a8c7badaaa4e18952e560053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c92240a8c7badaaa4e18952e560053">&#9670;&nbsp;</a></span>b</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short b</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00067">67</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a476ec09a598028a09942c2233aa5127e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a476ec09a598028a09942c2233aa5127e">&#9670;&nbsp;</a></span>current</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtask__struct.html">task_struct</a>* current =&amp;(<a class="el" href="src_2kernel_2sched_8c.html#a32ae6a90bd92bba7a7d2103b2b0662d8">init_task.task</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00058">58</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a581bf75201a0c19048387d483845bdb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a581bf75201a0c19048387d483845bdb5">&#9670;&nbsp;</a></span>current_DOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char current_DOR =0x0C</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00222">222</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a8b614e45abc3e58768258131fceae7bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b614e45abc3e58768258131fceae7bd">&#9670;&nbsp;</a></span>init_task</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="uniontask__union.html">task_union</a> init_task ={<a class="el" href="src_2include_2linux_2sched_8h.html#a0a5b2a7a38d56a68c5c86d94ac594db6">INIT_TASK</a>,}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00046">46</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a37aca3305753442605b0762afa99a07e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37aca3305753442605b0762afa99a07e">&#9670;&nbsp;</a></span>jiffies</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long volatile jiffies =0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00056">56</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a4a720faae9986c1917541956019c8a3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a720faae9986c1917541956019c8a3b">&#9670;&nbsp;</a></span>last_task_used_math</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtask__struct.html">task_struct</a>* last_task_used_math =<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00059">59</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="ab218c7c6e6e256c43506e0c421328851"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab218c7c6e6e256c43506e0c421328851">&#9670;&nbsp;</a></span>moff_timer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int moff_timer[4] ={0,0,0,0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00221">221</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="afbc5015fa1359261094d4aa4d309a149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc5015fa1359261094d4aa4d309a149">&#9670;&nbsp;</a></span>mon_timer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mon_timer[4] ={0,0,0,0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00220">220</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a4a2fd6a6a4ad81747ab920eb87fe1549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a2fd6a6a4ad81747ab920eb87fe1549">&#9670;&nbsp;</a></span>next_timer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtimer__list.html">timer_list</a> * next_timer[<a class="el" href="src_2kernel_2sched_8c.html#ae4db57ef4cd102bbe3b7f5aab2991fca">TIME_REQUESTS</a>] =<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a09b8ff62b9072512c7ffaa50f75e8984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09b8ff62b9072512c7ffaa50f75e8984">&#9670;&nbsp;</a></span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }  stack_start</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a39b7cd6026b7abf239ace8f11306e205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39b7cd6026b7abf239ace8f11306e205">&#9670;&nbsp;</a></span>startup_time</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long startup_time =0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00057">57</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a32ae6a90bd92bba7a7d2103b2b0662d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ae6a90bd92bba7a7d2103b2b0662d8">&#9670;&nbsp;</a></span>task</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtask__struct.html">task_struct</a>* task[<a class="el" href="src_2include_2linux_2sched_8h.html#a88a8e8596ba6eca6449e368319c9c73d">NR_TASKS</a>] ={&amp;(init_task.task),}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00061">61</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a8da6b8319e1f3d2153a622255d75ca60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8da6b8319e1f3d2153a622255d75ca60">&#9670;&nbsp;</a></span>timer_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtimer__list.html">timer_list</a> <a class="el" href="structtimer__list.html">timer_list</a>[<a class="el" href="src_2kernel_2sched_8c.html#ae4db57ef4cd102bbe3b7f5aab2991fca">TIME_REQUESTS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a83d92e245645fe5e69db546edf9dfd26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83d92e245645fe5e69db546edf9dfd26">&#9670;&nbsp;</a></span>user_stack</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long user_stack[<a class="el" href="src_2include_2linux_2mm_8h.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a> &gt;&gt;2]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00063">63</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
<a id="a7acd8ec210022a3ca399b5ee9e6d05f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7acd8ec210022a3ca399b5ee9e6d05f6">&#9670;&nbsp;</a></span>wait_motor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtask__struct.html">task_struct</a>* wait_motor[4] ={<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="el" href="src_2include_2unistd_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2kernel_2sched_8c_source.html#l00219">219</a> of file <a class="el" href="src_2kernel_2sched_8c_source.html">sched.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_cbd7f246bdf7dc0a50281a272327e6ed.html">kernel</a></li><li class="navelem"><a class="el" href="src_2kernel_2sched_8c.html">sched.c</a></li>
    <li class="footer">Generated on Fri Sep 8 2023 09:26:41 for linux by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
