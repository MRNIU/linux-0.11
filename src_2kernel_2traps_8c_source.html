<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux: /home/runner/work/linux-0.11/linux-0.11/src/kernel/traps.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux
   &#160;<span id="projectnumber">0.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('src_2kernel_2traps_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">traps.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="src_2kernel_2traps_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * &#39;Traps.c&#39; handles hardware traps and faults after we have saved some state in</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * &#39;asm.s&#39;.Currently mostly a debugging-aid,will be extended to mainly kill the</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * offending process (probably by giving it a signal,but possibly bu kissing it</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * outright if necessary).</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/* 在程序 asm.s 中保存了一些状态后，本程序用来处理硬件陷阱和故障。目前主要用于调试目的，以后</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * 将扩展用来杀死遭损坏的进程(主要是通过发送一个信号，但如有必要也会直接杀死)</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include&lt;string.h&gt;</span>  <span class="comment">// 字符串头文件。主要定义了一些有关字符串操作的嵌入函数</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include&lt;linux/head.h&gt;</span>  <span class="comment">// head 头文件。主要定义了段描述符的简单结构，和几个选择符常量</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include&lt;linux/sched.h&gt;</span> <span class="comment">// 调度程序头文件，定义了任务结构 task_struct、初始任务 0 的数据</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include&lt;linux/kernel.h&gt;</span>  <span class="comment">// 内核头文件。含有一些内核常用函数的原形定义</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include&lt;asm/system.h&gt;</span>  <span class="comment">// 系统头文件。定义了设置或修改描述符/中断门等的嵌入式汇编函数</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include&lt;asm/segment.h&gt;</span> <span class="comment">// 段操作头文件。定义了有关段寄存器操作的嵌入式汇编函数</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include&lt;asm/io.h&gt;</span>  <span class="comment">// 输入/输出头文件。定义硬件端口输入/输出宏汇编语句。</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// 以下语句定义了三个嵌入式汇编宏语句函数。取段 seg 中地址 addr 处的一个字节。</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// 用圆括号括住的组合语句(花括号中间的语句)可以作为表达式使用，其中最后的 _res 是其输出值。</span></div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a3ce3d7cb45f8ab8e423a59da88b9c29f">   20</a></span>&#160;<span class="preprocessor">#define get_seg_byte(seg,addr)({\</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">register char __res;\</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">__asm__(&quot;push %%fs;mov %%ax,%%fs;movb %%fs: %2,%%al;pop %%fs&quot;</span>\</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        :&quot;=a&quot;(__res):&quot;0&quot;(seg),&quot;m&quot;(*(addr)));\</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;__res;})</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// 取段 seg 中地址 addr 处的一个长字(4 字节)。</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#ae4ebce0c29ce64d93c66271ccfb3555c">   26</a></span>&#160;<span class="preprocessor">#define get_seg_long(seg,addr)({\</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">register unsigned long __res;\</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">__asm__(&quot;push %%fs;mov %%ax,%%fs;movl %%fs: %2,%%eax;pop %%fs&quot;</span>\</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        :&quot;=a&quot;(__res):&quot;0&quot;(seg),&quot;m&quot;(*(addr)));\</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;__res;})</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// 取 fs 段寄存器的值(选择符)</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a62146c91753b53baed6dceb950a942ab">   32</a></span>&#160;<span class="preprocessor">#define _fs()({\</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">register unsigned short __res;\</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">__asm__(&quot;mov %%fs,%%ax&quot;</span>:&quot;=a&quot;(__res):);\</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;__res;})</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// 以下定义了一些函数原形</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keywordtype">int</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a30772d89021c1d79338fbd93ceed5762">do_exit</a>(<span class="keywordtype">long</span> code); <span class="comment">// 程序退出处理 (kernel/exit.c 102 行)</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a4a7fe091cfd87a8b0c7aa45967cde259">   39</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a4a7fe091cfd87a8b0c7aa45967cde259">page_exception</a>(<span class="keywordtype">void</span>);  <span class="comment">// 页异常，实际是 page_fault (mm/page.s 2222 行)</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// 以下定义了一些中断处理程序原形，代码在(kernel/asm.s 或 system_call.s)中</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#aa576d0c4f8920b5437af7b8d4564d032">   41</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aa576d0c4f8920b5437af7b8d4564d032">divide_error</a>(<span class="keywordtype">void</span>);  <span class="comment">// int0 (kernel/asm.s 20)s</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a146ba59440b7ebfb099f2ceb23d0a60f">   42</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a146ba59440b7ebfb099f2ceb23d0a60f">debug</a>(<span class="keywordtype">void</span>); <span class="comment">// int1 (kernel/asm.s 54)</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#add85efcd0f679b2bf261890fd9a3bdb3">   43</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#add85efcd0f679b2bf261890fd9a3bdb3">nmi</a>(<span class="keywordtype">void</span>); <span class="comment">// int2 (kernel/asm.s 58)</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#ae335c1861c4d66f0261c9052e6dcfc6c">   44</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#ae335c1861c4d66f0261c9052e6dcfc6c">int3</a>(<span class="keywordtype">void</span>);  <span class="comment">// int3 (kernel/asm.s 62)</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#ab69b13817a99feddc272895027a4c4e2">   45</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#ab69b13817a99feddc272895027a4c4e2">overflow</a>(<span class="keywordtype">void</span>);  <span class="comment">// int4 (kernel/asm.s 66)</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a8f9679ccc213b2e80a3ec58d28abb387">   46</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a8f9679ccc213b2e80a3ec58d28abb387">bounds</a>(<span class="keywordtype">void</span>);  <span class="comment">// int5 (kernel/asm.s 70)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a015a584cc3b6f8ac504279683e96e495">   47</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a015a584cc3b6f8ac504279683e96e495">invalid_op</a>(<span class="keywordtype">void</span>);  <span class="comment">// int6 (kernel/asm.s 74)</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a26d7f69418cc6a5aa9d9153d43e9632a">   48</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a26d7f69418cc6a5aa9d9153d43e9632a">device_not_available</a>(<span class="keywordtype">void</span>);  <span class="comment">// int7 (kernel/system_call.s 173)</span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a68ea9321b4398cdd0db2a86ad8a59967">   49</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a68ea9321b4398cdd0db2a86ad8a59967">double_fault</a>(<span class="keywordtype">void</span>);  <span class="comment">// int8 (kernel/asm.s 101)</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a7e24147f2a84260c1b26ad061d135fe4">   50</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a7e24147f2a84260c1b26ad061d135fe4">coprocessor_segment_overrun</a>(<span class="keywordtype">void</span>); <span class="comment">// int9 (kernel/asm.s 78)</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#ae0d70fedb9587180712fe3246922c555">   51</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#ae0d70fedb9587180712fe3246922c555">invalid_TSS</a>(<span class="keywordtype">void</span>); <span class="comment">// int10 (kernel/asm.s 135)</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a73b48fccd61a718cc7d60884b111760e">   52</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a73b48fccd61a718cc7d60884b111760e">segment_not_present</a>(<span class="keywordtype">void</span>); <span class="comment">// int11 (kernel/asm.s 139)</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a3c99e79fa2b3fb1327f6007037f12982">   53</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a3c99e79fa2b3fb1327f6007037f12982">stack_segment</a>(<span class="keywordtype">void</span>); <span class="comment">// int12 (kernel/asm.s 143)</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a3a004fa105f4b77ec27e70ebc7e34c91">   54</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a3a004fa105f4b77ec27e70ebc7e34c91">general_protection</a>(<span class="keywordtype">void</span>);  <span class="comment">// int13 (kernel/asm.s 147)</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#afa41580818a256dccd45c27d8488f435">   55</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#afa41580818a256dccd45c27d8488f435">page_fault</a>(<span class="keywordtype">void</span>);  <span class="comment">// int14 (mm/page.s 22222)</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#afa81779d9d75b45b852dd58ed968732a">   56</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#afa81779d9d75b45b852dd58ed968732a">coprocessor_error</a>(<span class="keywordtype">void</span>); <span class="comment">// int16 (kernel/system_call.s 151)</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#aba652690756ff9e349625bfc93cf8e30">   57</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aba652690756ff9e349625bfc93cf8e30">reserved</a>(<span class="keywordtype">void</span>);  <span class="comment">// int15 (kernel/asm.s 82)</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a90bc6980de335a04f4878638324f272c">   58</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a90bc6980de335a04f4878638324f272c">parallel_interrupt</a>(<span class="keywordtype">void</span>);  <span class="comment">// int39 (kernel/system_call.s 325)</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a035c5d689f6583512ea6624adad5e00f">   59</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a035c5d689f6583512ea6624adad5e00f">irq13</a>(<span class="keywordtype">void</span>); <span class="comment">// int45 协处理器中断处理(kernel/asm.s 86)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">// 该子程序用来打印出错中断的名称、出错号、调用程序的 EIP,EFLAGS,ESP,fs 段寄存器值、段的基址、</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">// 段的长度、进程号 pid 、任务号、10 字节指令码。如果堆栈在用户段，则还打印 16 字节的堆栈内容。</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">   62</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="keywordtype">char</span> * <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a6eb27b2d46d74c1332e524ba031aa7b7">str</a>,<span class="keywordtype">long</span> esp_ptr,<span class="keywordtype">long</span> nr){</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">long</span> * esp=(<span class="keywordtype">long</span> *)esp_ptr;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;%s: %04x\n\r&quot;</span>,<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a6eb27b2d46d74c1332e524ba031aa7b7">str</a>,nr&amp;0xffff);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;EIP:\t %04x: %p\nEFLAGS:\t %p\nESP:\t %04x: %p\n&quot;</span>,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        esp[1],esp[0],esp[2],esp[4],esp[3]);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;base: %p,limit: %p\n&quot;</span>,<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a9dd1e6646ae18eb198ab5c9882b4f1a0">get_base</a>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a326ff4e561c98dd1d2a23d43d0a42ab6">ldt</a>[1]),<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a17e07a3b0c01ae08bc0fe1136c24a092">get_limit</a>(0x17));</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">if</span>(esp[4]==0x17){</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;Stack:&quot;</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <span class="keywordflow">for</span>(i=0;i&lt;4;i++)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;%p&quot;</span>,<a class="code" href="src_2kernel_2traps_8c.html#ae4ebce0c29ce64d93c66271ccfb3555c">get_seg_long</a>(0x17,i+(<span class="keywordtype">long</span>*)esp[3]));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a6eb27b2d46d74c1332e524ba031aa7b7">str</a>(i); <span class="comment">// 取当前运行任务的任务号(include/linux/sched.h 22222)</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;Pid: %d,process nr: %d\n\r&quot;</span>,<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a>-&gt;<a class="code" href="structtask__struct.html#a192ab89a0e8b299ff3fca4931e331667">pid</a>,0xffff&amp;i);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">for</span>(i=0;i&lt;10;i++)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;%02x&quot;</span>,0xff&amp;<a class="code" href="src_2kernel_2traps_8c.html#a3ce3d7cb45f8ab8e423a59da88b9c29f">get_seg_byte</a>(esp[1],(i+(<span class="keywordtype">char</span> *)esp[0])));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;\n\r&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a30772d89021c1d79338fbd93ceed5762">do_exit</a>(11);  <span class="comment">// play segment exception.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">// 以下这些以 do_ 开头的函数是对应名称中断处理程序调用的 C 函数。</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a9e1bc205aad6743a609417d293cb70e5">   84</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a9e1bc205aad6743a609417d293cb70e5">do_double_fault</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;double fault&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#aa1925a55f2a5fed466915485e70f528f">   88</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aa1925a55f2a5fed466915485e70f528f">do_general_protection</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;general protection&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a7c180128b87348ee1182a31255573e5f">   92</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a7c180128b87348ee1182a31255573e5f">do_divide_error</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;divide error&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a5bd4dadce38ffa6c1a0b4d1c713ea908">   96</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a5bd4dadce38ffa6c1a0b4d1c713ea908">do_int3</a>(<span class="keywordtype">long</span> * esp,<span class="keywordtype">long</span> error_code,<span class="keywordtype">long</span> fs,<span class="keywordtype">long</span> es,<span class="keywordtype">long</span> ds,<span class="keywordtype">long</span> ebp,<span class="keywordtype">long</span> esi,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;              <span class="keywordtype">long</span> edi,<span class="keywordtype">long</span> edx,<span class="keywordtype">long</span> ecx,<span class="keywordtype">long</span> ebx,<span class="keywordtype">long</span> eax){</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordtype">int</span> tr;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  __asm__(<span class="stringliteral">&quot;str %%ax&quot;</span>:<span class="stringliteral">&quot;=a&quot;</span>(tr):<span class="stringliteral">&quot;&quot;</span>(0)); <span class="comment">// 取任务寄存器值-&gt;tr</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;eax\t\tebx\t\tecx\t\tedx\n\r%8x\t%8x\t%8x\t%8x\n\r&quot;</span>,eax,ebx,ecx,edx);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;esi\t\tedi\t\tebp\t\tesp\n\r%8x\t%8x\t%8x\t%8x\n\r&quot;</span>,esi,edi,ebp,(<span class="keywordtype">long</span>) esp);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;\n\rds\tes\tfs\ttr\n\r%4x\t%4x\t%4x\t%4x\n\r&quot;</span>,ds,es,fs,tr);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a>(<span class="stringliteral">&quot;EIP: %8x   CS: %4x   EFLAGS: %8x\n\r&quot;</span>,esp[0],esp[1],esp[2]);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a2f0ef19252a8e55bcda0e2c7443aee8a">  107</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a2f0ef19252a8e55bcda0e2c7443aee8a">do_nmi</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;nmi&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#ab6e881eb5c6ae67d614cc46694a80545">  111</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#ab6e881eb5c6ae67d614cc46694a80545">do_debug</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;debug&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a0e6a39a120511bd6b08597543a42e534">  115</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a0e6a39a120511bd6b08597543a42e534">do_overflow</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;overflow&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#aacb6474adb2ca80b05c0bfa3f59af75b">  119</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aacb6474adb2ca80b05c0bfa3f59af75b">do_bounds</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;bounds&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#aba70e26a207f9cd8f263a0edccb81a29">  123</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aba70e26a207f9cd8f263a0edccb81a29">do_invalid_op</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;invalid operand&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;}</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#adef0eb624cbb93426afc98395aa91cf3">  127</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#adef0eb624cbb93426afc98395aa91cf3">do_device_not_available</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;device not available&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a12a1a3cf09c81b0d29b463eb73ca99d1">  131</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a12a1a3cf09c81b0d29b463eb73ca99d1">do_coprocessor_segment_overrun</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;coprocessor segment overrun&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#aab241d75cc1a5dac7b68e77dacbbe078">  135</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aab241d75cc1a5dac7b68e77dacbbe078">do_invalid_TSS</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;invalid TSS&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a9e2e596ee1142000b1bf62a5dff80c74">  139</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a9e2e596ee1142000b1bf62a5dff80c74">do_segment_not_present</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;segment not present&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#aa349e4c241f0d102c325dcd77ab4873b">  143</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aa349e4c241f0d102c325dcd77ab4873b">do_stack_segment</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;stack segment&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#aada0af61ab9ea3fc684ed558291b17c7">  147</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aada0af61ab9ea3fc684ed558291b17c7">do_coprocessor_error</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a4a720faae9986c1917541956019c8a3b">last_task_used_math</a>!=<a class="code" href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a>)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;coprocessor error&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#addb0622e54d0b525af535f4e33f3fea4">  153</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#addb0622e54d0b525af535f4e33f3fea4">do_reserved</a>(<span class="keywordtype">long</span> esp,<span class="keywordtype">long</span> error_code){</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a>(<span class="stringliteral">&quot;reserved (15,17-47) error&quot;</span>,esp,error_code);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// 下面是异常(陷阱)中断程序初始化子程序。设置中断调用门(中断向量)。set_trap_gate() 与</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">// set_system_gate() 主要区别在于前者设置的特权级为 0，后者 3.因此断点 int3,溢出 overflow</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// 和边界出错 bounds 可由任何程序产生。这两个函数均是嵌入式汇编宏。(include/asm/system.h 2222 行)</span></div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="src_2kernel_2traps_8c.html#a7d104d6bebefa5a97c55a9b4f6c937fb">  159</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a7fd306118b826212968bc1f2d4045f61">trap_init</a>(){</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(0,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aa576d0c4f8920b5437af7b8d4564d032">divide_error</a>); <span class="comment">// 设置除操作出错的中断向量值。下同。</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(1,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a146ba59440b7ebfb099f2ceb23d0a60f">debug</a>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(2,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#add85efcd0f679b2bf261890fd9a3bdb3">nmi</a>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a3697f52b540e9cdffd4a31dc51ca3f4a">set_system_gate</a>(3,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#ae335c1861c4d66f0261c9052e6dcfc6c">int3</a>); <span class="comment">/* int3-5 can be called from all */</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a3697f52b540e9cdffd4a31dc51ca3f4a">set_system_gate</a>(4,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#ab69b13817a99feddc272895027a4c4e2">overflow</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a3697f52b540e9cdffd4a31dc51ca3f4a">set_system_gate</a>(5,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a8f9679ccc213b2e80a3ec58d28abb387">bounds</a>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(6,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a015a584cc3b6f8ac504279683e96e495">invalid_op</a>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(7,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a26d7f69418cc6a5aa9d9153d43e9632a">device_not_available</a>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(8,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a68ea9321b4398cdd0db2a86ad8a59967">double_fault</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(9,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a7e24147f2a84260c1b26ad061d135fe4">coprocessor_segment_overrun</a>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(10,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#ae0d70fedb9587180712fe3246922c555">invalid_TSS</a>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(11,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a73b48fccd61a718cc7d60884b111760e">segment_not_present</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(12,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a3c99e79fa2b3fb1327f6007037f12982">stack_segment</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(13,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a3a004fa105f4b77ec27e70ebc7e34c91">general_protection</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(14,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#afa41580818a256dccd45c27d8488f435">page_fault</a>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(15,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aba652690756ff9e349625bfc93cf8e30">reserved</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(16,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#afa81779d9d75b45b852dd58ed968732a">coprocessor_error</a>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordflow">for</span>(i=17;i&lt;48;i++)  <span class="comment">// 将 int17~48 的陷阱门先均设置为 resored ，以后各硬件初始化时</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(i,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#aba652690756ff9e349625bfc93cf8e30">reserved</a>); <span class="comment">// 会重新设置自己的陷阱门</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(45,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a035c5d689f6583512ea6624adad5e00f">irq13</a>); <span class="comment">// 设置协处理器的陷阱门</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#ad1af5de58371ff9cb1778f6fd96d09f1">outb_p</a>(<a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#abbb81c8eae91d64a9b30d940985d09fc">inb_p</a>(0x21)&amp;0xfb,0x21);  <span class="comment">// 允许主 8259A 芯片的 IRQ2 中断请求。</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#ad1af5de58371ff9cb1778f6fd96d09f1">outb_p</a>(<a class="code" href="flash_2Linux-0_811_2include_2asm_2io_8h.html#abbb81c8eae91d64a9b30d940985d09fc">inb_p</a>(0xA1)&amp;0xdf,0xA1);  <span class="comment">// 允许从 8259A 芯片的 IRQ13 中断请求。</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a>(39,&amp;<a class="code" href="flash_2Linux-0_811_2kernel_2traps_8c.html#a90bc6980de335a04f4878638324f272c">parallel_interrupt</a>);  <span class="comment">// 设置并行口的陷阱门。</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2io_8h_html_abbb81c8eae91d64a9b30d940985d09fc"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2io_8h.html#abbb81c8eae91d64a9b30d940985d09fc">inb_p</a></div><div class="ttdeci">#define inb_p(port)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2io_8h_source.html#l00017">io.h:17</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2io_8h_html_ad1af5de58371ff9cb1778f6fd96d09f1"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2io_8h.html#ad1af5de58371ff9cb1778f6fd96d09f1">outb_p</a></div><div class="ttdeci">#define outb_p(value, port)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2io_8h_source.html#l00011">io.h:11</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_a3697f52b540e9cdffd4a31dc51ca3f4a"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#a3697f52b540e9cdffd4a31dc51ca3f4a">set_system_gate</a></div><div class="ttdeci">#define set_system_gate(n, addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00039">system.h:39</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2asm_2system_8h_html_aad37ca1a6291135c6eb51f0eb0588c67"><div class="ttname"><a href="flash_2Linux-0_811_2include_2asm_2system_8h.html#aad37ca1a6291135c6eb51f0eb0588c67">set_trap_gate</a></div><div class="ttdeci">#define set_trap_gate(n, addr)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2asm_2system_8h_source.html#l00036">system.h:36</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2kernel_8h_html_a929c48d2c61fe71be34a9cdf0ab04fcc"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2kernel_8h.html#a929c48d2c61fe71be34a9cdf0ab04fcc">printk</a></div><div class="ttdeci">int printk(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2printk_8c_source.html#l00021">printk.c:21</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a17e07a3b0c01ae08bc0fe1136c24a092"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a17e07a3b0c01ae08bc0fe1136c24a092">get_limit</a></div><div class="ttdeci">#define get_limit(segment)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00251">sched.h:251</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a476ec09a598028a09942c2233aa5127e"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a476ec09a598028a09942c2233aa5127e">current</a></div><div class="ttdeci">struct task_struct * current</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00062">sched.c:62</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a4a720faae9986c1917541956019c8a3b"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a4a720faae9986c1917541956019c8a3b">last_task_used_math</a></div><div class="ttdeci">struct task_struct * last_task_used_math</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2sched_8c_source.html#l00063">sched.c:63</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a6eb27b2d46d74c1332e524ba031aa7b7"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a6eb27b2d46d74c1332e524ba031aa7b7">str</a></div><div class="ttdeci">#define str(n)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00161">sched.h:161</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2include_2linux_2sched_8h_html_a9dd1e6646ae18eb198ab5c9882b4f1a0"><div class="ttname"><a href="flash_2Linux-0_811_2include_2linux_2sched_8h.html#a9dd1e6646ae18eb198ab5c9882b4f1a0">get_base</a></div><div class="ttdeci">#define get_base(ldt)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00249">sched.h:249</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a015a584cc3b6f8ac504279683e96e495"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a015a584cc3b6f8ac504279683e96e495">invalid_op</a></div><div class="ttdeci">void invalid_op(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a035c5d689f6583512ea6624adad5e00f"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a035c5d689f6583512ea6624adad5e00f">irq13</a></div><div class="ttdeci">void irq13(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a0e6a39a120511bd6b08597543a42e534"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a0e6a39a120511bd6b08597543a42e534">do_overflow</a></div><div class="ttdeci">void do_overflow(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00129">traps.c:129</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a12a1a3cf09c81b0d29b463eb73ca99d1"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a12a1a3cf09c81b0d29b463eb73ca99d1">do_coprocessor_segment_overrun</a></div><div class="ttdeci">void do_coprocessor_segment_overrun(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00149">traps.c:149</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a146ba59440b7ebfb099f2ceb23d0a60f"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a146ba59440b7ebfb099f2ceb23d0a60f">debug</a></div><div class="ttdeci">void debug(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a26d7f69418cc6a5aa9d9153d43e9632a"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a26d7f69418cc6a5aa9d9153d43e9632a">device_not_available</a></div><div class="ttdeci">void device_not_available(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a2f0ef19252a8e55bcda0e2c7443aee8a"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a2f0ef19252a8e55bcda0e2c7443aee8a">do_nmi</a></div><div class="ttdeci">void do_nmi(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00119">traps.c:119</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a30772d89021c1d79338fbd93ceed5762"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a30772d89021c1d79338fbd93ceed5762">do_exit</a></div><div class="ttdeci">int do_exit(long code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2exit_8c_source.html#l00102">exit.c:102</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a3a004fa105f4b77ec27e70ebc7e34c91"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a3a004fa105f4b77ec27e70ebc7e34c91">general_protection</a></div><div class="ttdeci">void general_protection(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a3c99e79fa2b3fb1327f6007037f12982"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a3c99e79fa2b3fb1327f6007037f12982">stack_segment</a></div><div class="ttdeci">void stack_segment(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a4a7fe091cfd87a8b0c7aa45967cde259"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a4a7fe091cfd87a8b0c7aa45967cde259">page_exception</a></div><div class="ttdeci">void page_exception(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a5bd4dadce38ffa6c1a0b4d1c713ea908"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a5bd4dadce38ffa6c1a0b4d1c713ea908">do_int3</a></div><div class="ttdeci">void do_int3(long *esp, long error_code, long fs, long es, long ds, long ebp, long esi, long edi, long edx, long ecx, long ebx, long eax)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00102">traps.c:102</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a68ea9321b4398cdd0db2a86ad8a59967"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a68ea9321b4398cdd0db2a86ad8a59967">double_fault</a></div><div class="ttdeci">void double_fault(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a73b48fccd61a718cc7d60884b111760e"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a73b48fccd61a718cc7d60884b111760e">segment_not_present</a></div><div class="ttdeci">void segment_not_present(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a7c180128b87348ee1182a31255573e5f"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a7c180128b87348ee1182a31255573e5f">do_divide_error</a></div><div class="ttdeci">void do_divide_error(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00097">traps.c:97</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a7e24147f2a84260c1b26ad061d135fe4"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a7e24147f2a84260c1b26ad061d135fe4">coprocessor_segment_overrun</a></div><div class="ttdeci">void coprocessor_segment_overrun(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a7fd306118b826212968bc1f2d4045f61"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a7fd306118b826212968bc1f2d4045f61">trap_init</a></div><div class="ttdeci">void trap_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00181">traps.c:181</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a8f9679ccc213b2e80a3ec58d28abb387"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a8f9679ccc213b2e80a3ec58d28abb387">bounds</a></div><div class="ttdeci">void bounds(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a90bc6980de335a04f4878638324f272c"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a90bc6980de335a04f4878638324f272c">parallel_interrupt</a></div><div class="ttdeci">void parallel_interrupt(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a9e1bc205aad6743a609417d293cb70e5"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a9e1bc205aad6743a609417d293cb70e5">do_double_fault</a></div><div class="ttdeci">void do_double_fault(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00087">traps.c:87</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_a9e2e596ee1142000b1bf62a5dff80c74"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#a9e2e596ee1142000b1bf62a5dff80c74">do_segment_not_present</a></div><div class="ttdeci">void do_segment_not_present(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00159">traps.c:159</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_aa1925a55f2a5fed466915485e70f528f"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#aa1925a55f2a5fed466915485e70f528f">do_general_protection</a></div><div class="ttdeci">void do_general_protection(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00092">traps.c:92</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_aa349e4c241f0d102c325dcd77ab4873b"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#aa349e4c241f0d102c325dcd77ab4873b">do_stack_segment</a></div><div class="ttdeci">void do_stack_segment(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00164">traps.c:164</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_aa576d0c4f8920b5437af7b8d4564d032"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#aa576d0c4f8920b5437af7b8d4564d032">divide_error</a></div><div class="ttdeci">void divide_error(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_aab241d75cc1a5dac7b68e77dacbbe078"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#aab241d75cc1a5dac7b68e77dacbbe078">do_invalid_TSS</a></div><div class="ttdeci">void do_invalid_TSS(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00154">traps.c:154</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_aacb6474adb2ca80b05c0bfa3f59af75b"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#aacb6474adb2ca80b05c0bfa3f59af75b">do_bounds</a></div><div class="ttdeci">void do_bounds(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00134">traps.c:134</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_aada0af61ab9ea3fc684ed558291b17c7"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#aada0af61ab9ea3fc684ed558291b17c7">do_coprocessor_error</a></div><div class="ttdeci">void do_coprocessor_error(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00169">traps.c:169</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_ab69b13817a99feddc272895027a4c4e2"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#ab69b13817a99feddc272895027a4c4e2">overflow</a></div><div class="ttdeci">void overflow(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_ab6e881eb5c6ae67d614cc46694a80545"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#ab6e881eb5c6ae67d614cc46694a80545">do_debug</a></div><div class="ttdeci">void do_debug(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00124">traps.c:124</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_aba652690756ff9e349625bfc93cf8e30"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#aba652690756ff9e349625bfc93cf8e30">reserved</a></div><div class="ttdeci">void reserved(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_aba70e26a207f9cd8f263a0edccb81a29"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#aba70e26a207f9cd8f263a0edccb81a29">do_invalid_op</a></div><div class="ttdeci">void do_invalid_op(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00139">traps.c:139</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_add85efcd0f679b2bf261890fd9a3bdb3"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#add85efcd0f679b2bf261890fd9a3bdb3">nmi</a></div><div class="ttdeci">void nmi(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_addb0622e54d0b525af535f4e33f3fea4"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#addb0622e54d0b525af535f4e33f3fea4">do_reserved</a></div><div class="ttdeci">void do_reserved(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00176">traps.c:176</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_adef0eb624cbb93426afc98395aa91cf3"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#adef0eb624cbb93426afc98395aa91cf3">do_device_not_available</a></div><div class="ttdeci">void do_device_not_available(long esp, long error_code)</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2kernel_2traps_8c_source.html#l00144">traps.c:144</a></div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_ae0d70fedb9587180712fe3246922c555"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#ae0d70fedb9587180712fe3246922c555">invalid_TSS</a></div><div class="ttdeci">void invalid_TSS(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_ae335c1861c4d66f0261c9052e6dcfc6c"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#ae335c1861c4d66f0261c9052e6dcfc6c">int3</a></div><div class="ttdeci">void int3(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_afa41580818a256dccd45c27d8488f435"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#afa41580818a256dccd45c27d8488f435">page_fault</a></div><div class="ttdeci">void page_fault(void)</div></div>
<div class="ttc" id="aflash_2Linux-0_811_2kernel_2traps_8c_html_afa81779d9d75b45b852dd58ed968732a"><div class="ttname"><a href="flash_2Linux-0_811_2kernel_2traps_8c.html#afa81779d9d75b45b852dd58ed968732a">coprocessor_error</a></div><div class="ttdeci">void coprocessor_error(void)</div></div>
<div class="ttc" id="asrc_2kernel_2traps_8c_html_a001c1c32b169eed2bbfc4e862f0f1919"><div class="ttname"><a href="src_2kernel_2traps_8c.html#a001c1c32b169eed2bbfc4e862f0f1919">die</a></div><div class="ttdeci">static void die(char *str, long esp_ptr, long nr)</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2traps_8c_source.html#l00062">traps.c:62</a></div></div>
<div class="ttc" id="asrc_2kernel_2traps_8c_html_a3ce3d7cb45f8ab8e423a59da88b9c29f"><div class="ttname"><a href="src_2kernel_2traps_8c.html#a3ce3d7cb45f8ab8e423a59da88b9c29f">get_seg_byte</a></div><div class="ttdeci">#define get_seg_byte(seg, addr)</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2traps_8c_source.html#l00020">traps.c:20</a></div></div>
<div class="ttc" id="asrc_2kernel_2traps_8c_html_ae4ebce0c29ce64d93c66271ccfb3555c"><div class="ttname"><a href="src_2kernel_2traps_8c.html#ae4ebce0c29ce64d93c66271ccfb3555c">get_seg_long</a></div><div class="ttdeci">#define get_seg_long(seg, addr)</div><div class="ttdef"><b>Definition:</b> <a href="src_2kernel_2traps_8c_source.html#l00026">traps.c:26</a></div></div>
<div class="ttc" id="astructtask__struct_html_a192ab89a0e8b299ff3fca4931e331667"><div class="ttname"><a href="structtask__struct.html#a192ab89a0e8b299ff3fca4931e331667">task_struct::pid</a></div><div class="ttdeci">long pid</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00091">sched.h:91</a></div></div>
<div class="ttc" id="astructtask__struct_html_a326ff4e561c98dd1d2a23d43d0a42ab6"><div class="ttname"><a href="structtask__struct.html#a326ff4e561c98dd1d2a23d43d0a42ab6">task_struct::ldt</a></div><div class="ttdeci">struct desc_struct ldt[3]</div><div class="ttdef"><b>Definition:</b> <a href="flash_2Linux-0_811_2include_2linux_2sched_8h_source.html#l00104">sched.h:106</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_cbd7f246bdf7dc0a50281a272327e6ed.html">kernel</a></li><li class="navelem"><a class="el" href="src_2kernel_2traps_8c.html">traps.c</a></li>
    <li class="footer">Generated on Thu Sep 14 2023 10:03:01 for linux by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
